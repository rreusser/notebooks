<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="author" content="Ricky Reusser" />
  <meta property="article:author" content="Ricky Reusser" />
  {{#if title}}
  <meta name="twitter:title" content="{{title}}" />
  <meta property="og:title" content="{{title}}" />
  {{/if}}
  {{#if description}}
  <meta name="twitter:description" content="{{description}}" />
  <meta name="subject" content="{{description}}" />
  <meta name="description" content="{{description}}" />
  <meta property="og:description" content="{{description}}" />
  {{/if}}
  {{#if image}}
  <meta name="twitter:image" content="{{image}}">
  <meta name="twitter:card" content="summary_large_image">
  <meta property="og:image" content="{{image}}">
  {{/if}}
  {{#if silent}}
  <meta name="robots" content="noindex" />
  {{/if}}
  <link rel="alternate" type="application/rss+xml" title="Ricky Reusser's Notebooks" href="/notebooks/feed.xml" />
  <style type="text/css">
    @import url("observable:styles/index.css");
    @import "@fontsource/spline-sans-mono/400.css";
    @import "@fontsource/spline-sans-mono/600.css";
    @import "@fontsource/spline-sans-mono/700.css";
    @import "@fontsource/spline-sans-mono/400-italic.css";
    @import "@fontsource/spline-sans-mono/600-italic.css";
    @import "@fontsource/spline-sans-mono/700-italic.css";
    @import "@fontsource/source-serif-4/400.css";
    @import "@fontsource/source-serif-4/700.css";
    @import "@fontsource/source-serif-4/400-italic.css";
    @import "@fontsource/source-serif-4/700-italic.css";
    @import "@fontsource/inter/400.css";
    @import "@fontsource/inter/500.css";
    @import "@fontsource/inter/600.css";
    @import "@fontsource/inter/700.css";
    @import "@fontsource/inter/400-italic.css";
    @import "@fontsource/inter/500-italic.css";
    @import "@fontsource/inter/600-italic.css";
    @import "@fontsource/inter/700-italic.css";
    @import "/styles.css";
  </style>
  {{#if maxWidth}}<style> main { max-width: {{maxWidth}}; }</style>{{/if}}
</head>
<body>
  <nav class="menu">
    <a class="menu__item" href="/">rreusser.github.io</a>
    <a class="menu__item" href="/notebooks/">notebooks</a>
    <a class="menu__item" href="/sketches/">sketches</a>
    <a class="menu__item" href="/projects/">projects</a>
    <a class="menu__item" href="/trains-and-trails/">running</a>
  </nav>
  <header>
    <h1>{{title}}</h1>
    <div class="byline">
      {{#if author}}<address class="author"><a rel="author" href="{{authorUrl}}">{{author}}</a></address>{{/if}}
      {{#if publishedAt}}<time pubdate datetime={{publishedAtNumeric}}>{{publishedAt}}</time>{{/if}}
    </div>
    <div class="resource-links">
      {{#if observableUrl}}
        <a href="{{observableUrl}}" class="resource-link">
          <svg class="icon" viewBox="0 0 24 24" fill="currentColor">
            <circle cx="12" cy="12" r="10" fill="white"/>
            <path d="M9 7 l 8 5 -8 5 V10z" fill="#c44"/>
          </svg>
          Live notebook
        </a>
      {{/if}}
      {{#if sourceUrl}}
        <a href="{{sourceUrl}}" class="resource-link">
          <svg class="icon" viewBox="0 0 24 24" fill="currentColor">
            <path d="M12 .5C5.65.5.5 5.65.5 12a11.5 11.5 0 0 0 7.84 10.93c.57.11.78-.25.78-.56v-2.1c-3.19.7-3.86-1.54-3.86-1.54-.52-1.34-1.26-1.7-1.26-1.7-1.03-.7.08-.69.08-.69 1.14.08 1.74 1.17 1.74 1.17 1.02 1.75 2.67 1.24 3.32.95.1-.74.4-1.24.72-1.53-2.55-.29-5.23-1.28-5.23-5.72 0-1.26.45-2.29 1.17-3.09-.12-.29-.51-1.46.11-3.05 0 0 .96-.31 3.14 1.18a10.92 10.92 0 0 1 2.86-.38c.97 0 1.94.13 2.86.38 2.18-1.49 3.14-1.18 3.14-1.18.62 1.59.23 2.76.11 3.05.73.8 1.17 1.83 1.17 3.09 0 4.45-2.68 5.43-5.23 5.72.41.35.78 1.05.78 2.12v3.14c0 .31.21.67.79.56A11.5 11.5 0 0 0 23.5 12C23.5 5.65 18.35.5 12 .5Z"/>
          </svg>
          View source
        </a>
      {{/if}}
    </div>
  </header>
  <div class="container">
    {{#if index}}
      <div class="index-controls">
        <div id="index-filter-container"></div>
        <div class="index-view-toggle" role="group" aria-label="View options">
          <button class="index-view-btn index-view-btn--grid active" data-view="grid" title="Grid view" aria-label="Grid view" aria-pressed="true">
            <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor" aria-hidden="true">
              <rect x="1" y="1" width="6" height="6" rx="1"/>
              <rect x="9" y="1" width="6" height="6" rx="1"/>
              <rect x="1" y="9" width="6" height="6" rx="1"/>
              <rect x="9" y="9" width="6" height="6" rx="1"/>
            </svg>
          </button>
          <button class="index-view-btn index-view-btn--list" data-view="list" title="List view" aria-label="List view" aria-pressed="false">
            <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor" aria-hidden="true">
              <rect x="1" y="2" width="3" height="3" rx="0.5"/>
              <rect x="6" y="2.5" width="9" height="2" rx="0.5"/>
              <rect x="1" y="6.5" width="3" height="3" rx="0.5"/>
              <rect x="6" y="7" width="9" height="2" rx="0.5"/>
              <rect x="1" y="11" width="3" height="3" rx="0.5"/>
              <rect x="6" y="11.5" width="9" height="2" rx="0.5"/>
            </svg>
          </button>
        </div>
      </div>
      <ul class="index" id="index-list">
        {{#each index}}
        <li class="index__item"{{#if tags}} data-tags="{{#each tags}}{{this}}{{#unless @last}},{{/unless}}{{/each}}"{{/if}} data-path="{{path}}">
          <div class="index__image-container">
            {{#if imageUrl}}
            <img class="index__image" src="{{imageUrl}}" alt="" loading="lazy" />
            {{else}}
            <div class="index__placeholder"></div>
            {{/if}}
          </div>
          <div class="index__content">
            <h2 class="index__title"><a href="{{path}}" class="index__title-link">{{title}}</a></h2>
            <div class="index__meta">
              {{#if publishedAt}}<time class="index__date">{{publishedAt}}</time>{{/if}}
              {{#if tags}}
              <div class="index__tags">
                {{#each tags}}
                <a href="?tag={{encodeURIComponent this}}" class="index__tag">{{this}}</a>
                {{/each}}
              </div>
              {{/if}}
            </div>
            {{#if description}}<p class="index__description">{{description}}</p>{{/if}}
          </div>
        </li>
        {{/each}}
      </ul>
      <script>
        (function() {
          const urlParams = new URLSearchParams(window.location.search);
          const activeTag = urlParams.get('tag');
          const indexList = document.getElementById('index-list');
          const viewBtns = document.querySelectorAll('.index-view-btn');

          // View toggle
          const savedView = localStorage.getItem('indexView') || 'grid';
          if (savedView === 'list') {
            indexList.classList.add('index--list');
            viewBtns.forEach(btn => {
              const isActive = btn.dataset.view === 'list';
              btn.classList.toggle('active', isActive);
              btn.setAttribute('aria-pressed', isActive);
            });
          }

          viewBtns.forEach(btn => {
            btn.addEventListener('click', () => {
              const view = btn.dataset.view;
              indexList.classList.toggle('index--list', view === 'list');
              viewBtns.forEach(b => {
                const isActive = b.dataset.view === view;
                b.classList.toggle('active', isActive);
                b.setAttribute('aria-pressed', isActive);
              });
              localStorage.setItem('indexView', view);
            });
          });

          // Add click handlers to cards
          const items = document.querySelectorAll('.index__item');
          items.forEach(item => {
            item.addEventListener('click', function(e) {
              // Don't navigate if clicking a tag link
              if (e.target.closest('.index__tag')) return;
              const path = item.dataset.path;
              if (path) window.location.href = path;
            });
          });

          if (activeTag) {
            // Show filter indicator
            const filterContainer = document.getElementById('index-filter-container');
            filterContainer.innerHTML = `
              <div class="index__active-filter">
                <span class="index__filter-label">Filtered by:</span>
                <span class="index__filter-tag">
                  ${activeTag}
                  <a href="./" class="index__filter-remove" aria-label="Remove filter">Ã—</a>
                </span>
              </div>
            `;

            // Filter items (case-insensitive)
            const activeTagLower = activeTag.toLowerCase();
            items.forEach(item => {
              const tags = (item.dataset.tags || '').split(',').filter(Boolean);
              if (!tags.some(t => t.toLowerCase() === activeTagLower)) {
                item.style.display = 'none';
              }
            });
          }
        })();
      </script>
    {{/if}}

    <main></main>
    {{#if mastodonPostId}}
      <script src="../comments.js" type="module"></script>
      <style>
        #comment-root {
          margin: auto;
          max-width: 640px;
        }
      </style>
      <div id="comment-root" data-post-id="{{mastodonPostId}}"></div>
    {{/if}}
  </div>
  <footer>
    <div class="footer__attrib">&copy; 2026 Ricky Reusser</div>
    <a href="/notebooks/feed.xml" class="footer__rss">
      <svg class="icon" viewBox="0 0 24 24" fill="currentColor" width="14" height="14">
        <circle cx="6.5" cy="17.5" r="2.5"/>
        <path d="M4 4a16 16 0 0 1 16 16h-4A12 12 0 0 0 4 8V4z"/>
        <path d="M4 10a10 10 0 0 1 10 10h-4a6 6 0 0 0-6-6v-4z"/>
      </svg>
      RSS
    </a>
  </footer>
</body>
</html>
