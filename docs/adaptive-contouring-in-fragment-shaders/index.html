<!doctype html><html lang="en"><head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="author" content="Ricky Reusser">
  <meta property="article:author" content="Ricky Reusser">
  <meta name="twitter:title" content="Adaptive Contouring in Fragment Shaders">
  <meta property="og:title" content="Adaptive Contouring in Fragment Shaders">
  <meta name="twitter:description" content="GPU techniques for rendering adaptive contours using screen-space derivatives, with multi-octave blending and antialiasing.">
  <meta name="subject" content="GPU techniques for rendering adaptive contours using screen-space derivatives, with multi-octave blending and antialiasing.">
  <meta name="description" content="GPU techniques for rendering adaptive contours using screen-space derivatives, with multi-octave blending and antialiasing.">
  <meta property="og:description" content="GPU techniques for rendering adaptive contours using screen-space derivatives, with multi-octave blending and antialiasing.">
  <meta name="twitter:image" content="https://rreusser.github.io/notebooks/meta/adaptive-contouring-in-fragment-shaders.jpg">
  <meta name="twitter:card" content="summary_large_image">
  <meta property="og:image" content="https://rreusser.github.io/notebooks/meta/adaptive-contouring-in-fragment-shaders.jpg">
  <link rel="alternate" type="application/rss+xml" title="Ricky Reusser's Notebooks" href="/notebooks/feed.xml">
  <style type="text/css">@import url("https://fonts.googleapis.com/css?family=Open+Sans:300,400,400i,700");
    /* Copyright 2025 Observable, Inc. */
    :root {
  --serif:
    "Source Serif 4", "Iowan Old Style", "Apple Garamond", "Palatino Linotype", "Times New Roman",
    "Droid Serif", Times, serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
  --sans-serif:
    "Inter", -apple-system, BlinkMacSystemFont, "avenir next", avenir, helvetica, "helvetica neue",
    ubuntu, roboto, noto, "segoe ui", arial, sans-serif;
  --monospace: "Spline Sans Mono", Menlo, Consolas, monospace;
  --monospace-font: 14px/1.5 var(--monospace);
  --max-width: calc(1024px - 4 * 16px); /* max-w-5xl p-4 */
}
    html {
  font: 17px/1.5 var(--serif);
  -webkit-text-size-adjust: 100%;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  background: var(--theme-background);
  color: var(--theme-foreground);
  margin: 16px 0;
  padding: 16px 24px;
}
    body {
  margin: auto;
  max-width: var(--max-width);
}
    h1,
h2,
h3,
h4,
h5,
h6 {
  color: var(--theme-foreground-alt);
  font-weight: 700;
  line-height: 1.15;
  margin-top: 0;
  margin-bottom: 0.25rem;
  text-wrap: balance;
}
    h2 + p,
h3 + p,
h4 + p,
h2 + table,
h3 + table,
h4 + table {
  margin-top: 0;
}
    .observablehq:first-of-type h1 + h2 {
  color: var(--theme-foreground);
  font-size: 20px;
  font-style: italic;
  font-weight: normal;
  margin-bottom: 1rem; /* see h2 ~ p */
}
    a[href] {
  color: var(--theme-foreground-focus);
  text-decoration: none;
}
    a[href]:hover,
a[href]:focus {
  text-decoration: underline;
}
    pre,
code,
tt {
  font-family: var(--monospace);
  font-size: 82.35294117%; /* from 17px to 14px */
}
    pre code,
figcaption code {
  font-size: inherit;
}
    pre[data-language] {
  position: relative;
}
    pre[data-language]::before {
  content: attr(data-language);
  position: sticky;
  top: 0;
  left: 0;
  height: 0;
  display: block;
  text-align: right;
  margin-right: -4px;
  pointer-events: none;
  font-size: 12px;
  line-height: 21px;
  color: var(--theme-foreground-muted);
}
    h1 code,
h2 code,
h3 code,
h4 code,
h5 code,
h6 code {
  font-size: 88.235294117%; /* from 17px to 15px */
}
    h2[id] a[href],
h3[id] a[href] {
  color: inherit;
}
    pre {
  line-height: 1.5;
}
    img {
  max-width: 100%;
}
    p,
table,
figure,
figcaption,
h1,
h2,
h3,
h4,
h5,
h6,
.katex-display {
  max-width: 640px;
}
    blockquote,
ol,
ul {
  max-width: 600px;
}
    blockquote {
  margin: 1rem 1.5rem;
}
    ul,
ol {
  padding-left: 28px;
}
    hr {
  height: 1px;
  margin: 1rem 0;
  padding: 1rem 0;
  border: none;
  background: no-repeat center/100% 1px
    linear-gradient(to right, var(--theme-foreground-faintest), var(--theme-foreground-faintest));
}
    pre {
  background-color: var(--theme-background-alt);
  border-radius: 4px;
  margin: 1rem -1rem;
  min-height: 1.5em;
  padding: 4px 1rem;
  overflow-x: auto;
  overscroll-behavior-x: none;
  box-sizing: border-box;
}
    pre > code:only-child {
  display: block;
  width: fit-content;
}
    input:not([type]),
input[type="email"],
input[type="number"],
input[type="password"],
input[type="range"],
input[type="search"],
input[type="tel"],
input[type="text"],
input[type="url"] {
  width: 240px;
}
    input,
canvas,
button {
  vertical-align: middle;
}
    button,
input,
textarea {
  accent-color: var(--theme-foreground-focus);
}
    table {
  width: 100%;
  border-collapse: collapse;
  font: 13px/1.2 var(--sans-serif);
}
    table pre,
table code,
table tt {
  font-size: inherit;
  line-height: inherit;
}
    th > pre:only-child,
td > pre:only-child {
  margin: 0;
  padding: 0;
}
    th {
  color: var(--theme-foreground);
  text-align: left;
  vertical-align: bottom;
}
    td {
  color: var(--theme-foreground-alt);
  vertical-align: top;
}
    th,
td {
  padding: 3px 6.5px 3px 0;
}
    th:last-child,
td:last-child {
  padding-right: 0;
}
    tr:not(:last-child) {
  border-bottom: solid 1px var(--theme-foreground-faintest);
}
    thead tr {
  border-bottom: solid 1px var(--theme-foreground-fainter);
}
    figure,
table {
  margin: 1rem 0;
}
    figure img {
  max-width: 100%;
}
    figure > h2,
figure > h3 {
  font-family: var(--sans-serif);
}
    figure > h2 {
  font-size: 20px;
}
    figure > h3 {
  font-size: 16px;
  font-weight: normal;
}
    figcaption {
  font: small var(--sans-serif);
  color: var(--theme-foreground-muted);
}
    .observablehq--collapsed,
.observablehq--expanded.observablehq--inspect a {
  cursor: pointer;
}
    .observablehq--caret {
  margin-right: 4px;
  vertical-align: baseline;
}
    .observablehq--field {
  text-indent: -1rem;
  margin-left: 1rem;
}
    .observablehq--inspect {
  font: var(--monospace-font);
  overflow-x: auto;
  white-space: pre;
  display: block;
  padding: 2px 0;
}
    .observablehq--inspect.observablehq--import {
  white-space: normal;
}
    .observablehq--inspect::-webkit-scrollbar {
  display: none;
}
    .observablehq--error .observablehq--inspect {
  word-break: break-all;
  white-space: pre-wrap;
}
    .observablehq--string-expand {
  margin-left: 6px;
  padding: 2px 6px;
  border-radius: 2px;
  font-size: 80%;
  background: var(--theme-background-alt);
  cursor: pointer;
  vertical-align: middle;
}
    .observablehq--keyword {
  color: var(--syntax-keyword);
}
    .observablehq--index,
.observablehq--key {
  color: var(--syntax-definition);
}
    .observablehq--symbol,
.observablehq--regexp,
.observablehq--string {
  color: var(--syntax-string);
}
    .observablehq--null {
  color: var(--syntax-keyword);
}
    .observablehq--undefined {
  color: var(--syntax-variable);
}
    .observablehq--prototype-key {
  color: var(--syntax-comment);
}
    .observablehq--bigint,
.observablehq--boolean,
.observablehq--date,
.observablehq--forbidden,
.observablehq--number {
  color: var(--syntax-literal);
}
    .observablehq--error {
  color: var(--theme-error);
}
    .observablehq--cell {
  margin: 17px 0;
  min-height: 1px; /* prevent margin collapse when empty */
}
    .tok-link {
  color: var(--syntax-link);
}
    .tok-strong {
  font-weight: 600;
}
    .tok-emphasis {
  font-style: italic;
}
    .tok-keyword {
  color: var(--syntax-keyword);
}
    .tok-atom {
  color: var(--syntax-atom);
}
    .tok-literal {
  color: var(--syntax-literal);
}
    .tok-string {
  color: var(--syntax-string);
}
    .tok-comment {
  color: var(--syntax-comment);
}
    .tok-invalid {
  color: var(--syntax-invalid);
}
    .tok-variable {
  color: var(--syntax-variable);
}
    .tok-definition {
  color: var(--syntax-definition);
}
    .tok-meta {
  color: var(--syntax-meta);
}
    .plot-d6a7b5 {
  --plot-background: var(--theme-background);
}
    p .plot-d6a7b5 {
  display: inline-block;
}
    .observablehq--cell:empty {
  min-height: 0;
}
    .observablehq--cell:not(:empty) + pre {
  margin-top: -11px;
}
    /* spline-sans-mono-latin-ext-400-normal */
    @font-face {
  font-family: 'Spline Sans Mono';
  font-style: normal;
  font-display: swap;
  font-weight: 400;
  src: url(/notebooks/assets/spline-sans-mono-latin-ext-400-normal-BfWvPoNT.woff2) format('woff2'), url(/notebooks/assets/spline-sans-mono-latin-ext-400-normal-BkT5i7fe.woff) format('woff');
  unicode-range: U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF;
}
    /* spline-sans-mono-latin-400-normal */
    @font-face {
  font-family: 'Spline Sans Mono';
  font-style: normal;
  font-display: swap;
  font-weight: 400;
  src: url(/notebooks/assets/spline-sans-mono-latin-400-normal-mUpA6Mve.woff2) format('woff2'), url(/notebooks/assets/spline-sans-mono-latin-400-normal-739QRW1l.woff) format('woff');
  unicode-range: U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;
}
    /* spline-sans-mono-latin-ext-600-normal */
    @font-face {
  font-family: 'Spline Sans Mono';
  font-style: normal;
  font-display: swap;
  font-weight: 600;
  src: url(/notebooks/assets/spline-sans-mono-latin-ext-600-normal-CYO0557q.woff2) format('woff2'), url(/notebooks/assets/spline-sans-mono-latin-ext-600-normal-es3wdE0V.woff) format('woff');
  unicode-range: U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF;
}
    /* spline-sans-mono-latin-600-normal */
    @font-face {
  font-family: 'Spline Sans Mono';
  font-style: normal;
  font-display: swap;
  font-weight: 600;
  src: url(/notebooks/assets/spline-sans-mono-latin-600-normal-BrWm9FVc.woff2) format('woff2'), url(/notebooks/assets/spline-sans-mono-latin-600-normal-ZCqv2Jod.woff) format('woff');
  unicode-range: U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;
}
    /* spline-sans-mono-latin-ext-700-normal */
    @font-face {
  font-family: 'Spline Sans Mono';
  font-style: normal;
  font-display: swap;
  font-weight: 700;
  src: url(/notebooks/assets/spline-sans-mono-latin-ext-700-normal-CIwA9V33.woff2) format('woff2'), url(/notebooks/assets/spline-sans-mono-latin-ext-700-normal-OD-FaHeD.woff) format('woff');
  unicode-range: U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF;
}
    /* spline-sans-mono-latin-700-normal */
    @font-face {
  font-family: 'Spline Sans Mono';
  font-style: normal;
  font-display: swap;
  font-weight: 700;
  src: url(/notebooks/assets/spline-sans-mono-latin-700-normal-BwW4xXNM.woff2) format('woff2'), url(/notebooks/assets/spline-sans-mono-latin-700-normal-BLdnetBw.woff) format('woff');
  unicode-range: U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;
}
    /* spline-sans-mono-latin-ext-400-italic */
    @font-face {
  font-family: 'Spline Sans Mono';
  font-style: italic;
  font-display: swap;
  font-weight: 400;
  src: url(/notebooks/assets/spline-sans-mono-latin-ext-400-italic-Bgx7hsPO.woff2) format('woff2'), url(/notebooks/assets/spline-sans-mono-latin-ext-400-italic-ByCpokw0.woff) format('woff');
  unicode-range: U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF;
}
    /* spline-sans-mono-latin-400-italic */
    @font-face {
  font-family: 'Spline Sans Mono';
  font-style: italic;
  font-display: swap;
  font-weight: 400;
  src: url(/notebooks/assets/spline-sans-mono-latin-400-italic-DP081DET.woff2) format('woff2'), url(/notebooks/assets/spline-sans-mono-latin-400-italic-Z_tpZbsx.woff) format('woff');
  unicode-range: U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;
}
    /* spline-sans-mono-latin-ext-600-italic */
    @font-face {
  font-family: 'Spline Sans Mono';
  font-style: italic;
  font-display: swap;
  font-weight: 600;
  src: url(/notebooks/assets/spline-sans-mono-latin-ext-600-italic-CJ3g_dA0.woff2) format('woff2'), url(/notebooks/assets/spline-sans-mono-latin-ext-600-italic-QnP7nD6P.woff) format('woff');
  unicode-range: U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF;
}
    /* spline-sans-mono-latin-600-italic */
    @font-face {
  font-family: 'Spline Sans Mono';
  font-style: italic;
  font-display: swap;
  font-weight: 600;
  src: url(/notebooks/assets/spline-sans-mono-latin-600-italic-DUvxu3FQ.woff2) format('woff2'), url(/notebooks/assets/spline-sans-mono-latin-600-italic-B7XC_fUc.woff) format('woff');
  unicode-range: U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;
}
    /* spline-sans-mono-latin-ext-700-italic */
    @font-face {
  font-family: 'Spline Sans Mono';
  font-style: italic;
  font-display: swap;
  font-weight: 700;
  src: url(/notebooks/assets/spline-sans-mono-latin-ext-700-italic-DIdep8Er.woff2) format('woff2'), url(/notebooks/assets/spline-sans-mono-latin-ext-700-italic-CIqQYA0i.woff) format('woff');
  unicode-range: U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF;
}
    /* spline-sans-mono-latin-700-italic */
    @font-face {
  font-family: 'Spline Sans Mono';
  font-style: italic;
  font-display: swap;
  font-weight: 700;
  src: url(/notebooks/assets/spline-sans-mono-latin-700-italic-shtgotnr.woff2) format('woff2'), url(/notebooks/assets/spline-sans-mono-latin-700-italic-6zMndKap.woff) format('woff');
  unicode-range: U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;
}
    /* source-serif-4-cyrillic-ext-400-normal */
    @font-face {
  font-family: 'Source Serif 4';
  font-style: normal;
  font-display: swap;
  font-weight: 400;
  src: url(/notebooks/assets/source-serif-4-cyrillic-ext-400-normal-CWV284fw.woff2) format('woff2'), url(/notebooks/assets/source-serif-4-cyrillic-ext-400-normal-DLkyKLvH.woff) format('woff');
  unicode-range: U+0460-052F,U+1C80-1C8A,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;
}
    /* source-serif-4-cyrillic-400-normal */
    @font-face {
  font-family: 'Source Serif 4';
  font-style: normal;
  font-display: swap;
  font-weight: 400;
  src: url(/notebooks/assets/source-serif-4-cyrillic-400-normal-C44pakCn.woff2) format('woff2'), url(/notebooks/assets/source-serif-4-cyrillic-400-normal-B8Z6Jvzv.woff) format('woff');
  unicode-range: U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;
}
    /* source-serif-4-greek-400-normal */
    @font-face {
  font-family: 'Source Serif 4';
  font-style: normal;
  font-display: swap;
  font-weight: 400;
  src: url(/notebooks/assets/source-serif-4-greek-400-normal-Cw5-AHNN.woff2) format('woff2'), url(/notebooks/assets/source-serif-4-greek-400-normal-BccYJ-vZ.woff) format('woff');
  unicode-range: U+0370-0377,U+037A-037F,U+0384-038A,U+038C,U+038E-03A1,U+03A3-03FF;
}
    /* source-serif-4-vietnamese-400-normal */
    @font-face {
  font-family: 'Source Serif 4';
  font-style: normal;
  font-display: swap;
  font-weight: 400;
  src: url(/notebooks/assets/source-serif-4-vietnamese-400-normal-BbG3LG1A.woff2) format('woff2'), url(/notebooks/assets/source-serif-4-vietnamese-400-normal-DR1UuFon.woff) format('woff');
  unicode-range: U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;
}
    /* source-serif-4-latin-ext-400-normal */
    @font-face {
  font-family: 'Source Serif 4';
  font-style: normal;
  font-display: swap;
  font-weight: 400;
  src: url(/notebooks/assets/source-serif-4-latin-ext-400-normal-Cp7z-ARB.woff2) format('woff2'), url(/notebooks/assets/source-serif-4-latin-ext-400-normal-CEpydyUl.woff) format('woff');
  unicode-range: U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF;
}
    /* source-serif-4-latin-400-normal */
    @font-face {
  font-family: 'Source Serif 4';
  font-style: normal;
  font-display: swap;
  font-weight: 400;
  src: url(/notebooks/assets/source-serif-4-latin-400-normal-DJ5YJwmz.woff2) format('woff2'), url(/notebooks/assets/source-serif-4-latin-400-normal-Dn3IlU-Z.woff) format('woff');
  unicode-range: U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;
}
    /* source-serif-4-cyrillic-ext-700-normal */
    @font-face {
  font-family: 'Source Serif 4';
  font-style: normal;
  font-display: swap;
  font-weight: 700;
  src: url(/notebooks/assets/source-serif-4-cyrillic-ext-700-normal-B9R79AaY.woff2) format('woff2'), url(/notebooks/assets/source-serif-4-cyrillic-ext-700-normal-DsKdgJCr.woff) format('woff');
  unicode-range: U+0460-052F,U+1C80-1C8A,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;
}
    /* source-serif-4-cyrillic-700-normal */
    @font-face {
  font-family: 'Source Serif 4';
  font-style: normal;
  font-display: swap;
  font-weight: 700;
  src: url(/notebooks/assets/source-serif-4-cyrillic-700-normal-BmBwwUw2.woff2) format('woff2'), url(/notebooks/assets/source-serif-4-cyrillic-700-normal-DVvE-KHB.woff) format('woff');
  unicode-range: U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;
}
    /* source-serif-4-greek-700-normal */
    @font-face {
  font-family: 'Source Serif 4';
  font-style: normal;
  font-display: swap;
  font-weight: 700;
  src: url(/notebooks/assets/source-serif-4-greek-700-normal-BzuEQSqJ.woff2) format('woff2'), url(/notebooks/assets/source-serif-4-greek-700-normal-C5Ojiwey.woff) format('woff');
  unicode-range: U+0370-0377,U+037A-037F,U+0384-038A,U+038C,U+038E-03A1,U+03A3-03FF;
}
    /* source-serif-4-vietnamese-700-normal */
    @font-face {
  font-family: 'Source Serif 4';
  font-style: normal;
  font-display: swap;
  font-weight: 700;
  src: url(/notebooks/assets/source-serif-4-vietnamese-700-normal-CCAt8c4x.woff2) format('woff2'), url(/notebooks/assets/source-serif-4-vietnamese-700-normal-BBU5i_d1.woff) format('woff');
  unicode-range: U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;
}
    /* source-serif-4-latin-ext-700-normal */
    @font-face {
  font-family: 'Source Serif 4';
  font-style: normal;
  font-display: swap;
  font-weight: 700;
  src: url(/notebooks/assets/source-serif-4-latin-ext-700-normal-C8ywwcuQ.woff2) format('woff2'), url(/notebooks/assets/source-serif-4-latin-ext-700-normal-BZsvHpal.woff) format('woff');
  unicode-range: U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF;
}
    /* source-serif-4-latin-700-normal */
    @font-face {
  font-family: 'Source Serif 4';
  font-style: normal;
  font-display: swap;
  font-weight: 700;
  src: url(/notebooks/assets/source-serif-4-latin-700-normal-CGGdTIBe.woff2) format('woff2'), url(/notebooks/assets/source-serif-4-latin-700-normal-3V4Pv1hj.woff) format('woff');
  unicode-range: U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;
}
    /* source-serif-4-cyrillic-ext-400-italic */
    @font-face {
  font-family: 'Source Serif 4';
  font-style: italic;
  font-display: swap;
  font-weight: 400;
  src: url(/notebooks/assets/source-serif-4-cyrillic-ext-400-italic-zoDFlEzN.woff2) format('woff2'), url(/notebooks/assets/source-serif-4-cyrillic-ext-400-italic-Dx4A8QUO.woff) format('woff');
  unicode-range: U+0460-052F,U+1C80-1C8A,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;
}
    /* source-serif-4-cyrillic-400-italic */
    @font-face {
  font-family: 'Source Serif 4';
  font-style: italic;
  font-display: swap;
  font-weight: 400;
  src: url(/notebooks/assets/source-serif-4-cyrillic-400-italic-BLN19cOa.woff2) format('woff2'), url(/notebooks/assets/source-serif-4-cyrillic-400-italic-Dx8qIUN3.woff) format('woff');
  unicode-range: U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;
}
    /* source-serif-4-greek-400-italic */
    @font-face {
  font-family: 'Source Serif 4';
  font-style: italic;
  font-display: swap;
  font-weight: 400;
  src: url(/notebooks/assets/source-serif-4-greek-400-italic-C7D4Dq0H.woff2) format('woff2'), url(/notebooks/assets/source-serif-4-greek-400-italic-DcuniPAV.woff) format('woff');
  unicode-range: U+0370-0377,U+037A-037F,U+0384-038A,U+038C,U+038E-03A1,U+03A3-03FF;
}
    /* source-serif-4-vietnamese-400-italic */
    @font-face {
  font-family: 'Source Serif 4';
  font-style: italic;
  font-display: swap;
  font-weight: 400;
  src: url(/notebooks/assets/source-serif-4-vietnamese-400-italic-CjUPRDIa.woff2) format('woff2'), url(/notebooks/assets/source-serif-4-vietnamese-400-italic-DyjhI2GX.woff) format('woff');
  unicode-range: U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;
}
    /* source-serif-4-latin-ext-400-italic */
    @font-face {
  font-family: 'Source Serif 4';
  font-style: italic;
  font-display: swap;
  font-weight: 400;
  src: url(/notebooks/assets/source-serif-4-latin-ext-400-italic-JynPwBMj.woff2) format('woff2'), url(/notebooks/assets/source-serif-4-latin-ext-400-italic-G7LDTi7t.woff) format('woff');
  unicode-range: U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF;
}
    /* source-serif-4-latin-400-italic */
    @font-face {
  font-family: 'Source Serif 4';
  font-style: italic;
  font-display: swap;
  font-weight: 400;
  src: url(/notebooks/assets/source-serif-4-latin-400-italic-0j97Jm6B.woff2) format('woff2'), url(/notebooks/assets/source-serif-4-latin-400-italic-Dv9jnFA_.woff) format('woff');
  unicode-range: U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;
}
    /* source-serif-4-cyrillic-ext-700-italic */
    @font-face {
  font-family: 'Source Serif 4';
  font-style: italic;
  font-display: swap;
  font-weight: 700;
  src: url(/notebooks/assets/source-serif-4-cyrillic-ext-700-italic-BdFI3uD2.woff2) format('woff2'), url(/notebooks/assets/source-serif-4-cyrillic-ext-700-italic-CW6u860k.woff) format('woff');
  unicode-range: U+0460-052F,U+1C80-1C8A,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;
}
    /* source-serif-4-cyrillic-700-italic */
    @font-face {
  font-family: 'Source Serif 4';
  font-style: italic;
  font-display: swap;
  font-weight: 700;
  src: url(/notebooks/assets/source-serif-4-cyrillic-700-italic-C5vSpb1a.woff2) format('woff2'), url(/notebooks/assets/source-serif-4-cyrillic-700-italic-BNXt_5iO.woff) format('woff');
  unicode-range: U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;
}
    /* source-serif-4-greek-700-italic */
    @font-face {
  font-family: 'Source Serif 4';
  font-style: italic;
  font-display: swap;
  font-weight: 700;
  src: url(/notebooks/assets/source-serif-4-greek-700-italic-DbF55r_P.woff2) format('woff2'), url(/notebooks/assets/source-serif-4-greek-700-italic-bfz8xsri.woff) format('woff');
  unicode-range: U+0370-0377,U+037A-037F,U+0384-038A,U+038C,U+038E-03A1,U+03A3-03FF;
}
    /* source-serif-4-vietnamese-700-italic */
    @font-face {
  font-family: 'Source Serif 4';
  font-style: italic;
  font-display: swap;
  font-weight: 700;
  src: url(/notebooks/assets/source-serif-4-vietnamese-700-italic-CqUud9yW.woff2) format('woff2'), url(/notebooks/assets/source-serif-4-vietnamese-700-italic-CmYmx5Sm.woff) format('woff');
  unicode-range: U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;
}
    /* source-serif-4-latin-ext-700-italic */
    @font-face {
  font-family: 'Source Serif 4';
  font-style: italic;
  font-display: swap;
  font-weight: 700;
  src: url(/notebooks/assets/source-serif-4-latin-ext-700-italic-D3ZlY63u.woff2) format('woff2'), url(/notebooks/assets/source-serif-4-latin-ext-700-italic-DppnFcZR.woff) format('woff');
  unicode-range: U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF;
}
    /* source-serif-4-latin-700-italic */
    @font-face {
  font-family: 'Source Serif 4';
  font-style: italic;
  font-display: swap;
  font-weight: 700;
  src: url(/notebooks/assets/source-serif-4-latin-700-italic-JqVfbRzb.woff2) format('woff2'), url(/notebooks/assets/source-serif-4-latin-700-italic-BU_ZoKoz.woff) format('woff');
  unicode-range: U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;
}
    /* inter-cyrillic-ext-400-normal */
    @font-face {
  font-family: 'Inter';
  font-style: normal;
  font-display: swap;
  font-weight: 400;
  src: url(/notebooks/assets/inter-cyrillic-ext-400-normal-BQZuk6qB.woff2) format('woff2'), url(/notebooks/assets/inter-cyrillic-ext-400-normal-DQukG94-.woff) format('woff');
  unicode-range: U+0460-052F,U+1C80-1C8A,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;
}
    /* inter-cyrillic-400-normal */
    @font-face {
  font-family: 'Inter';
  font-style: normal;
  font-display: swap;
  font-weight: 400;
  src: url(/notebooks/assets/inter-cyrillic-400-normal-obahsSVq.woff2) format('woff2'), url(/notebooks/assets/inter-cyrillic-400-normal-HOLc17fK.woff) format('woff');
  unicode-range: U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;
}
    /* inter-greek-ext-400-normal */
    @font-face {
  font-family: 'Inter';
  font-style: normal;
  font-display: swap;
  font-weight: 400;
  src: url(/notebooks/assets/inter-greek-ext-400-normal-DGGRlc-M.woff2) format('woff2'), url(/notebooks/assets/inter-greek-ext-400-normal-KugGGMne.woff) format('woff');
  unicode-range: U+1F00-1FFF;
}
    /* inter-greek-400-normal */
    @font-face {
  font-family: 'Inter';
  font-style: normal;
  font-display: swap;
  font-weight: 400;
  src: url(/notebooks/assets/inter-greek-400-normal-B4URO6DV.woff2) format('woff2'), url(/notebooks/assets/inter-greek-400-normal-q2sYcFCs.woff) format('woff');
  unicode-range: U+0370-0377,U+037A-037F,U+0384-038A,U+038C,U+038E-03A1,U+03A3-03FF;
}
    /* inter-vietnamese-400-normal */
    @font-face {
  font-family: 'Inter';
  font-style: normal;
  font-display: swap;
  font-weight: 400;
  src: url(/notebooks/assets/inter-vietnamese-400-normal-DMkecbls.woff2) format('woff2'), url(/notebooks/assets/inter-vietnamese-400-normal-Bbgyi5SW.woff) format('woff');
  unicode-range: U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;
}
    /* inter-latin-ext-400-normal */
    @font-face {
  font-family: 'Inter';
  font-style: normal;
  font-display: swap;
  font-weight: 400;
  src: url(/notebooks/assets/inter-latin-ext-400-normal-C1nco2VV.woff2) format('woff2'), url(/notebooks/assets/inter-latin-ext-400-normal-77YHD8bZ.woff) format('woff');
  unicode-range: U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF;
}
    /* inter-latin-400-normal */
    @font-face {
  font-family: 'Inter';
  font-style: normal;
  font-display: swap;
  font-weight: 400;
  src: url(/notebooks/assets/inter-latin-400-normal-C38fXH4l.woff2) format('woff2'), url(/notebooks/assets/inter-latin-400-normal-CyCys3Eg.woff) format('woff');
  unicode-range: U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;
}
    /* inter-cyrillic-ext-500-normal */
    @font-face {
  font-family: 'Inter';
  font-style: normal;
  font-display: swap;
  font-weight: 500;
  src: url(/notebooks/assets/inter-cyrillic-ext-500-normal-B0yAr1jD.woff2) format('woff2'), url(/notebooks/assets/inter-cyrillic-ext-500-normal-BmqWE9Dz.woff) format('woff');
  unicode-range: U+0460-052F,U+1C80-1C8A,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;
}
    /* inter-cyrillic-500-normal */
    @font-face {
  font-family: 'Inter';
  font-style: normal;
  font-display: swap;
  font-weight: 500;
  src: url(/notebooks/assets/inter-cyrillic-500-normal-BasfLYem.woff2) format('woff2'), url(/notebooks/assets/inter-cyrillic-500-normal-CxZf_p3X.woff) format('woff');
  unicode-range: U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;
}
    /* inter-greek-ext-500-normal */
    @font-face {
  font-family: 'Inter';
  font-style: normal;
  font-display: swap;
  font-weight: 500;
  src: url(/notebooks/assets/inter-greek-ext-500-normal-C4iEst2y.woff2) format('woff2'), url(/notebooks/assets/inter-greek-ext-500-normal-2j5mBUwD.woff) format('woff');
  unicode-range: U+1F00-1FFF;
}
    /* inter-greek-500-normal */
    @font-face {
  font-family: 'Inter';
  font-style: normal;
  font-display: swap;
  font-weight: 500;
  src: url(/notebooks/assets/inter-greek-500-normal-BIZE56-Y.woff2) format('woff2'), url(/notebooks/assets/inter-greek-500-normal-Xzm54t5V.woff) format('woff');
  unicode-range: U+0370-0377,U+037A-037F,U+0384-038A,U+038C,U+038E-03A1,U+03A3-03FF;
}
    /* inter-vietnamese-500-normal */
    @font-face {
  font-family: 'Inter';
  font-style: normal;
  font-display: swap;
  font-weight: 500;
  src: url(/notebooks/assets/inter-vietnamese-500-normal-DOriooB6.woff2) format('woff2'), url(/notebooks/assets/inter-vietnamese-500-normal-mJboJaSs.woff) format('woff');
  unicode-range: U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;
}
    /* inter-latin-ext-500-normal */
    @font-face {
  font-family: 'Inter';
  font-style: normal;
  font-display: swap;
  font-weight: 500;
  src: url(/notebooks/assets/inter-latin-ext-500-normal-CV4jyFjo.woff2) format('woff2'), url(/notebooks/assets/inter-latin-ext-500-normal-BxGbmqWO.woff) format('woff');
  unicode-range: U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF;
}
    /* inter-latin-500-normal */
    @font-face {
  font-family: 'Inter';
  font-style: normal;
  font-display: swap;
  font-weight: 500;
  src: url(/notebooks/assets/inter-latin-500-normal-Cerq10X2.woff2) format('woff2'), url(/notebooks/assets/inter-latin-500-normal-BL9OpVg8.woff) format('woff');
  unicode-range: U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;
}
    /* inter-cyrillic-ext-600-normal */
    @font-face {
  font-family: 'Inter';
  font-style: normal;
  font-display: swap;
  font-weight: 600;
  src: url(/notebooks/assets/inter-cyrillic-ext-600-normal-Dfes3d0z.woff2) format('woff2'), url(/notebooks/assets/inter-cyrillic-ext-600-normal-Bcila6Z-.woff) format('woff');
  unicode-range: U+0460-052F,U+1C80-1C8A,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;
}
    /* inter-cyrillic-600-normal */
    @font-face {
  font-family: 'Inter';
  font-style: normal;
  font-display: swap;
  font-weight: 600;
  src: url(/notebooks/assets/inter-cyrillic-600-normal-CWCymEST.woff2) format('woff2'), url(/notebooks/assets/inter-cyrillic-600-normal-4D_pXhcN.woff) format('woff');
  unicode-range: U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;
}
    /* inter-greek-ext-600-normal */
    @font-face {
  font-family: 'Inter';
  font-style: normal;
  font-display: swap;
  font-weight: 600;
  src: url(/notebooks/assets/inter-greek-ext-600-normal-DRtmH8MT.woff2) format('woff2'), url(/notebooks/assets/inter-greek-ext-600-normal-B8X0CLgF.woff) format('woff');
  unicode-range: U+1F00-1FFF;
}
    /* inter-greek-600-normal */
    @font-face {
  font-family: 'Inter';
  font-style: normal;
  font-display: swap;
  font-weight: 600;
  src: url(/notebooks/assets/inter-greek-600-normal-plRanbMR.woff2) format('woff2'), url(/notebooks/assets/inter-greek-600-normal-BZpKdvQh.woff) format('woff');
  unicode-range: U+0370-0377,U+037A-037F,U+0384-038A,U+038C,U+038E-03A1,U+03A3-03FF;
}
    /* inter-vietnamese-600-normal */
    @font-face {
  font-family: 'Inter';
  font-style: normal;
  font-display: swap;
  font-weight: 600;
  src: url(/notebooks/assets/inter-vietnamese-600-normal-Cc8MFFhd.woff2) format('woff2'), url(/notebooks/assets/inter-vietnamese-600-normal-BuLX-rYi.woff) format('woff');
  unicode-range: U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;
}
    /* inter-latin-ext-600-normal */
    @font-face {
  font-family: 'Inter';
  font-style: normal;
  font-display: swap;
  font-weight: 600;
  src: url(/notebooks/assets/inter-latin-ext-600-normal-D2bJ5OIk.woff2) format('woff2'), url(/notebooks/assets/inter-latin-ext-600-normal-CIVaiw4L.woff) format('woff');
  unicode-range: U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF;
}
    /* inter-latin-600-normal */
    @font-face {
  font-family: 'Inter';
  font-style: normal;
  font-display: swap;
  font-weight: 600;
  src: url(/notebooks/assets/inter-latin-600-normal-LgqL8muc.woff2) format('woff2'), url(/notebooks/assets/inter-latin-600-normal-CiBQ2DWP.woff) format('woff');
  unicode-range: U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;
}
    /* inter-cyrillic-ext-700-normal */
    @font-face {
  font-family: 'Inter';
  font-style: normal;
  font-display: swap;
  font-weight: 700;
  src: url(/notebooks/assets/inter-cyrillic-ext-700-normal-BjwYoWNd.woff2) format('woff2'), url(/notebooks/assets/inter-cyrillic-ext-700-normal-LO58E6JB.woff) format('woff');
  unicode-range: U+0460-052F,U+1C80-1C8A,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;
}
    /* inter-cyrillic-700-normal */
    @font-face {
  font-family: 'Inter';
  font-style: normal;
  font-display: swap;
  font-weight: 700;
  src: url(/notebooks/assets/inter-cyrillic-700-normal-CjBOestx.woff2) format('woff2'), url(/notebooks/assets/inter-cyrillic-700-normal-DrXBdSj3.woff) format('woff');
  unicode-range: U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;
}
    /* inter-greek-ext-700-normal */
    @font-face {
  font-family: 'Inter';
  font-style: normal;
  font-display: swap;
  font-weight: 700;
  src: url(/notebooks/assets/inter-greek-ext-700-normal-qfdV9bQt.woff2) format('woff2'), url(/notebooks/assets/inter-greek-ext-700-normal-BoQ6DsYi.woff) format('woff');
  unicode-range: U+1F00-1FFF;
}
    /* inter-greek-700-normal */
    @font-face {
  font-family: 'Inter';
  font-style: normal;
  font-display: swap;
  font-weight: 700;
  src: url(/notebooks/assets/inter-greek-700-normal-C3JjAnD8.woff2) format('woff2'), url(/notebooks/assets/inter-greek-700-normal-BUv2fZ6O.woff) format('woff');
  unicode-range: U+0370-0377,U+037A-037F,U+0384-038A,U+038C,U+038E-03A1,U+03A3-03FF;
}
    /* inter-vietnamese-700-normal */
    @font-face {
  font-family: 'Inter';
  font-style: normal;
  font-display: swap;
  font-weight: 700;
  src: url(/notebooks/assets/inter-vietnamese-700-normal-DlLaEgI2.woff2) format('woff2'), url(/notebooks/assets/inter-vietnamese-700-normal-BZaoP0fm.woff) format('woff');
  unicode-range: U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;
}
    /* inter-latin-ext-700-normal */
    @font-face {
  font-family: 'Inter';
  font-style: normal;
  font-display: swap;
  font-weight: 700;
  src: url(/notebooks/assets/inter-latin-ext-700-normal-Ca8adRJv.woff2) format('woff2'), url(/notebooks/assets/inter-latin-ext-700-normal-TidjK2hL.woff) format('woff');
  unicode-range: U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF;
}
    /* inter-latin-700-normal */
    @font-face {
  font-family: 'Inter';
  font-style: normal;
  font-display: swap;
  font-weight: 700;
  src: url(/notebooks/assets/inter-latin-700-normal-Yt3aPRUw.woff2) format('woff2'), url(/notebooks/assets/inter-latin-700-normal-BLAVimhd.woff) format('woff');
  unicode-range: U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;
}
    /* inter-cyrillic-ext-400-italic */
    @font-face {
  font-family: 'Inter';
  font-style: italic;
  font-display: swap;
  font-weight: 400;
  src: url(/notebooks/assets/inter-cyrillic-ext-400-italic-CsfrDhJx.woff2) format('woff2'), url(/notebooks/assets/inter-cyrillic-ext-400-italic-xTUDxVF8.woff) format('woff');
  unicode-range: U+0460-052F,U+1C80-1C8A,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;
}
    /* inter-cyrillic-400-italic */
    @font-face {
  font-family: 'Inter';
  font-style: italic;
  font-display: swap;
  font-weight: 400;
  src: url(/notebooks/assets/inter-cyrillic-400-italic-CIUtULAL.woff2) format('woff2'), url(/notebooks/assets/inter-cyrillic-400-italic-DsJ3McxZ.woff) format('woff');
  unicode-range: U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;
}
    /* inter-greek-ext-400-italic */
    @font-face {
  font-family: 'Inter';
  font-style: italic;
  font-display: swap;
  font-weight: 400;
  src: url(/notebooks/assets/inter-greek-ext-400-italic-DgljI1UR.woff2) format('woff2'), url(/notebooks/assets/inter-greek-ext-400-italic-ByZcx49q.woff) format('woff');
  unicode-range: U+1F00-1FFF;
}
    /* inter-greek-400-italic */
    @font-face {
  font-family: 'Inter';
  font-style: italic;
  font-display: swap;
  font-weight: 400;
  src: url(/notebooks/assets/inter-greek-400-italic-SVIaMW7s.woff2) format('woff2'), url(/notebooks/assets/inter-greek-400-italic-C1OpWafJ.woff) format('woff');
  unicode-range: U+0370-0377,U+037A-037F,U+0384-038A,U+038C,U+038E-03A1,U+03A3-03FF;
}
    /* inter-vietnamese-400-italic */
    @font-face {
  font-family: 'Inter';
  font-style: italic;
  font-display: swap;
  font-weight: 400;
  src: url(/notebooks/assets/inter-vietnamese-400-italic-Ceaj4WUo.woff2) format('woff2'), url(/notebooks/assets/inter-vietnamese-400-italic-E-DnQMHp.woff) format('woff');
  unicode-range: U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;
}
    /* inter-latin-ext-400-italic */
    @font-face {
  font-family: 'Inter';
  font-style: italic;
  font-display: swap;
  font-weight: 400;
  src: url(/notebooks/assets/inter-latin-ext-400-italic-CGFCRmTM.woff2) format('woff2'), url(/notebooks/assets/inter-latin-ext-400-italic-DpQ6ZOoA.woff) format('woff');
  unicode-range: U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF;
}
    /* inter-latin-400-italic */
    @font-face {
  font-family: 'Inter';
  font-style: italic;
  font-display: swap;
  font-weight: 400;
  src: url(/notebooks/assets/inter-latin-400-italic-D1l0FflY.woff2) format('woff2'), url(/notebooks/assets/inter-latin-400-italic-BmFrN47l.woff) format('woff');
  unicode-range: U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;
}
    /* inter-cyrillic-ext-500-italic */
    @font-face {
  font-family: 'Inter';
  font-style: italic;
  font-display: swap;
  font-weight: 500;
  src: url(/notebooks/assets/inter-cyrillic-ext-500-italic-Bd19rs0I.woff2) format('woff2'), url(/notebooks/assets/inter-cyrillic-ext-500-italic-CjoSAfs0.woff) format('woff');
  unicode-range: U+0460-052F,U+1C80-1C8A,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;
}
    /* inter-cyrillic-500-italic */
    @font-face {
  font-family: 'Inter';
  font-style: italic;
  font-display: swap;
  font-weight: 500;
  src: url(/notebooks/assets/inter-cyrillic-500-italic-vob3PPp4.woff2) format('woff2'), url(/notebooks/assets/inter-cyrillic-500-italic-YH_3ZzEh.woff) format('woff');
  unicode-range: U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;
}
    /* inter-greek-ext-500-italic */
    @font-face {
  font-family: 'Inter';
  font-style: italic;
  font-display: swap;
  font-weight: 500;
  src: url(/notebooks/assets/inter-greek-ext-500-italic-CkCtILP9.woff2) format('woff2'), url(/notebooks/assets/inter-greek-ext-500-italic-BrEhXof8.woff) format('woff');
  unicode-range: U+1F00-1FFF;
}
    /* inter-greek-500-italic */
    @font-face {
  font-family: 'Inter';
  font-style: italic;
  font-display: swap;
  font-weight: 500;
  src: url(/notebooks/assets/inter-greek-500-italic-CpNnphWM.woff2) format('woff2'), url(/notebooks/assets/inter-greek-500-italic-DoOKiI6j.woff) format('woff');
  unicode-range: U+0370-0377,U+037A-037F,U+0384-038A,U+038C,U+038E-03A1,U+03A3-03FF;
}
    /* inter-vietnamese-500-italic */
    @font-face {
  font-family: 'Inter';
  font-style: italic;
  font-display: swap;
  font-weight: 500;
  src: url(/notebooks/assets/inter-vietnamese-500-italic-Ci6hLotD.woff2) format('woff2'), url(/notebooks/assets/inter-vietnamese-500-italic-BDm3lIJY.woff) format('woff');
  unicode-range: U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;
}
    /* inter-latin-ext-500-italic */
    @font-face {
  font-family: 'Inter';
  font-style: italic;
  font-display: swap;
  font-weight: 500;
  src: url(/notebooks/assets/inter-latin-ext-500-italic-6uvZyJeQ.woff2) format('woff2'), url(/notebooks/assets/inter-latin-ext-500-italic-O82l3e5v.woff) format('woff');
  unicode-range: U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF;
}
    /* inter-latin-500-italic */
    @font-face {
  font-family: 'Inter';
  font-style: italic;
  font-display: swap;
  font-weight: 500;
  src: url(/notebooks/assets/inter-latin-500-italic-CmxAJXy_.woff2) format('woff2'), url(/notebooks/assets/inter-latin-500-italic-BaBk7Nya.woff) format('woff');
  unicode-range: U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;
}
    /* inter-cyrillic-ext-600-italic */
    @font-face {
  font-family: 'Inter';
  font-style: italic;
  font-display: swap;
  font-weight: 600;
  src: url(/notebooks/assets/inter-cyrillic-ext-600-italic-La-to8Sa.woff2) format('woff2'), url(/notebooks/assets/inter-cyrillic-ext-600-italic-B1EMsN4Z.woff) format('woff');
  unicode-range: U+0460-052F,U+1C80-1C8A,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;
}
    /* inter-cyrillic-600-italic */
    @font-face {
  font-family: 'Inter';
  font-style: italic;
  font-display: swap;
  font-weight: 600;
  src: url(/notebooks/assets/inter-cyrillic-600-italic-BMNGqOVE.woff2) format('woff2'), url(/notebooks/assets/inter-cyrillic-600-italic-BS21fWqq.woff) format('woff');
  unicode-range: U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;
}
    /* inter-greek-ext-600-italic */
    @font-face {
  font-family: 'Inter';
  font-style: italic;
  font-display: swap;
  font-weight: 600;
  src: url(/notebooks/assets/inter-greek-ext-600-italic-BxS-O1qG.woff2) format('woff2'), url(/notebooks/assets/inter-greek-ext-600-italic-DCFZv-xn.woff) format('woff');
  unicode-range: U+1F00-1FFF;
}
    /* inter-greek-600-italic */
    @font-face {
  font-family: 'Inter';
  font-style: italic;
  font-display: swap;
  font-weight: 600;
  src: url(/notebooks/assets/inter-greek-600-italic-MPI_Frmw.woff2) format('woff2'), url(/notebooks/assets/inter-greek-600-italic-4pupcZ4S.woff) format('woff');
  unicode-range: U+0370-0377,U+037A-037F,U+0384-038A,U+038C,U+038E-03A1,U+03A3-03FF;
}
    /* inter-vietnamese-600-italic */
    @font-face {
  font-family: 'Inter';
  font-style: italic;
  font-display: swap;
  font-weight: 600;
  src: url(/notebooks/assets/inter-vietnamese-600-italic-BuG6-S9s.woff2) format('woff2'), url(/notebooks/assets/inter-vietnamese-600-italic-CKjJHBAp.woff) format('woff');
  unicode-range: U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;
}
    /* inter-latin-ext-600-italic */
    @font-face {
  font-family: 'Inter';
  font-style: italic;
  font-display: swap;
  font-weight: 600;
  src: url(/notebooks/assets/inter-latin-ext-600-italic-4pxPPAsx.woff2) format('woff2'), url(/notebooks/assets/inter-latin-ext-600-italic-DgI6rDWk.woff) format('woff');
  unicode-range: U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF;
}
    /* inter-latin-600-italic */
    @font-face {
  font-family: 'Inter';
  font-style: italic;
  font-display: swap;
  font-weight: 600;
  src: url(/notebooks/assets/inter-latin-600-italic-BJYrns_i.woff2) format('woff2'), url(/notebooks/assets/inter-latin-600-italic-CIYS91tl.woff) format('woff');
  unicode-range: U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;
}
    /* inter-cyrillic-ext-700-italic */
    @font-face {
  font-family: 'Inter';
  font-style: italic;
  font-display: swap;
  font-weight: 700;
  src: url(/notebooks/assets/inter-cyrillic-ext-700-italic-GPRkb3xU.woff2) format('woff2'), url(/notebooks/assets/inter-cyrillic-ext-700-italic-D3fKamtN.woff) format('woff');
  unicode-range: U+0460-052F,U+1C80-1C8A,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;
}
    /* inter-cyrillic-700-italic */
    @font-face {
  font-family: 'Inter';
  font-style: italic;
  font-display: swap;
  font-weight: 700;
  src: url(/notebooks/assets/inter-cyrillic-700-italic-Ppu1tTPz.woff2) format('woff2'), url(/notebooks/assets/inter-cyrillic-700-italic-CZrx1Xve.woff) format('woff');
  unicode-range: U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;
}
    /* inter-greek-ext-700-italic */
    @font-face {
  font-family: 'Inter';
  font-style: italic;
  font-display: swap;
  font-weight: 700;
  src: url(/notebooks/assets/inter-greek-ext-700-italic-5m0CTrl1.woff2) format('woff2'), url(/notebooks/assets/inter-greek-ext-700-italic-CO97m7Jb.woff) format('woff');
  unicode-range: U+1F00-1FFF;
}
    /* inter-greek-700-italic */
    @font-face {
  font-family: 'Inter';
  font-style: italic;
  font-display: swap;
  font-weight: 700;
  src: url(/notebooks/assets/inter-greek-700-italic-D5vwbaZX.woff2) format('woff2'), url(/notebooks/assets/inter-greek-700-italic-bD6OVWQz.woff) format('woff');
  unicode-range: U+0370-0377,U+037A-037F,U+0384-038A,U+038C,U+038E-03A1,U+03A3-03FF;
}
    /* inter-vietnamese-700-italic */
    @font-face {
  font-family: 'Inter';
  font-style: italic;
  font-display: swap;
  font-weight: 700;
  src: url(/notebooks/assets/inter-vietnamese-700-italic-BbJv01XC.woff2) format('woff2'), url(/notebooks/assets/inter-vietnamese-700-italic-BF_6wm_E.woff) format('woff');
  unicode-range: U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;
}
    /* inter-latin-ext-700-italic */
    @font-face {
  font-family: 'Inter';
  font-style: italic;
  font-display: swap;
  font-weight: 700;
  src: url(/notebooks/assets/inter-latin-ext-700-italic-DtYkv-XI.woff2) format('woff2'), url(/notebooks/assets/inter-latin-ext-700-italic-sscBbOod.woff) format('woff');
  unicode-range: U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF;
}
    /* inter-latin-700-italic */
    @font-face {
  font-family: 'Inter';
  font-style: italic;
  font-display: swap;
  font-weight: 700;
  src: url(/notebooks/assets/inter-latin-700-italic-BsEzapPQ.woff2) format('woff2'), url(/notebooks/assets/inter-latin-700-italic-QsoQop6F.woff) format('woff');
  unicode-range: U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;
}
    :root {
  --rrtheme-color: #ca4747;
}
    html,
body {
  display: flex;
  margin: 0;
  padding: 0;
  overflow-x: hidden;
  min-height: 100vh;
  flex-direction: column;
}
    html {
  background-color: var(--rrtheme-color);
}
    body {
  max-width: 100%;
}
    .container {
  padding: 50px 20px;
  flex: 1;
  background-color: var(--theme-background);
}
    nav {
  padding: 2px;
  display: block;
  background: var(--rrtheme-color);
  font-family: "Open Sans", sans-serif;
  font-size: 16px;
  -webkit-font-smoothing: auto;
}
    nav .menu__item {
  padding: 5px 8px;
  font-size: 0.9em;
  text-shadow: 0 0 1px #000;
}
    nav .menu__item[href] {
  color: white;
}
    a[href] {
  color: var(--rrtheme-color);
  text-decoration: none;
}
    main {
  max-width: var(--max-width);
  margin: auto;
  width: 100%;
  padding-bottom: 100px;
}
    main h1,
main h2,
main h3,
main h4,
main h5,
main h6 {
  font-family: "Open Sans", sans-serif;
  -webkit-font-smoothing: auto;
}
    main summary {
  cursor: pointer;
}
    main details {
  margin: 1.5em 0;
}
    main details[open] {
  border-left: 3px solid #ccc;
  padding-left: 1em;
}
    main details[open] > summary {
  margin-left: -1em;
  padding-left: 1em;
  border-left: 3px solid transparent;
  margin-bottom: 0.5em;
}
    main figure {
  width: fit-content;
  margin: 4em auto;
  max-width: 100%;
}
    main figure img {
  display: block;
}
    main figure figcaption {
  width: 0;
  min-width: 100%;
}
    main figure.fluid {
  width: auto;
}
    main figure.fluid figcaption {
  width: auto;
  min-width: 0;
}
    hr {
  margin: 3em 0;
}
    header {
  color: white;
  font-weight: 200;
  width: 100%;
  margin: 0 auto;
  background-color: var(--rrtheme-color);
  text-align: center;
  padding: 80px 20px;
  position: relative;
  font-family: "Open Sans", sans-serif;
  -webkit-font-smoothing: auto;
  box-sizing: border-box;
}
    header h1 {
  max-width: 640px;
  margin-left: auto;
  margin-right: auto;
}
    header .author,
header time {
  color: inherit;
  font-family: inherit;
  font-style: normal;
  font-weight: inherit;
}
    header h1,
header p,
header a[href] {
  color: white;
}
    header .byline {
  margin-top: 20px;
  margin-bottom: 20px;
}
    header h1 {
  font-size: 34px;
  font-weight: 200;
}
    @media (max-width: 640px) {
  header {
    text-align: left;
  }
}
    main h1,
main h2,
main h3,
main h4,
main h5,
main h6 {
  font-weight: 400;
  margin-bottom: 1em;
}
    main h2 {
  margin-top: 3em;
}
    main h3 {
  margin-top: 2em;
}
    main figcaption {
  margin-top: 1em;
}
    main .katex-display {
  overflow-x: scroll;
  padding-top: 8px;
  padding-bottom: 8px;
}
    .comments_meta {
  display: flex;
  flex-direction: row;
  justify-content: space-between;
}
    .comments {
  padding: 30px 20px 0;
  font-family: var(--sans-serif);
}
    .comments_count {
  font-weight: 700;
}
    .comments_loading {
  display: flex;
  flex-direction: column;
  align-items: center;
  margin-bottom: 10px;
  color: var(--theme-foreground-muted);
}
    .comments .spinner {
  margin-bottom: 5px;
}
    .comment[href] {
  display: flex;
  flex-direction: column;
  border: 1px solid var(--theme-foreground-faintest);
  border-radius: 5px;
  margin: 15px 0;
  padding: 15px;
  color: var(--theme-foreground);
  text-decoration: none;
}
    .comment[href]:visited {
  color: var(--theme-foreground);
}
    .comment[href]:hover {
  border-color: var(--theme-foreground-muted);
  text-decoration: none;
}
    .comment[href]:last-child {
  margin-bottom: 0;
}
    .comment_meta {
  display: flex;
  flex-direction: row;
  align-items: flex-start;
  justify-content: space-between;
  gap: 10px;
  font-size: 13px;
}
    .comment_ago {
  color: var(--theme-foreground-muted);
}
    .comment_ago:visited {
  color: var(--theme-foreground-muted);
}
    .comment_user {
  display: flex;
  flex-direction: row;
  align-items: center;
  justify-content: flex-start;
  color: var(--theme-foreground);
  text-decoration: none;
  font-family: var(--sans-serif);
  font-weight: 700;
}
    .comment_user:visited {
  color: var(--theme-foreground);
}
    .comment_commenter {
  font-weight: 400;
  color: var(--theme-foreground-muted);
}
    .comment_content p:first-child {
  margin-top: 10px;
}
    .comment_content p:last-child {
  margin-bottom: 0;
}
    .comment_user img {
  margin-right: 10px;
  border-radius: 2px;
  border: 1px solid var(--theme-foreground-faintest);
  width: 30px;
  height: 30px;
}
    .threebody{width:60px;height:60px;position:relative}
    .threebody-o{position:absolute;top:50%;left:50%}
    .threebody-o>div{position:absolute;animation:3s infinite linear}
    .threebody-o>div:after{content:'';position:absolute;width:12px;height:12px;border-radius:100%;transform:translate(-50%,-50%);background:inherit}
    .threebody-o>div:nth-child(1){background:#a0d323;animation-name:threebody-0}
    .threebody-o>div:nth-child(2){background:#23a0d3;animation-name:threebody-1}
    .threebody-o>div:nth-child(3){background:#d323a0;animation-name:threebody-2}
    @keyframes threebody-0{from{transform:rotate(0)translatex(0.01px)rotate(0)translatex(0.01px)rotate(0)translatex(0.03px)rotate(0)translatex(0.07px)rotate(0)translatex(0.16px)rotate(0)translatex(0.41px)rotate(0)translatex(1.3px)rotate(0)translatex(8px)rotate(0)translatex(-17px)rotate(0)translatex(0.21px)rotate(0)translatex(0.01px)}to{transform:rotate(-31turn)translatex(0.01px)rotate(4turn)translatex(0.01px)rotate(4turn)translatex(0.03px)rotate(4turn)translatex(0.07px)rotate(4turn)translatex(0.16px)rotate(4turn)translatex(0.41px)rotate(4turn)translatex(1.3px)rotate(4turn)translatex(8px)rotate(4turn)translatex(-17px)rotate(4turn)translatex(0.21px)rotate(8turn)translatex(0.01px)}}
    @keyframes threebody-1{from{transform:rotate(0)translatex(-0.01px)rotate(0)translatex(0.01px)rotate(0)translatex(-0.03px)rotate(0)translatex(0.07px)rotate(0)translatex(-0.16px)rotate(0)translatex(0.41px)rotate(0)translatex(-1.3px)rotate(0)translatex(8px)rotate(0)translatex(17px)rotate(0)translatex(0.21px)rotate(0)translatex(0.01px)}to{transform:rotate(-31turn)translatex(-0.01px)rotate(4turn)translatex(0.01px)rotate(4turn)translatex(-0.03px)rotate(4turn)translatex(0.07px)rotate(4turn)translatex(-0.16px)rotate(4turn)translatex(0.41px)rotate(4turn)translatex(-1.3px)rotate(4turn)translatex(8px)rotate(4turn)translatex(17px)rotate(4turn)translatex(0.21px)rotate(8turn)translatex(0.01px)}}
    @keyframes threebody-2{from{transform:rotate(0)translatex(-0.01px)rotate(0)translatex(-0.03px)rotate(0)translatex(-0.13px)rotate(0)translatex(-0.81px)rotate(0)translatex(-16px)rotate(0)translatex(-0.42px)rotate(0)translatex(-0.02px)}to{transform:rotate(-35turn)translatex(-0.01px)rotate(8turn)translatex(-0.03px)rotate(8turn)translatex(-0.13px)rotate(8turn)translatex(-0.81px)rotate(8turn)translatex(-16px)rotate(8turn)translatex(-0.42px)rotate(8turn)translatex(-0.02px)}}
    footer {
  background: var(--rrtheme-color);
  color: white;
  font-family: "Open Sans", sans-serif;
  padding: 30px 20px;
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 20px;
}
    .footer__attrib {
}
    .footer__rss[href],
.footer__rss[href]:visited {
  color: white;
  display: flex;
  align-items: center;
  gap: 4px;
}
    .footer__rss:hover {
  opacity: 0.8;
}
    .footer__rss .icon {
  width: 14px;
  height: 14px;
}
    .index {
  padding: 0;
  margin: 0 auto;
  max-width: 1200px;
  list-style-type: none;
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
  gap: 24px;
}
    .index__item {
  margin: 0;
  border-radius: 8px;
  overflow: hidden;
  background: #f8f8f8;
  border: 1px solid rgba(0, 0, 0, 0.06);
  transition: transform 0.15s ease, box-shadow 0.15s ease;
  cursor: pointer;
}
    .index__item:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}
    .index__link {
  display: block;
  text-decoration: none;
  color: inherit;
}
    .index__image-container {
  aspect-ratio: 1200 / 630;
  overflow: hidden;
  background: linear-gradient(135deg, #e8e8e8 0%, #d8d8d8 100%);
}
    .index__image {
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: block;
}
    .index__placeholder {
  width: 100%;
  height: 100%;
  background: linear-gradient(135deg, #eee 0%, #ddd 50%, #ccc 100%);
  position: relative;
}
    .index__placeholder::after {
  content: '';
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 48px;
  height: 48px;
  border: 3px solid #bbb;
  border-radius: 50%;
  opacity: 0.5;
}
    .index__content {
  padding: 16px;
}
    .index__title {
  font-family: "Open Sans", sans-serif;
  font-weight: 400;
  font-size: 15px;
  line-height: 1.4;
  margin: 0 0 6px 0;
  color: #333;
}
    .index__title-link {
  color: inherit;
  text-decoration: none;
}
    .index__item:hover .index__title-link {
  color: var(--rrtheme-color);
  text-decoration: underline;
}
    .index__meta {
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  gap: 6px;
}
    .index__date {
  font-family: "Open Sans", sans-serif;
  font-size: 12px;
  color: #888;
  text-transform: uppercase;
}
    .index__tags {
  display: flex;
  flex-wrap: wrap;
  gap: 4px;
}
    .index__tag {
  font-family: "Open Sans", sans-serif;
  font-size: 10px;
  font-weight: 600;
  color: #666;
  background: #e8e8e8;
  padding: 2px 6px;
  border-radius: 3px;
  text-transform: uppercase;
  letter-spacing: 0.02em;
  text-decoration: none;
  cursor: pointer;
  transition: background-color 0.15s ease, color 0.15s ease;
}
    .index__tag:hover {
  background: #d0d0d0;
  color: #444;
}
    a.index__tag,
a.index__tag:visited,
a.index__tag:active {
  color: #666;
}
    .index__active-filter {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 10px 14px;
  background: #f5f5f5;
  border: 1px solid rgba(0, 0, 0, 0.08);
  border-radius: 6px;
}
    .index__filter-label {
  font-family: "Open Sans", sans-serif;
  font-size: 13px;
  color: #666;
}
    .index__filter-tag {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  font-family: "Open Sans", sans-serif;
  font-size: 12px;
  font-weight: 600;
  color: #fff;
  background: #555;
  padding: 4px 8px;
  border-radius: 4px;
  text-transform: uppercase;
  letter-spacing: 0.02em;
}
    .index__filter-remove,
.index__filter-remove:visited,
.index__filter-remove:active {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 16px;
  height: 16px;
  font-size: 16px;
  line-height: 1;
  color: #fff;
  text-decoration: none;
  opacity: 0.7;
  transition: opacity 0.15s ease;
}
    .index__filter-remove:hover {
  color: #fff;
  opacity: 1;
}
    .resource-links {
  display: flex;
  gap: 1rem;
  justify-content: center;
}
    .resource-link {
  vertical-align: middle;
}
    .resource-link .icon {
  position: relative;
  top: 2px;
  width: 15px;
}
    /* Index controls (filter + view toggle) */
    .index-controls {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 16px;
  max-width: 1200px;
  margin-left: auto;
  margin-right: auto;
}
    .index-view-toggle {
  display: flex;
  gap: 4px;
}
    .index-view-btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: 6px 8px;
  border: 1px solid #ddd;
  background: #fff;
  cursor: pointer;
  color: #999;
  border-radius: 4px;
  transition: all 0.15s ease;
}
    .index-view-btn svg {
  display: block;
}
    .index-view-btn:hover {
  border-color: #ccc;
  color: #666;
}
    .index-view-btn.active {
  background: #f0f0f0;
  border-color: #ccc;
  color: #333;
}
    /* Description (hidden in grid, shown in list) */
    .index__description {
  display: none;
  font-size: 14px;
  line-height: 1.5;
  color: #666;
  margin: 8px 0 0 0;
}
    /* List view */
    .index--list {
  display: flex;
  flex-direction: column;
  gap: 16px;
  max-width: 800px;
}
    .index--list .index__item {
  display: flex;
  flex-direction: row;
  align-items: stretch;
  border-radius: 6px;
  border: 1px solid rgba(0, 0, 0, 0.05);
}
    .index--list .index__image-container {
  flex-shrink: 0;
  width: 180px;
}
    .index--list .index__content {
  flex: 1;
  padding: 12px 16px;
}
    .index--list .index__title {
  font-size: 17px;
  margin-bottom: 4px;
}
    .index--list .index__description {
  display: block;
}
    @media(max-width: 640px) {
  .index {
    grid-template-columns: 1fr;
    gap: 16px;
  }
  /* Hide view toggle on narrow screens - always show grid */
  .index-view-toggle {
    display: none;
  }
  /* Force grid view styles even if index--list class is present */
  .index--list {
    display: grid;
    grid-template-columns: 1fr;
    gap: 16px;
    max-width: none;
  }
  .index--list .index__item {
    display: block;
    flex-direction: unset;
    align-items: unset;
    border-radius: 8px;
    border: 1px solid rgba(0, 0, 0, 0.06);
  }
  .index--list .index__image-container {
    width: 100%;
    flex-shrink: unset;
  }
  .index--list .index__content {
    flex: unset;
    padding: 16px;
  }
  .index--list .index__title {
    font-size: 15px;
    margin: 0 0 6px 0;
  }
  .index--list .index__description {
    display: none;
  }
  .resource-links {
    justify-content: flex-start;
  }
}
    /* Expandable component styles */
    .expandable-container {
  position: relative;
  width: 100%;
}
    .expandable-content {
  position: relative;
  display: inline-block;
  z-index: 1;
}
    .expandable-content.expanded {
  background: var(--theme-background);
}
    .expandable-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.5);
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.2s ease;
  z-index: 9998;
}
    .expandable-toggle {
  position: absolute;
  width: 28px;
  height: 28px;
  border: none;
  border-radius: 4px;
  background: rgba(255, 255, 255, 0.9);
  color: var(--theme-foreground-muted, #666);
  font-size: 16px;
  cursor: pointer;
  z-index: 1000;
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.6);
  transition: background 0.2s ease, box-shadow 0.2s ease;
}
    .expandable-toggle:hover {
  background: rgba(255, 255, 255, 1);
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.3);
}
    /* Floating controls panel */
    .expandable-controls-panel {
  position: fixed;
  z-index: 10000;
  background: var(--theme-background);
  border-radius: 8px;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
  overflow: hidden;
  max-width: min(360px, calc(100vw - 32px));
  max-height: calc(100vh - 100px);
}
    .expandable-controls-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 5px 10px;
  background: var(--theme-background-alt, #f5f5f5);
  border-bottom: 1px solid var(--theme-foreground-faintest, #e0e0e0);
  cursor: move;
  user-select: none;
  font-family: system-ui, -apple-system, sans-serif;
  font-size: 12px;
  font-weight: 500;
  color: var(--theme-foreground-muted, #555);
}
    .expandable-controls-toggle {
  border: none;
  background: none;
  cursor: pointer;
  font-size: 12px;
  color: var(--theme-foreground-muted, #666);
  padding: 4px 8px;
  border-radius: 4px;
  transition: background 0.15s ease;
}
    .expandable-controls-toggle:hover {
  background: var(--theme-foreground-faintest, rgba(0, 0, 0, 0.1));
}
    .expandable-controls-content {
  padding: 12px;
  overflow-y: auto;
  max-height: calc(100vh - 200px);
  display: flex;
  flex-direction: column;
  gap: 4px;
}
    .expandable-controls-content details {
  margin: 4px 0;
}
    /* SDSS controls styling */
    .sdss-controls {
  max-width: 100%;
}
    .sdss-controls > div[id^="scope-"] {
  width: min(100%, 500px) !important;
}
    .sdss-controls .range {
  display: flex;
  align-items: center;
  gap: 8px;
}
    .sdss-controls .range-slider {
  flex: 1 1 auto;
}
    .sdss-controls .range-output {
  flex: 0 0 auto;
  min-width: 75px;
  text-align: right;
  font-variant-numeric: tabular-nums;
}
  </style>
  <style> main { max-width: 640px; }</style>
<meta name="generator" content="Observable Notebook Kit v1.5.0"><title>Adaptive Contouring in Fragment Shaders</title>  <script type="module" crossorigin src="/notebooks/assets/index-CeAzplyV.js"></script>
  <link rel="modulepreload" crossorigin href="/notebooks/assets/index-ByB2dbry.js">
</head>
<body>
  <nav class="menu">
    <a class="menu__item" href="/">rreusser.github.io</a>
    <a class="menu__item" href="/notebooks/">notebooks</a>
    <a class="menu__item" href="/sketches/">sketches</a>
    <a class="menu__item" href="/projects/">projects</a>
    <a class="menu__item" href="/trains-and-trails/">running</a>
  </nav>
  <header>
    <h1>Adaptive Contouring in Fragment Shaders</h1>
    <div class="byline">
      <address class="author"><a rel="author" href="https://rreusser.github.io">Ricky Reusser</a></address>
      <time pubdate="" datetime="20201121">November 21, 2020</time>
    </div>
    <div class="resource-links">
        <a href="https://observablehq.com/@rreusser/locally-scaled-domain-coloring-part-1-contour-plots" class="resource-link">
          <svg class="icon" viewBox="0 0 24 24" fill="currentColor">
            <circle cx="12" cy="12" r="10" fill="white"></circle>
            <path d="M9 7 l 8 5 -8 5 V10z" fill="#c44"></path>
          </svg>
          Live notebook
        </a>
        <a href="https://github.com/rreusser/notebooks/tree/main/src/adaptive-contouring-in-fragment-shaders/index.html" class="resource-link">
          <svg class="icon" viewBox="0 0 24 24" fill="currentColor">
            <path d="M12 .5C5.65.5.5 5.65.5 12a11.5 11.5 0 0 0 7.84 10.93c.57.11.78-.25.78-.56v-2.1c-3.19.7-3.86-1.54-3.86-1.54-.52-1.34-1.26-1.7-1.26-1.7-1.03-.7.08-.69.08-.69 1.14.08 1.74 1.17 1.74 1.17 1.02 1.75 2.67 1.24 3.32.95.1-.74.4-1.24.72-1.53-2.55-.29-5.23-1.28-5.23-5.72 0-1.26.45-2.29 1.17-3.09-.12-.29-.51-1.46.11-3.05 0 0 .96-.31 3.14 1.18a10.92 10.92 0 0 1 2.86-.38c.97 0 1.94.13 2.86.38 2.18-1.49 3.14-1.18 3.14-1.18.62 1.59.23 2.76.11 3.05.73.8 1.17 1.83 1.17 3.09 0 4.45-2.68 5.43-5.23 5.72.41.35.78 1.05.78 2.12v3.14c0 .31.21.67.79.56A11.5 11.5 0 0 0 23.5 12C23.5 5.65 18.35.5 12 .5Z"></path>
          </svg>
          View source
        </a>
    </div>
  </header>
  <div class="container">

    <main><div id="cell-3615" class="observablehq observablehq--cell"><div><p>This notebook walks through a strategy for adaptive contouring in a fragment shader, with particular application to domain coloring. <a href="https://en.wikipedia.org/wiki/Domain_coloring">Domain coloring</a> is a simple and well-explored technique for visualizing functions in the complex plane using contours for magnitude and color for phase</p>
</div></div><div id="cell-3616" class="observablehq observablehq--cell"><div><p>This notebook walks through a strategy for adaptive contouring in a fragment shader, with particular application to domain coloring. <a href="https://en.wikipedia.org/wiki/Domain_coloring">Domain coloring</a> is a simple and well-explored technique for visualizing functions in the complex plane using contours for magnitude and color for phase.</p>
</div></div><div id="cell-2815" class="observablehq observablehq--cell"><div><p>Over the past few years and with particular help and inspiration from <a href="https://observablehq.com/@jrus">Jacob Rus</a>, Ive slowly iterated on my approach to domain coloring. A couple of the core ideas have proved so useful and generally applicable that Ive wanted to write them up carefully and clearly for a long time. In this notebook, rather than focusing on the math and interpretation of domain coloring, Im going to focus on some of the core tricks I use for everything from domain coloring to <a href="https://observablehq.com/@rreusser/contour-plots-with-d3-regl-and-observable?collection=@rreusser/webgl">contour plots</a>, <a href="https://github.com/rreusser/glsl-solid-wireframe">wireframe meshes</a>, <a href="https://observablehq.com/@rreusser/faking-transparency-for-3d-surfaces">3D surface visualization</a>, <a href="http://rreusser.github.io/flamms-paraboloid/">gridlines</a>, <a href="http://rreusser.github.io/aligning-3d-scans/">cartoon edges</a>, and <a href="https://www.shadertoy.com/view/wdcfRs">trippy animated gifs</a>.</p>
</div></div><div id="cell-2819" class="observablehq observablehq--cell"></div><div id="cell-3617" class="observablehq observablehq--cell"><div><p>Even without working through the mathematical interpretation, the plot on the lefthand side above has two particularly obnoxious features (apart from the garrish colorscale). The first is that the lines have non-uniform width, and the second is that the contour spacing is also highly non-uniform, ranging from half the plot size in slowly varying regions to infinitely dense near zeros and poles. Most regions, if zoomed in, would appear as nothing but a solid color. <a href="https://www.shadertoy.com/view/WtScDt">This technique from Inigo Quilez</a> is a wonderful way to resolve the aliasing problems which result from dense spacing, but ideally wed like to control the uniformity of information a bit more thoughtfully.</p>
</div></div><div id="cell-3618" class="observablehq observablehq--cell"><div><p>Remedying these problems is subject to one primary constraint: computing plots in a GPU shader is highly performant but means thatshort of more advanced parallelization trickseach pixel needs to be evaluated independently from all others. As a result, our ideal approach uses strictly <em>local</em> information to display lines and select contour spacing.</p>
</div></div><div id="cell-3619" class="observablehq observablehq--cell"><div><p>In this notebook, the first in a couple-part series, well walk through the core techniques by which we can resolve the above challenges. Well use screen-space derivatives to achieve uniform-width features and the graphical equivalent of a <a href="https://en.wikipedia.org/wiki/Shepard_tone">Shepard tone</a> to achieve ideally-spaced contours.</p>
</div></div><div id="cell-3620" class="observablehq observablehq--cell"><div><p>This notebook is presented in the following sections:</p>
</div></div><div id="cell-3621" class="observablehq observablehq--cell"><div><ul>
<li><a href="#contours">Screen-space-scaled raster contours</a>: Using screen-space derivatives to display uniform-width lines</li>
<li><a href="#localSpacing">Local contour spacing</a>: Using the local gradient to select nice contour spacing</li>
<li><a href="#blending">Blending over octaves</a>: Smoothly blending between locally scaled contouring</li>
<li><a href="#shading">Shaded contouring</a>: Repurposing line contour techniques to achieve nicely antialiased shading</li>
</ul>
</div></div><div id="cell-2820" class="observablehq observablehq--cell"><div><p>The contour plots in this notebook are computed and displayed in WebGL via the provided GLSL shaders. And although Ive used the <a href="https://github.com/regl-project/regl">regl</a> library to create them, the techniques should be applicable to any sort of language, whether on the GPU or otherwise. To make understanding easier, Ive tried to keep the plotting very simple at the cost of luxuries like interactions and axes. See the <a href="#defs">Definitions</a> section for implementation.</p>
</div></div><div id="cell-3622" class="observablehq observablehq--cell"><div><h2 id="screen-space-scaled-raster-contours" tabindex="-1"><a href="#screen-space-scaled-raster-contours">Screen-space-scaled raster contours</a></h2>
</div></div><div id="cell-2595" class="observablehq observablehq--cell"><div><p>Vector graphics have many desirable properties, but in this notebook we explore lines as a raster image effect. Particular benefits are that the workload is independent of the complexity of the contours, and that we may avoid computing, storing, updating, and rendering explicit contour line geometry, commonly computed via <a href="https://en.wikipedia.org/wiki/Marching_squares">marching squares</a>.</p>
</div></div><div id="cell-3623" class="observablehq observablehq--cell"><div><p>We start by plotting the log of the magnitude of a complex function using a repeating triangle-wave colormap.</p>
</div></div><div id="cell-3497" class="observablehq observablehq--cell"></div><div id="cell-2288" class="observablehq observablehq--cell"></div><div id="cell-3073" class="observablehq observablehq--cell"><div><p>Adjust the threshold below and observe that although we can draw bands, we cant yet draw uniform-width lines.</p>
</div></div><div id="cell-2598" class="observablehq observablehq--cell"></div><div id="cell-3022" class="observablehq observablehq--cell"></div><div id="cell-3625" class="observablehq observablehq--cell"></div><div id="cell-2601" class="observablehq observablehq--cell"></div><div id="cell-3613" class="observablehq observablehq--cell"><div><p>Applying a threshold to the plot above produces bands, but of course the width is highly non-uniform. To achieve uniform pixel-width lines, we must select just the right threshold at every point.</p>
</div></div><div id="cell-2962" class="observablehq observablehq--cell"><div><p>To select this threshold, we use screen-space derivatives. As the name suggests, screen-space derivatives represent derivatives with respect to pixels on the screen. Computed as the difference between adjacent pixel valuesin the context of GPUs called <em>fragments</em>theyre built into the GPU and are commonly used in <a href="https://en.wikipedia.org/wiki/Mipmap">mipmapping</a> to avoid aliasing by gauging how fast a texture changes from fragment to fragment.</p>
</div></div><div id="cell-2940" class="observablehq observablehq--cell"><figure style="text-align:center">
<img src="" style="max-width:300px;margin:auto">
<figcaption></figcaption>
</figure></div><div id="cell-3596" class="observablehq observablehq--cell"><div><p>GPUs evaluate fragments in  blocks and offer horizontal and vertical differences between fragments as built-in functions. These differences are equivalent to first order <a href="https://en.wikipedia.org/wiki/Finite_difference">finite difference</a> approximations of the derivative with units of <em>units per pixel</em>. Horizontal derivatives within a block are defined as</p>
</div></div><div id="cell-3597" class="observablehq observablehq--cell"><div></div></div><div id="cell-3599" class="observablehq observablehq--cell"><div><p>where  and  are pixel coordinates. Vertical derivatives are defined similarly. The screen-space gradient magnitude is then the sum of the squares of the  and derivatives.</p>
</div></div><div id="cell-3600" class="observablehq observablehq--cell"><div></div></div><div id="cell-3601" class="observablehq observablehq--cell"><div><p>The key insight is dimensional. Division of a function (in <em>units</em>) by its screen-space gradient (in <em>units per pixel</em>) yields a result in <em>pixels</em>.</p>
</div></div><div id="cell-3602" class="observablehq observablehq--cell"><div></div></div><div id="cell-3626" class="observablehq observablehq--cell"><div><p>Another way to think about it: at pixel scale, the function is approximately linear. Near each contour line (where the triangle wave crosses zero), dividing by the local slope normalizes the function so that it increases by exactly one unit per pixel. The result is the signed distance, in pixels, to the nearest contour.</p>
</div></div><div id="cell-3603" class="observablehq observablehq--cell"><div><p>So if we divide the triangle wave by the screen-space gradient magnitude, we get a value that represents, in pixels, how far each point is from the nearest contour. Thresholding this at, say, 1.5 pixels gives us uniform-width antialiased contour lines everywhere on screen.</p>
</div></div><div id="cell-3604" class="observablehq observablehq--cell"><div><p>Numerical derivatives, even though only accurate to the first order, will be adequate for us. We could of course compute derivatives by analytical methods like <a href="https://en.wikipedia.org/wiki/Automatic_differentiation">automatic differentiation</a>, but in practice, for the accuracy required to achieve the effects in this notebook, that proves to be <a href="https://observablehq.com/@rreusser/glsl-complex-auto-differentiation">massive overkill</a>.</p>
</div></div><div id="cell-3605" class="observablehq observablehq--cell"><div><p>Note finally that this doesnt have to be a two-dimensional function. Since all other transforms, whether 2D, 3D, or otherwise happen before screen space differentiation, all of the techniques in this notebook can be used without modification, for example, to draw <a href="https://github.com/rreusser/glsl-solid-wireframe">wireframes or other function contours on 3D models</a>.</p>
</div></div><div id="cell-3606" class="observablehq observablehq--cell"><div><p>As for implementation, WebGL offers the <a href="https://developer.mozilla.org/en-US/docs/Web/API/OES_standard_derivatives"><code>OES_standard_derivatives</code></a> extension with the following functions:</p>
</div></div><div id="cell-3607" class="observablehq observablehq--cell"><div><ul>
<li><code>dFdx(f)</code>: differences between horizontally adjacent values of <code>f</code></li>
<li><code>dFdy(f)</code>: differences between vertically adjacent values of <code>f</code></li>
<li><code>fwidth(f)</code>: sum of absolute values, <code>abs(dFdx(f)) + abs(dFdy(f))</code></li>
</ul>
</div></div><div id="cell-26" class="observablehq observablehq--cell"><div><p>The function <code>fwidth</code> is often used as a square-root-free proxy for the gradient magnitude but results in about a 40% anisotropy in diagonal directions (i.e. ), so that <code>length(vec2(dFdx(f), dFdy(f)))</code> is preferable for the best quality.</p>
</div></div><div id="cell-3608" class="observablehq observablehq--cell"><div><p>The GLSL function below implements a contouring function that receives input <code>f</code> and returns 0.0 in the background and 1.0 on a contour, with a smooth fade between for antialiasing.</p>
</div></div><div id="cell-220" class="observablehq observablehq--cell"></div><div id="cell-836" class="observablehq observablehq--cell"><div><p>The figures below illustrate usage of this function, first for an increasing function of one variable and then for a two-dimensional function. Modify the slider values and observe how the function is transformed into equally-spaced, antialiased contours.</p>
</div></div><div id="cell-3654" class="observablehq observablehq--cell"></div><div id="cell-508" class="observablehq observablehq--cell"></div><div id="cell-98" class="observablehq observablehq--cell"></div><div id="cell-121" class="observablehq observablehq--cell"></div><div id="cell-358" class="observablehq observablehq--cell"></div><div id="cell-1976" class="observablehq observablehq--cell"><div style="padding-top: 5em"></div></div><div id="cell-3655" class="observablehq observablehq--cell"><div><h2 id="local-contour-spacing" tabindex="-1"><a href="#local-contour-spacing">Local contour spacing</a></h2>
</div></div><div id="cell-3628" class="observablehq observablehq--cell"><div><p>We now turn our attention to contour <em>spacing</em>. As successful as the above plot is, the spacing for this very tame function still varies from less than a pixel to more than a hundred pixels.</p>
</div></div><div id="cell-3656" class="observablehq observablehq--cell"><div><p>Weve already established that dividing by the screen-space gradient tells us how many pixels away we are from a contour line. That same gradient also tells us how densely contours are packed at any given point. If the gradient is large, contours are dense; if small, contours are sparse. So we can use this information to <em>choose</em> which contours to draw in any given region.</p>
</div></div><div id="cell-3629" class="observablehq observablehq--cell"><div><p>The approach is to partition the plane into regions well call <em>octaves</em>, where each octave draws contours at a different spacing. Within each octave, we draw  evenly spaced contours. When the contours in one octave get too close together, we switch to the next octave and draw  times fewer contours.</p>
</div></div><div id="cell-3657" class="observablehq observablehq--cell"><div><p>The key trick is to use a log-ceil-exp transform. Taking the logarithm of the gradient, rounding up to an integer, and exponentiating back produces discrete steps. Regions sharing the same integer octave value will draw contours at the same spacing. And because logarithms convert multiplication to addition, zooming in (which scales the gradient) simply shifts us between octaves rather than continuously changing the contour density.</p>
</div></div><div id="cell-3630" class="observablehq observablehq--cell"><div><p>To select the locally appropriate octave, we use the equation</p>
</div></div><div id="cell-3631" class="observablehq observablehq--cell"><div></div></div><div id="cell-3633" class="observablehq observablehq--cell"><div><p>where  is an integer indicating which octave a given region belongs to,  is the number of divisions per octave, and  is the minimum spacing, in pixels, between divisions.</p>
</div></div><div id="cell-3658" class="observablehq observablehq--cell"><div><p>Why  and not just ? The answer is that we want to place contours at evenly spaced values of , not  itself. Logarithmic spacing places more contours near zeros and poles, which helps reveal the structure of the function. Since were effectively plotting , we need the gradient of  By the <a href="https://en.wikipedia.org/wiki/Logarithmic_derivative">logarithmic derivative</a>,</p>
</div></div><div id="cell-3637" class="observablehq observablehq--cell"><div></div></div><div id="cell-3659" class="observablehq observablehq--cell"><div><p>This is convenient because it means we dont have to compute the logarithm to get its gradient. We just divide the gradient of  by .</p>
</div></div><div id="cell-3634" class="observablehq observablehq--cell"><div><p>Once weve determined the octave, we compute the contour spacing  as</p>
</div></div><div id="cell-3635" class="observablehq observablehq--cell"><div></div></div><div id="cell-3638" class="observablehq observablehq--cell"><div><p>The toggle below lets you switch between logarithmic and linear contour placement. For linear spacing, we remove the division by <code>abs(f)</code> and plot <code>abs(f)</code> directly instead of <code>log2(abs(f))</code>.</p>
</div></div><div id="cell-913" class="observablehq observablehq--cell"><div><p>Whether to place contours linearly or logarithmically is a bit of a subtle decision. I think linearly spaced contours often make more sense, but when shading is applied, its easier to tell the difference between roots and poles when contours are placed logarithmically. Fortunately both are valid and we dont have to commit to just one.</p>
</div></div><div id="cell-3639" class="observablehq observablehq--cell"><div><p>The shader below implements locally scaled contouring. Try enabling the octave visualization to see how the plane is partitioned into regions of equal contour spacing.</p>
</div></div><div id="cell-938" class="observablehq observablehq--cell"></div><div id="cell-2316" class="observablehq observablehq--cell"><div><p>Change the parameters below and observe the effect on the contours. Note in particular that changing the minimum contour spacing does not affect the position of the contours. Instead, it only affects the location of the thresholds between the octaves.</p>
</div></div><div id="cell-3478" class="observablehq observablehq--cell"></div><div id="cell-927" class="observablehq observablehq--cell"></div><div id="cell-932" class="observablehq observablehq--cell"></div><div id="cell-929" class="observablehq observablehq--cell"></div><div id="cell-1980" class="observablehq observablehq--cell"><div style="padding-top: 5em"></div></div><div id="cell-1035" class="observablehq observablehq--cell"></div><div id="cell-1049" class="observablehq observablehq--cell"></div><div id="cell-1164" class="observablehq observablehq--cell"></div><div id="cell-1038" class="observablehq observablehq--cell"></div><div id="cell-1043" class="observablehq observablehq--cell"></div><div id="cell-1046" class="observablehq observablehq--cell"></div><div id="cell-2634" class="observablehq observablehq--cell"></div><div id="cell-1208" class="observablehq observablehq--cell"></div><div id="cell-3652" class="observablehq observablehq--cell"></div><div id="cell-2386" class="observablehq observablehq--cell"></div><div id="cell-2502" class="observablehq observablehq--cell"></div><div id="cell-2508" class="observablehq observablehq--cell"></div><div id="cell-3649" class="observablehq observablehq--cell"></div><div id="cell-2498" class="observablehq observablehq--cell"></div><div id="cell-2499" class="observablehq observablehq--cell"></div><div id="cell-2329" class="observablehq observablehq--cell"></div><div id="cell-2330" class="observablehq observablehq--cell"></div><div id="cell-2331" class="observablehq observablehq--cell"></div><div id="cell-3343" class="observablehq observablehq--cell"></div><div id="cell-2325" class="observablehq observablehq--cell"></div><div id="cell-2332" class="observablehq observablehq--cell"></div><div id="cell-2334" class="observablehq observablehq--cell"></div><div id="cell-2579" class="observablehq observablehq--cell"><div><p>At this point, what weve created is sort of like a fractal pattern, carefully band-limited so that the smallest-scale pattern is pinned to the scale of just a few pixels. The number of octaves may be chosen by the user, but in fact there is a fairly concrete answer to the question of how many octaves should be used. The number of octaves should be chosen so that the largest scale pattern precisely covers the entire image.</p>
</div></div><div id="cell-2649" class="observablehq observablehq--cell"></div><div id="cell-3643" class="observablehq observablehq--cell"><div><h2 id="conclusions" tabindex="-1"><a href="#conclusions">Conclusions</a></h2>
</div></div><div id="cell-3645" class="observablehq observablehq--cell"><div><p>This is where well leave it for now! These are the core components of my currently-favorite approach to domain coloring, and Ive found many other uses for them. In a followup up post, Ill work through coloring by phase and applying these contours to the phase, finally arriving at a flexible, configurable shader for domain coloring.</p>
</div></div><div id="cell-3646" class="observablehq observablehq--cell"><div><p>In the mean time, though the code is messier than Id like, you can play with domain coloring using my <a href="https://observablehq.com/@rreusser/complex-function-plotter">Complex Function Plotter</a> notebook.</p>
</div></div><div id="cell-3288" class="observablehq observablehq--cell"><div><p>And finally, Id especially like to thank Observable for making this notebook possible, Mikola Lysenko for his excellent <a href="https://github.com/regl-project/regl">regl</a> library, and Jacob Rus for help, thought and feedback along the way.</p>
</div></div><div id="cell-3647" class="observablehq observablehq--cell"><div><p>Feel free to leave comments on this notebook or contact me <a href="https://bsky.app/profile/rreusser.bsky.social">on Bluesky</a> or <a href="https://mathstodon.xyz/@rreusser">on Mastodon</a>.</p>
</div></div><div id="cell-432" class="observablehq observablehq--cell"></div><div id="cell-410" class="observablehq observablehq--cell"></div><div id="cell-340" class="observablehq observablehq--cell"></div><div id="cell-381" class="observablehq observablehq--cell"></div><div id="cell-255" class="observablehq observablehq--cell"></div><div id="cell-2728" class="observablehq observablehq--cell"></div><div id="cell-92" class="observablehq observablehq--cell"></div><div id="cell-3593" class="observablehq observablehq--cell"></div></main>
  </div>
  <footer>
    <div class="footer__attrib"> 2026 Ricky Reusser</div>
    <a href="/notebooks/feed.xml" class="footer__rss">
      <svg class="icon" viewBox="0 0 24 24" fill="currentColor" width="14" height="14">
        <circle cx="6.5" cy="17.5" r="2.5"></circle>
        <path d="M4 4a16 16 0 0 1 16 16h-4A12 12 0 0 0 4 8V4z"></path>
        <path d="M4 10a10 10 0 0 1 10 10h-4a6 6 0 0 0-6-6v-4z"></path>
      </svg>
      RSS
    </a>
  </footer>


<style type="text/css">:root {
  --syntax-link: var(--theme-foreground-focus);
  --syntax-keyword: #e36209;
  --syntax-atom: #032f62;
  --syntax-literal: #6f42c1;
  --syntax-string: #22863a;
  --syntax-comment: var(--theme-foreground-muted);
  --syntax-invalid: var(--theme-error);
  --syntax-definition: #005cc5;
  --syntax-variable: var(--theme-foreground-alt);
  --syntax-meta: #d73a49;
}

:root {
  --theme-background-b: color-mix(in srgb, var(--theme-foreground) 4%, var(--theme-background-a));
  --theme-background: var(--theme-background-a);
  --theme-background-alt: var(--theme-background-b);
  --theme-foreground-alt: color-mix(in srgb, var(--theme-foreground) 90%, var(--theme-background-a));
  --theme-foreground-muted: color-mix(in srgb, var(--theme-foreground) 60%, var(--theme-background-a));
  --theme-foreground-faint: color-mix(in srgb, var(--theme-foreground) 50%, var(--theme-background-a));
  --theme-foreground-fainter: color-mix(in srgb, var(--theme-foreground) 30%, var(--theme-background-a));
  --theme-foreground-faintest: color-mix(in srgb, var(--theme-foreground) 14%, var(--theme-background-a));
  --theme-error: #e7040f;
  color-scheme: light;
}

:root {
  --theme-foreground: #1b1e23;
  --theme-foreground-focus: #3b5fc0;
  --theme-background-a: #ffffff;
}
</style></body></html>