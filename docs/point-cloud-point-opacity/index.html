<!doctype html><html lang="en"><head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="author" content="Ricky Reusser">
  <meta property="article:author" content="Ricky Reusser">
  <meta name="twitter:title" content="Selecting the Right Opacity for 2D Point Clouds">
  <meta property="og:title" content="Selecting the Right Opacity for 2D Point Clouds">
  <meta name="twitter:description" content="Deriving the formula for point opacity in large point cloud visualizations to maintain consistent visual density.">
  <meta name="subject" content="Deriving the formula for point opacity in large point cloud visualizations to maintain consistent visual density.">
  <meta name="description" content="Deriving the formula for point opacity in large point cloud visualizations to maintain consistent visual density.">
  <meta property="og:description" content="Deriving the formula for point opacity in large point cloud visualizations to maintain consistent visual density.">
  <meta name="twitter:image" content="https://rreusser.github.io/notebooks/meta/point-cloud-point-opacity.jpg">
  <meta name="twitter:card" content="summary_large_image">
  <meta property="og:image" content="https://rreusser.github.io/notebooks/meta/point-cloud-point-opacity.jpg">
  <link rel="alternate" type="application/rss+xml" title="Ricky Reusser's Notebooks" href="/notebooks/feed.xml">
  <style type="text/css">@import url("https://fonts.googleapis.com/css?family=Open+Sans:300,400,400i,700");
    /* Copyright 2025 Observable, Inc. */
    :root {
  --serif:
    "Source Serif 4", "Iowan Old Style", "Apple Garamond", "Palatino Linotype", "Times New Roman",
    "Droid Serif", Times, serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
  --sans-serif:
    "Inter", -apple-system, BlinkMacSystemFont, "avenir next", avenir, helvetica, "helvetica neue",
    ubuntu, roboto, noto, "segoe ui", arial, sans-serif;
  --monospace: "Spline Sans Mono", Menlo, Consolas, monospace;
  --monospace-font: 14px/1.5 var(--monospace);
  --max-width: calc(1024px - 4 * 16px); /* max-w-5xl p-4 */
}
    html {
  font: 17px/1.5 var(--serif);
  -webkit-text-size-adjust: 100%;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  background: var(--theme-background);
  color: var(--theme-foreground);
  margin: 16px 0;
  padding: 16px 24px;
}
    body {
  margin: auto;
  max-width: var(--max-width);
}
    h1,
h2,
h3,
h4,
h5,
h6 {
  color: var(--theme-foreground-alt);
  font-weight: 700;
  line-height: 1.15;
  margin-top: 0;
  margin-bottom: 0.25rem;
  text-wrap: balance;
}
    h2 + p,
h3 + p,
h4 + p,
h2 + table,
h3 + table,
h4 + table {
  margin-top: 0;
}
    .observablehq:first-of-type h1 + h2 {
  color: var(--theme-foreground);
  font-size: 20px;
  font-style: italic;
  font-weight: normal;
  margin-bottom: 1rem; /* see h2 ~ p */
}
    a[href] {
  color: var(--theme-foreground-focus);
  text-decoration: none;
}
    a[href]:hover,
a[href]:focus {
  text-decoration: underline;
}
    pre,
code,
tt {
  font-family: var(--monospace);
  font-size: 82.35294117%; /* from 17px to 14px */
}
    pre code,
figcaption code {
  font-size: inherit;
}
    pre[data-language] {
  position: relative;
}
    pre[data-language]::before {
  content: attr(data-language);
  position: sticky;
  top: 0;
  left: 0;
  height: 0;
  display: block;
  text-align: right;
  margin-right: -4px;
  pointer-events: none;
  font-size: 12px;
  line-height: 21px;
  color: var(--theme-foreground-muted);
}
    h1 code,
h2 code,
h3 code,
h4 code,
h5 code,
h6 code {
  font-size: 88.235294117%; /* from 17px to 15px */
}
    h2[id] a[href],
h3[id] a[href] {
  color: inherit;
}
    pre {
  line-height: 1.5;
}
    img {
  max-width: 100%;
}
    p,
table,
figure,
figcaption,
h1,
h2,
h3,
h4,
h5,
h6,
.katex-display {
  max-width: 640px;
}
    blockquote,
ol,
ul {
  max-width: 600px;
}
    blockquote {
  margin: 1rem 1.5rem;
}
    ul,
ol {
  padding-left: 28px;
}
    hr {
  height: 1px;
  margin: 1rem 0;
  padding: 1rem 0;
  border: none;
  background: no-repeat center/100% 1px
    linear-gradient(to right, var(--theme-foreground-faintest), var(--theme-foreground-faintest));
}
    pre {
  background-color: var(--theme-background-alt);
  border-radius: 4px;
  margin: 1rem -1rem;
  min-height: 1.5em;
  padding: 4px 1rem;
  overflow-x: auto;
  overscroll-behavior-x: none;
  box-sizing: border-box;
}
    pre > code:only-child {
  display: block;
  width: fit-content;
}
    input:not([type]),
input[type="email"],
input[type="number"],
input[type="password"],
input[type="range"],
input[type="search"],
input[type="tel"],
input[type="text"],
input[type="url"] {
  width: 240px;
}
    input,
canvas,
button {
  vertical-align: middle;
}
    button,
input,
textarea {
  accent-color: var(--theme-foreground-focus);
}
    table {
  width: 100%;
  border-collapse: collapse;
  font: 13px/1.2 var(--sans-serif);
}
    table pre,
table code,
table tt {
  font-size: inherit;
  line-height: inherit;
}
    th > pre:only-child,
td > pre:only-child {
  margin: 0;
  padding: 0;
}
    th {
  color: var(--theme-foreground);
  text-align: left;
  vertical-align: bottom;
}
    td {
  color: var(--theme-foreground-alt);
  vertical-align: top;
}
    th,
td {
  padding: 3px 6.5px 3px 0;
}
    th:last-child,
td:last-child {
  padding-right: 0;
}
    tr:not(:last-child) {
  border-bottom: solid 1px var(--theme-foreground-faintest);
}
    thead tr {
  border-bottom: solid 1px var(--theme-foreground-fainter);
}
    figure,
table {
  margin: 1rem 0;
}
    figure img {
  max-width: 100%;
}
    figure > h2,
figure > h3 {
  font-family: var(--sans-serif);
}
    figure > h2 {
  font-size: 20px;
}
    figure > h3 {
  font-size: 16px;
  font-weight: normal;
}
    figcaption {
  font: small var(--sans-serif);
  color: var(--theme-foreground-muted);
}
    .observablehq--collapsed,
.observablehq--expanded.observablehq--inspect a {
  cursor: pointer;
}
    .observablehq--caret {
  margin-right: 4px;
  vertical-align: baseline;
}
    .observablehq--field {
  text-indent: -1rem;
  margin-left: 1rem;
}
    .observablehq--inspect {
  font: var(--monospace-font);
  overflow-x: auto;
  white-space: pre;
  display: block;
  padding: 2px 0;
}
    .observablehq--inspect.observablehq--import {
  white-space: normal;
}
    .observablehq--inspect::-webkit-scrollbar {
  display: none;
}
    .observablehq--error .observablehq--inspect {
  word-break: break-all;
  white-space: pre-wrap;
}
    .observablehq--string-expand {
  margin-left: 6px;
  padding: 2px 6px;
  border-radius: 2px;
  font-size: 80%;
  background: var(--theme-background-alt);
  cursor: pointer;
  vertical-align: middle;
}
    .observablehq--keyword {
  color: var(--syntax-keyword);
}
    .observablehq--index,
.observablehq--key {
  color: var(--syntax-definition);
}
    .observablehq--symbol,
.observablehq--regexp,
.observablehq--string {
  color: var(--syntax-string);
}
    .observablehq--null {
  color: var(--syntax-keyword);
}
    .observablehq--undefined {
  color: var(--syntax-variable);
}
    .observablehq--prototype-key {
  color: var(--syntax-comment);
}
    .observablehq--bigint,
.observablehq--boolean,
.observablehq--date,
.observablehq--forbidden,
.observablehq--number {
  color: var(--syntax-literal);
}
    .observablehq--error {
  color: var(--theme-error);
}
    .observablehq--cell {
  margin: 17px 0;
  min-height: 1px; /* prevent margin collapse when empty */
}
    .tok-link {
  color: var(--syntax-link);
}
    .tok-strong {
  font-weight: 600;
}
    .tok-emphasis {
  font-style: italic;
}
    .tok-keyword {
  color: var(--syntax-keyword);
}
    .tok-atom {
  color: var(--syntax-atom);
}
    .tok-literal {
  color: var(--syntax-literal);
}
    .tok-string {
  color: var(--syntax-string);
}
    .tok-comment {
  color: var(--syntax-comment);
}
    .tok-invalid {
  color: var(--syntax-invalid);
}
    .tok-variable {
  color: var(--syntax-variable);
}
    .tok-definition {
  color: var(--syntax-definition);
}
    .tok-meta {
  color: var(--syntax-meta);
}
    .plot-d6a7b5 {
  --plot-background: var(--theme-background);
}
    p .plot-d6a7b5 {
  display: inline-block;
}
    .observablehq--cell:empty {
  min-height: 0;
}
    .observablehq--cell:not(:empty) + pre {
  margin-top: -11px;
}
    /* spline-sans-mono-latin-ext-400-normal */
    @font-face {
  font-family: 'Spline Sans Mono';
  font-style: normal;
  font-display: swap;
  font-weight: 400;
  src: url(/notebooks/assets/spline-sans-mono-latin-ext-400-normal-BfWvPoNT.woff2) format('woff2'), url(/notebooks/assets/spline-sans-mono-latin-ext-400-normal-BkT5i7fe.woff) format('woff');
  unicode-range: U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF;
}
    /* spline-sans-mono-latin-400-normal */
    @font-face {
  font-family: 'Spline Sans Mono';
  font-style: normal;
  font-display: swap;
  font-weight: 400;
  src: url(/notebooks/assets/spline-sans-mono-latin-400-normal-mUpA6Mve.woff2) format('woff2'), url(/notebooks/assets/spline-sans-mono-latin-400-normal-739QRW1l.woff) format('woff');
  unicode-range: U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;
}
    /* spline-sans-mono-latin-ext-600-normal */
    @font-face {
  font-family: 'Spline Sans Mono';
  font-style: normal;
  font-display: swap;
  font-weight: 600;
  src: url(/notebooks/assets/spline-sans-mono-latin-ext-600-normal-CYO0557q.woff2) format('woff2'), url(/notebooks/assets/spline-sans-mono-latin-ext-600-normal-es3wdE0V.woff) format('woff');
  unicode-range: U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF;
}
    /* spline-sans-mono-latin-600-normal */
    @font-face {
  font-family: 'Spline Sans Mono';
  font-style: normal;
  font-display: swap;
  font-weight: 600;
  src: url(/notebooks/assets/spline-sans-mono-latin-600-normal-BrWm9FVc.woff2) format('woff2'), url(/notebooks/assets/spline-sans-mono-latin-600-normal-ZCqv2Jod.woff) format('woff');
  unicode-range: U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;
}
    /* spline-sans-mono-latin-ext-700-normal */
    @font-face {
  font-family: 'Spline Sans Mono';
  font-style: normal;
  font-display: swap;
  font-weight: 700;
  src: url(/notebooks/assets/spline-sans-mono-latin-ext-700-normal-CIwA9V33.woff2) format('woff2'), url(/notebooks/assets/spline-sans-mono-latin-ext-700-normal-OD-FaHeD.woff) format('woff');
  unicode-range: U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF;
}
    /* spline-sans-mono-latin-700-normal */
    @font-face {
  font-family: 'Spline Sans Mono';
  font-style: normal;
  font-display: swap;
  font-weight: 700;
  src: url(/notebooks/assets/spline-sans-mono-latin-700-normal-BwW4xXNM.woff2) format('woff2'), url(/notebooks/assets/spline-sans-mono-latin-700-normal-BLdnetBw.woff) format('woff');
  unicode-range: U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;
}
    /* spline-sans-mono-latin-ext-400-italic */
    @font-face {
  font-family: 'Spline Sans Mono';
  font-style: italic;
  font-display: swap;
  font-weight: 400;
  src: url(/notebooks/assets/spline-sans-mono-latin-ext-400-italic-Bgx7hsPO.woff2) format('woff2'), url(/notebooks/assets/spline-sans-mono-latin-ext-400-italic-ByCpokw0.woff) format('woff');
  unicode-range: U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF;
}
    /* spline-sans-mono-latin-400-italic */
    @font-face {
  font-family: 'Spline Sans Mono';
  font-style: italic;
  font-display: swap;
  font-weight: 400;
  src: url(/notebooks/assets/spline-sans-mono-latin-400-italic-DP081DET.woff2) format('woff2'), url(/notebooks/assets/spline-sans-mono-latin-400-italic-Z_tpZbsx.woff) format('woff');
  unicode-range: U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;
}
    /* spline-sans-mono-latin-ext-600-italic */
    @font-face {
  font-family: 'Spline Sans Mono';
  font-style: italic;
  font-display: swap;
  font-weight: 600;
  src: url(/notebooks/assets/spline-sans-mono-latin-ext-600-italic-CJ3g_dA0.woff2) format('woff2'), url(/notebooks/assets/spline-sans-mono-latin-ext-600-italic-QnP7nD6P.woff) format('woff');
  unicode-range: U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF;
}
    /* spline-sans-mono-latin-600-italic */
    @font-face {
  font-family: 'Spline Sans Mono';
  font-style: italic;
  font-display: swap;
  font-weight: 600;
  src: url(/notebooks/assets/spline-sans-mono-latin-600-italic-DUvxu3FQ.woff2) format('woff2'), url(/notebooks/assets/spline-sans-mono-latin-600-italic-B7XC_fUc.woff) format('woff');
  unicode-range: U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;
}
    /* spline-sans-mono-latin-ext-700-italic */
    @font-face {
  font-family: 'Spline Sans Mono';
  font-style: italic;
  font-display: swap;
  font-weight: 700;
  src: url(/notebooks/assets/spline-sans-mono-latin-ext-700-italic-DIdep8Er.woff2) format('woff2'), url(/notebooks/assets/spline-sans-mono-latin-ext-700-italic-CIqQYA0i.woff) format('woff');
  unicode-range: U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF;
}
    /* spline-sans-mono-latin-700-italic */
    @font-face {
  font-family: 'Spline Sans Mono';
  font-style: italic;
  font-display: swap;
  font-weight: 700;
  src: url(/notebooks/assets/spline-sans-mono-latin-700-italic-shtgotnr.woff2) format('woff2'), url(/notebooks/assets/spline-sans-mono-latin-700-italic-6zMndKap.woff) format('woff');
  unicode-range: U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;
}
    /* source-serif-4-cyrillic-ext-400-normal */
    @font-face {
  font-family: 'Source Serif 4';
  font-style: normal;
  font-display: swap;
  font-weight: 400;
  src: url(/notebooks/assets/source-serif-4-cyrillic-ext-400-normal-CWV284fw.woff2) format('woff2'), url(/notebooks/assets/source-serif-4-cyrillic-ext-400-normal-DLkyKLvH.woff) format('woff');
  unicode-range: U+0460-052F,U+1C80-1C8A,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;
}
    /* source-serif-4-cyrillic-400-normal */
    @font-face {
  font-family: 'Source Serif 4';
  font-style: normal;
  font-display: swap;
  font-weight: 400;
  src: url(/notebooks/assets/source-serif-4-cyrillic-400-normal-C44pakCn.woff2) format('woff2'), url(/notebooks/assets/source-serif-4-cyrillic-400-normal-B8Z6Jvzv.woff) format('woff');
  unicode-range: U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;
}
    /* source-serif-4-greek-400-normal */
    @font-face {
  font-family: 'Source Serif 4';
  font-style: normal;
  font-display: swap;
  font-weight: 400;
  src: url(/notebooks/assets/source-serif-4-greek-400-normal-Cw5-AHNN.woff2) format('woff2'), url(/notebooks/assets/source-serif-4-greek-400-normal-BccYJ-vZ.woff) format('woff');
  unicode-range: U+0370-0377,U+037A-037F,U+0384-038A,U+038C,U+038E-03A1,U+03A3-03FF;
}
    /* source-serif-4-vietnamese-400-normal */
    @font-face {
  font-family: 'Source Serif 4';
  font-style: normal;
  font-display: swap;
  font-weight: 400;
  src: url(/notebooks/assets/source-serif-4-vietnamese-400-normal-BbG3LG1A.woff2) format('woff2'), url(/notebooks/assets/source-serif-4-vietnamese-400-normal-DR1UuFon.woff) format('woff');
  unicode-range: U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;
}
    /* source-serif-4-latin-ext-400-normal */
    @font-face {
  font-family: 'Source Serif 4';
  font-style: normal;
  font-display: swap;
  font-weight: 400;
  src: url(/notebooks/assets/source-serif-4-latin-ext-400-normal-Cp7z-ARB.woff2) format('woff2'), url(/notebooks/assets/source-serif-4-latin-ext-400-normal-CEpydyUl.woff) format('woff');
  unicode-range: U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF;
}
    /* source-serif-4-latin-400-normal */
    @font-face {
  font-family: 'Source Serif 4';
  font-style: normal;
  font-display: swap;
  font-weight: 400;
  src: url(/notebooks/assets/source-serif-4-latin-400-normal-DJ5YJwmz.woff2) format('woff2'), url(/notebooks/assets/source-serif-4-latin-400-normal-Dn3IlU-Z.woff) format('woff');
  unicode-range: U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;
}
    /* source-serif-4-cyrillic-ext-700-normal */
    @font-face {
  font-family: 'Source Serif 4';
  font-style: normal;
  font-display: swap;
  font-weight: 700;
  src: url(/notebooks/assets/source-serif-4-cyrillic-ext-700-normal-B9R79AaY.woff2) format('woff2'), url(/notebooks/assets/source-serif-4-cyrillic-ext-700-normal-DsKdgJCr.woff) format('woff');
  unicode-range: U+0460-052F,U+1C80-1C8A,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;
}
    /* source-serif-4-cyrillic-700-normal */
    @font-face {
  font-family: 'Source Serif 4';
  font-style: normal;
  font-display: swap;
  font-weight: 700;
  src: url(/notebooks/assets/source-serif-4-cyrillic-700-normal-BmBwwUw2.woff2) format('woff2'), url(/notebooks/assets/source-serif-4-cyrillic-700-normal-DVvE-KHB.woff) format('woff');
  unicode-range: U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;
}
    /* source-serif-4-greek-700-normal */
    @font-face {
  font-family: 'Source Serif 4';
  font-style: normal;
  font-display: swap;
  font-weight: 700;
  src: url(/notebooks/assets/source-serif-4-greek-700-normal-BzuEQSqJ.woff2) format('woff2'), url(/notebooks/assets/source-serif-4-greek-700-normal-C5Ojiwey.woff) format('woff');
  unicode-range: U+0370-0377,U+037A-037F,U+0384-038A,U+038C,U+038E-03A1,U+03A3-03FF;
}
    /* source-serif-4-vietnamese-700-normal */
    @font-face {
  font-family: 'Source Serif 4';
  font-style: normal;
  font-display: swap;
  font-weight: 700;
  src: url(/notebooks/assets/source-serif-4-vietnamese-700-normal-CCAt8c4x.woff2) format('woff2'), url(/notebooks/assets/source-serif-4-vietnamese-700-normal-BBU5i_d1.woff) format('woff');
  unicode-range: U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;
}
    /* source-serif-4-latin-ext-700-normal */
    @font-face {
  font-family: 'Source Serif 4';
  font-style: normal;
  font-display: swap;
  font-weight: 700;
  src: url(/notebooks/assets/source-serif-4-latin-ext-700-normal-C8ywwcuQ.woff2) format('woff2'), url(/notebooks/assets/source-serif-4-latin-ext-700-normal-BZsvHpal.woff) format('woff');
  unicode-range: U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF;
}
    /* source-serif-4-latin-700-normal */
    @font-face {
  font-family: 'Source Serif 4';
  font-style: normal;
  font-display: swap;
  font-weight: 700;
  src: url(/notebooks/assets/source-serif-4-latin-700-normal-CGGdTIBe.woff2) format('woff2'), url(/notebooks/assets/source-serif-4-latin-700-normal-3V4Pv1hj.woff) format('woff');
  unicode-range: U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;
}
    /* source-serif-4-cyrillic-ext-400-italic */
    @font-face {
  font-family: 'Source Serif 4';
  font-style: italic;
  font-display: swap;
  font-weight: 400;
  src: url(/notebooks/assets/source-serif-4-cyrillic-ext-400-italic-zoDFlEzN.woff2) format('woff2'), url(/notebooks/assets/source-serif-4-cyrillic-ext-400-italic-Dx4A8QUO.woff) format('woff');
  unicode-range: U+0460-052F,U+1C80-1C8A,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;
}
    /* source-serif-4-cyrillic-400-italic */
    @font-face {
  font-family: 'Source Serif 4';
  font-style: italic;
  font-display: swap;
  font-weight: 400;
  src: url(/notebooks/assets/source-serif-4-cyrillic-400-italic-BLN19cOa.woff2) format('woff2'), url(/notebooks/assets/source-serif-4-cyrillic-400-italic-Dx8qIUN3.woff) format('woff');
  unicode-range: U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;
}
    /* source-serif-4-greek-400-italic */
    @font-face {
  font-family: 'Source Serif 4';
  font-style: italic;
  font-display: swap;
  font-weight: 400;
  src: url(/notebooks/assets/source-serif-4-greek-400-italic-C7D4Dq0H.woff2) format('woff2'), url(/notebooks/assets/source-serif-4-greek-400-italic-DcuniPAV.woff) format('woff');
  unicode-range: U+0370-0377,U+037A-037F,U+0384-038A,U+038C,U+038E-03A1,U+03A3-03FF;
}
    /* source-serif-4-vietnamese-400-italic */
    @font-face {
  font-family: 'Source Serif 4';
  font-style: italic;
  font-display: swap;
  font-weight: 400;
  src: url(/notebooks/assets/source-serif-4-vietnamese-400-italic-CjUPRDIa.woff2) format('woff2'), url(/notebooks/assets/source-serif-4-vietnamese-400-italic-DyjhI2GX.woff) format('woff');
  unicode-range: U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;
}
    /* source-serif-4-latin-ext-400-italic */
    @font-face {
  font-family: 'Source Serif 4';
  font-style: italic;
  font-display: swap;
  font-weight: 400;
  src: url(/notebooks/assets/source-serif-4-latin-ext-400-italic-JynPwBMj.woff2) format('woff2'), url(/notebooks/assets/source-serif-4-latin-ext-400-italic-G7LDTi7t.woff) format('woff');
  unicode-range: U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF;
}
    /* source-serif-4-latin-400-italic */
    @font-face {
  font-family: 'Source Serif 4';
  font-style: italic;
  font-display: swap;
  font-weight: 400;
  src: url(/notebooks/assets/source-serif-4-latin-400-italic-0j97Jm6B.woff2) format('woff2'), url(/notebooks/assets/source-serif-4-latin-400-italic-Dv9jnFA_.woff) format('woff');
  unicode-range: U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;
}
    /* source-serif-4-cyrillic-ext-700-italic */
    @font-face {
  font-family: 'Source Serif 4';
  font-style: italic;
  font-display: swap;
  font-weight: 700;
  src: url(/notebooks/assets/source-serif-4-cyrillic-ext-700-italic-BdFI3uD2.woff2) format('woff2'), url(/notebooks/assets/source-serif-4-cyrillic-ext-700-italic-CW6u860k.woff) format('woff');
  unicode-range: U+0460-052F,U+1C80-1C8A,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;
}
    /* source-serif-4-cyrillic-700-italic */
    @font-face {
  font-family: 'Source Serif 4';
  font-style: italic;
  font-display: swap;
  font-weight: 700;
  src: url(/notebooks/assets/source-serif-4-cyrillic-700-italic-C5vSpb1a.woff2) format('woff2'), url(/notebooks/assets/source-serif-4-cyrillic-700-italic-BNXt_5iO.woff) format('woff');
  unicode-range: U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;
}
    /* source-serif-4-greek-700-italic */
    @font-face {
  font-family: 'Source Serif 4';
  font-style: italic;
  font-display: swap;
  font-weight: 700;
  src: url(/notebooks/assets/source-serif-4-greek-700-italic-DbF55r_P.woff2) format('woff2'), url(/notebooks/assets/source-serif-4-greek-700-italic-bfz8xsri.woff) format('woff');
  unicode-range: U+0370-0377,U+037A-037F,U+0384-038A,U+038C,U+038E-03A1,U+03A3-03FF;
}
    /* source-serif-4-vietnamese-700-italic */
    @font-face {
  font-family: 'Source Serif 4';
  font-style: italic;
  font-display: swap;
  font-weight: 700;
  src: url(/notebooks/assets/source-serif-4-vietnamese-700-italic-CqUud9yW.woff2) format('woff2'), url(/notebooks/assets/source-serif-4-vietnamese-700-italic-CmYmx5Sm.woff) format('woff');
  unicode-range: U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;
}
    /* source-serif-4-latin-ext-700-italic */
    @font-face {
  font-family: 'Source Serif 4';
  font-style: italic;
  font-display: swap;
  font-weight: 700;
  src: url(/notebooks/assets/source-serif-4-latin-ext-700-italic-D3ZlY63u.woff2) format('woff2'), url(/notebooks/assets/source-serif-4-latin-ext-700-italic-DppnFcZR.woff) format('woff');
  unicode-range: U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF;
}
    /* source-serif-4-latin-700-italic */
    @font-face {
  font-family: 'Source Serif 4';
  font-style: italic;
  font-display: swap;
  font-weight: 700;
  src: url(/notebooks/assets/source-serif-4-latin-700-italic-JqVfbRzb.woff2) format('woff2'), url(/notebooks/assets/source-serif-4-latin-700-italic-BU_ZoKoz.woff) format('woff');
  unicode-range: U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;
}
    /* inter-cyrillic-ext-400-normal */
    @font-face {
  font-family: 'Inter';
  font-style: normal;
  font-display: swap;
  font-weight: 400;
  src: url(/notebooks/assets/inter-cyrillic-ext-400-normal-BQZuk6qB.woff2) format('woff2'), url(/notebooks/assets/inter-cyrillic-ext-400-normal-DQukG94-.woff) format('woff');
  unicode-range: U+0460-052F,U+1C80-1C8A,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;
}
    /* inter-cyrillic-400-normal */
    @font-face {
  font-family: 'Inter';
  font-style: normal;
  font-display: swap;
  font-weight: 400;
  src: url(/notebooks/assets/inter-cyrillic-400-normal-obahsSVq.woff2) format('woff2'), url(/notebooks/assets/inter-cyrillic-400-normal-HOLc17fK.woff) format('woff');
  unicode-range: U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;
}
    /* inter-greek-ext-400-normal */
    @font-face {
  font-family: 'Inter';
  font-style: normal;
  font-display: swap;
  font-weight: 400;
  src: url(/notebooks/assets/inter-greek-ext-400-normal-DGGRlc-M.woff2) format('woff2'), url(/notebooks/assets/inter-greek-ext-400-normal-KugGGMne.woff) format('woff');
  unicode-range: U+1F00-1FFF;
}
    /* inter-greek-400-normal */
    @font-face {
  font-family: 'Inter';
  font-style: normal;
  font-display: swap;
  font-weight: 400;
  src: url(/notebooks/assets/inter-greek-400-normal-B4URO6DV.woff2) format('woff2'), url(/notebooks/assets/inter-greek-400-normal-q2sYcFCs.woff) format('woff');
  unicode-range: U+0370-0377,U+037A-037F,U+0384-038A,U+038C,U+038E-03A1,U+03A3-03FF;
}
    /* inter-vietnamese-400-normal */
    @font-face {
  font-family: 'Inter';
  font-style: normal;
  font-display: swap;
  font-weight: 400;
  src: url(/notebooks/assets/inter-vietnamese-400-normal-DMkecbls.woff2) format('woff2'), url(/notebooks/assets/inter-vietnamese-400-normal-Bbgyi5SW.woff) format('woff');
  unicode-range: U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;
}
    /* inter-latin-ext-400-normal */
    @font-face {
  font-family: 'Inter';
  font-style: normal;
  font-display: swap;
  font-weight: 400;
  src: url(/notebooks/assets/inter-latin-ext-400-normal-C1nco2VV.woff2) format('woff2'), url(/notebooks/assets/inter-latin-ext-400-normal-77YHD8bZ.woff) format('woff');
  unicode-range: U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF;
}
    /* inter-latin-400-normal */
    @font-face {
  font-family: 'Inter';
  font-style: normal;
  font-display: swap;
  font-weight: 400;
  src: url(/notebooks/assets/inter-latin-400-normal-C38fXH4l.woff2) format('woff2'), url(/notebooks/assets/inter-latin-400-normal-CyCys3Eg.woff) format('woff');
  unicode-range: U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;
}
    /* inter-cyrillic-ext-500-normal */
    @font-face {
  font-family: 'Inter';
  font-style: normal;
  font-display: swap;
  font-weight: 500;
  src: url(/notebooks/assets/inter-cyrillic-ext-500-normal-B0yAr1jD.woff2) format('woff2'), url(/notebooks/assets/inter-cyrillic-ext-500-normal-BmqWE9Dz.woff) format('woff');
  unicode-range: U+0460-052F,U+1C80-1C8A,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;
}
    /* inter-cyrillic-500-normal */
    @font-face {
  font-family: 'Inter';
  font-style: normal;
  font-display: swap;
  font-weight: 500;
  src: url(/notebooks/assets/inter-cyrillic-500-normal-BasfLYem.woff2) format('woff2'), url(/notebooks/assets/inter-cyrillic-500-normal-CxZf_p3X.woff) format('woff');
  unicode-range: U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;
}
    /* inter-greek-ext-500-normal */
    @font-face {
  font-family: 'Inter';
  font-style: normal;
  font-display: swap;
  font-weight: 500;
  src: url(/notebooks/assets/inter-greek-ext-500-normal-C4iEst2y.woff2) format('woff2'), url(/notebooks/assets/inter-greek-ext-500-normal-2j5mBUwD.woff) format('woff');
  unicode-range: U+1F00-1FFF;
}
    /* inter-greek-500-normal */
    @font-face {
  font-family: 'Inter';
  font-style: normal;
  font-display: swap;
  font-weight: 500;
  src: url(/notebooks/assets/inter-greek-500-normal-BIZE56-Y.woff2) format('woff2'), url(/notebooks/assets/inter-greek-500-normal-Xzm54t5V.woff) format('woff');
  unicode-range: U+0370-0377,U+037A-037F,U+0384-038A,U+038C,U+038E-03A1,U+03A3-03FF;
}
    /* inter-vietnamese-500-normal */
    @font-face {
  font-family: 'Inter';
  font-style: normal;
  font-display: swap;
  font-weight: 500;
  src: url(/notebooks/assets/inter-vietnamese-500-normal-DOriooB6.woff2) format('woff2'), url(/notebooks/assets/inter-vietnamese-500-normal-mJboJaSs.woff) format('woff');
  unicode-range: U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;
}
    /* inter-latin-ext-500-normal */
    @font-face {
  font-family: 'Inter';
  font-style: normal;
  font-display: swap;
  font-weight: 500;
  src: url(/notebooks/assets/inter-latin-ext-500-normal-CV4jyFjo.woff2) format('woff2'), url(/notebooks/assets/inter-latin-ext-500-normal-BxGbmqWO.woff) format('woff');
  unicode-range: U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF;
}
    /* inter-latin-500-normal */
    @font-face {
  font-family: 'Inter';
  font-style: normal;
  font-display: swap;
  font-weight: 500;
  src: url(/notebooks/assets/inter-latin-500-normal-Cerq10X2.woff2) format('woff2'), url(/notebooks/assets/inter-latin-500-normal-BL9OpVg8.woff) format('woff');
  unicode-range: U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;
}
    /* inter-cyrillic-ext-600-normal */
    @font-face {
  font-family: 'Inter';
  font-style: normal;
  font-display: swap;
  font-weight: 600;
  src: url(/notebooks/assets/inter-cyrillic-ext-600-normal-Dfes3d0z.woff2) format('woff2'), url(/notebooks/assets/inter-cyrillic-ext-600-normal-Bcila6Z-.woff) format('woff');
  unicode-range: U+0460-052F,U+1C80-1C8A,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;
}
    /* inter-cyrillic-600-normal */
    @font-face {
  font-family: 'Inter';
  font-style: normal;
  font-display: swap;
  font-weight: 600;
  src: url(/notebooks/assets/inter-cyrillic-600-normal-CWCymEST.woff2) format('woff2'), url(/notebooks/assets/inter-cyrillic-600-normal-4D_pXhcN.woff) format('woff');
  unicode-range: U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;
}
    /* inter-greek-ext-600-normal */
    @font-face {
  font-family: 'Inter';
  font-style: normal;
  font-display: swap;
  font-weight: 600;
  src: url(/notebooks/assets/inter-greek-ext-600-normal-DRtmH8MT.woff2) format('woff2'), url(/notebooks/assets/inter-greek-ext-600-normal-B8X0CLgF.woff) format('woff');
  unicode-range: U+1F00-1FFF;
}
    /* inter-greek-600-normal */
    @font-face {
  font-family: 'Inter';
  font-style: normal;
  font-display: swap;
  font-weight: 600;
  src: url(/notebooks/assets/inter-greek-600-normal-plRanbMR.woff2) format('woff2'), url(/notebooks/assets/inter-greek-600-normal-BZpKdvQh.woff) format('woff');
  unicode-range: U+0370-0377,U+037A-037F,U+0384-038A,U+038C,U+038E-03A1,U+03A3-03FF;
}
    /* inter-vietnamese-600-normal */
    @font-face {
  font-family: 'Inter';
  font-style: normal;
  font-display: swap;
  font-weight: 600;
  src: url(/notebooks/assets/inter-vietnamese-600-normal-Cc8MFFhd.woff2) format('woff2'), url(/notebooks/assets/inter-vietnamese-600-normal-BuLX-rYi.woff) format('woff');
  unicode-range: U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;
}
    /* inter-latin-ext-600-normal */
    @font-face {
  font-family: 'Inter';
  font-style: normal;
  font-display: swap;
  font-weight: 600;
  src: url(/notebooks/assets/inter-latin-ext-600-normal-D2bJ5OIk.woff2) format('woff2'), url(/notebooks/assets/inter-latin-ext-600-normal-CIVaiw4L.woff) format('woff');
  unicode-range: U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF;
}
    /* inter-latin-600-normal */
    @font-face {
  font-family: 'Inter';
  font-style: normal;
  font-display: swap;
  font-weight: 600;
  src: url(/notebooks/assets/inter-latin-600-normal-LgqL8muc.woff2) format('woff2'), url(/notebooks/assets/inter-latin-600-normal-CiBQ2DWP.woff) format('woff');
  unicode-range: U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;
}
    /* inter-cyrillic-ext-700-normal */
    @font-face {
  font-family: 'Inter';
  font-style: normal;
  font-display: swap;
  font-weight: 700;
  src: url(/notebooks/assets/inter-cyrillic-ext-700-normal-BjwYoWNd.woff2) format('woff2'), url(/notebooks/assets/inter-cyrillic-ext-700-normal-LO58E6JB.woff) format('woff');
  unicode-range: U+0460-052F,U+1C80-1C8A,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;
}
    /* inter-cyrillic-700-normal */
    @font-face {
  font-family: 'Inter';
  font-style: normal;
  font-display: swap;
  font-weight: 700;
  src: url(/notebooks/assets/inter-cyrillic-700-normal-CjBOestx.woff2) format('woff2'), url(/notebooks/assets/inter-cyrillic-700-normal-DrXBdSj3.woff) format('woff');
  unicode-range: U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;
}
    /* inter-greek-ext-700-normal */
    @font-face {
  font-family: 'Inter';
  font-style: normal;
  font-display: swap;
  font-weight: 700;
  src: url(/notebooks/assets/inter-greek-ext-700-normal-qfdV9bQt.woff2) format('woff2'), url(/notebooks/assets/inter-greek-ext-700-normal-BoQ6DsYi.woff) format('woff');
  unicode-range: U+1F00-1FFF;
}
    /* inter-greek-700-normal */
    @font-face {
  font-family: 'Inter';
  font-style: normal;
  font-display: swap;
  font-weight: 700;
  src: url(/notebooks/assets/inter-greek-700-normal-C3JjAnD8.woff2) format('woff2'), url(/notebooks/assets/inter-greek-700-normal-BUv2fZ6O.woff) format('woff');
  unicode-range: U+0370-0377,U+037A-037F,U+0384-038A,U+038C,U+038E-03A1,U+03A3-03FF;
}
    /* inter-vietnamese-700-normal */
    @font-face {
  font-family: 'Inter';
  font-style: normal;
  font-display: swap;
  font-weight: 700;
  src: url(/notebooks/assets/inter-vietnamese-700-normal-DlLaEgI2.woff2) format('woff2'), url(/notebooks/assets/inter-vietnamese-700-normal-BZaoP0fm.woff) format('woff');
  unicode-range: U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;
}
    /* inter-latin-ext-700-normal */
    @font-face {
  font-family: 'Inter';
  font-style: normal;
  font-display: swap;
  font-weight: 700;
  src: url(/notebooks/assets/inter-latin-ext-700-normal-Ca8adRJv.woff2) format('woff2'), url(/notebooks/assets/inter-latin-ext-700-normal-TidjK2hL.woff) format('woff');
  unicode-range: U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF;
}
    /* inter-latin-700-normal */
    @font-face {
  font-family: 'Inter';
  font-style: normal;
  font-display: swap;
  font-weight: 700;
  src: url(/notebooks/assets/inter-latin-700-normal-Yt3aPRUw.woff2) format('woff2'), url(/notebooks/assets/inter-latin-700-normal-BLAVimhd.woff) format('woff');
  unicode-range: U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;
}
    /* inter-cyrillic-ext-400-italic */
    @font-face {
  font-family: 'Inter';
  font-style: italic;
  font-display: swap;
  font-weight: 400;
  src: url(/notebooks/assets/inter-cyrillic-ext-400-italic-CsfrDhJx.woff2) format('woff2'), url(/notebooks/assets/inter-cyrillic-ext-400-italic-xTUDxVF8.woff) format('woff');
  unicode-range: U+0460-052F,U+1C80-1C8A,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;
}
    /* inter-cyrillic-400-italic */
    @font-face {
  font-family: 'Inter';
  font-style: italic;
  font-display: swap;
  font-weight: 400;
  src: url(/notebooks/assets/inter-cyrillic-400-italic-CIUtULAL.woff2) format('woff2'), url(/notebooks/assets/inter-cyrillic-400-italic-DsJ3McxZ.woff) format('woff');
  unicode-range: U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;
}
    /* inter-greek-ext-400-italic */
    @font-face {
  font-family: 'Inter';
  font-style: italic;
  font-display: swap;
  font-weight: 400;
  src: url(/notebooks/assets/inter-greek-ext-400-italic-DgljI1UR.woff2) format('woff2'), url(/notebooks/assets/inter-greek-ext-400-italic-ByZcx49q.woff) format('woff');
  unicode-range: U+1F00-1FFF;
}
    /* inter-greek-400-italic */
    @font-face {
  font-family: 'Inter';
  font-style: italic;
  font-display: swap;
  font-weight: 400;
  src: url(/notebooks/assets/inter-greek-400-italic-SVIaMW7s.woff2) format('woff2'), url(/notebooks/assets/inter-greek-400-italic-C1OpWafJ.woff) format('woff');
  unicode-range: U+0370-0377,U+037A-037F,U+0384-038A,U+038C,U+038E-03A1,U+03A3-03FF;
}
    /* inter-vietnamese-400-italic */
    @font-face {
  font-family: 'Inter';
  font-style: italic;
  font-display: swap;
  font-weight: 400;
  src: url(/notebooks/assets/inter-vietnamese-400-italic-Ceaj4WUo.woff2) format('woff2'), url(/notebooks/assets/inter-vietnamese-400-italic-E-DnQMHp.woff) format('woff');
  unicode-range: U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;
}
    /* inter-latin-ext-400-italic */
    @font-face {
  font-family: 'Inter';
  font-style: italic;
  font-display: swap;
  font-weight: 400;
  src: url(/notebooks/assets/inter-latin-ext-400-italic-CGFCRmTM.woff2) format('woff2'), url(/notebooks/assets/inter-latin-ext-400-italic-DpQ6ZOoA.woff) format('woff');
  unicode-range: U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF;
}
    /* inter-latin-400-italic */
    @font-face {
  font-family: 'Inter';
  font-style: italic;
  font-display: swap;
  font-weight: 400;
  src: url(/notebooks/assets/inter-latin-400-italic-D1l0FflY.woff2) format('woff2'), url(/notebooks/assets/inter-latin-400-italic-BmFrN47l.woff) format('woff');
  unicode-range: U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;
}
    /* inter-cyrillic-ext-500-italic */
    @font-face {
  font-family: 'Inter';
  font-style: italic;
  font-display: swap;
  font-weight: 500;
  src: url(/notebooks/assets/inter-cyrillic-ext-500-italic-Bd19rs0I.woff2) format('woff2'), url(/notebooks/assets/inter-cyrillic-ext-500-italic-CjoSAfs0.woff) format('woff');
  unicode-range: U+0460-052F,U+1C80-1C8A,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;
}
    /* inter-cyrillic-500-italic */
    @font-face {
  font-family: 'Inter';
  font-style: italic;
  font-display: swap;
  font-weight: 500;
  src: url(/notebooks/assets/inter-cyrillic-500-italic-vob3PPp4.woff2) format('woff2'), url(/notebooks/assets/inter-cyrillic-500-italic-YH_3ZzEh.woff) format('woff');
  unicode-range: U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;
}
    /* inter-greek-ext-500-italic */
    @font-face {
  font-family: 'Inter';
  font-style: italic;
  font-display: swap;
  font-weight: 500;
  src: url(/notebooks/assets/inter-greek-ext-500-italic-CkCtILP9.woff2) format('woff2'), url(/notebooks/assets/inter-greek-ext-500-italic-BrEhXof8.woff) format('woff');
  unicode-range: U+1F00-1FFF;
}
    /* inter-greek-500-italic */
    @font-face {
  font-family: 'Inter';
  font-style: italic;
  font-display: swap;
  font-weight: 500;
  src: url(/notebooks/assets/inter-greek-500-italic-CpNnphWM.woff2) format('woff2'), url(/notebooks/assets/inter-greek-500-italic-DoOKiI6j.woff) format('woff');
  unicode-range: U+0370-0377,U+037A-037F,U+0384-038A,U+038C,U+038E-03A1,U+03A3-03FF;
}
    /* inter-vietnamese-500-italic */
    @font-face {
  font-family: 'Inter';
  font-style: italic;
  font-display: swap;
  font-weight: 500;
  src: url(/notebooks/assets/inter-vietnamese-500-italic-Ci6hLotD.woff2) format('woff2'), url(/notebooks/assets/inter-vietnamese-500-italic-BDm3lIJY.woff) format('woff');
  unicode-range: U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;
}
    /* inter-latin-ext-500-italic */
    @font-face {
  font-family: 'Inter';
  font-style: italic;
  font-display: swap;
  font-weight: 500;
  src: url(/notebooks/assets/inter-latin-ext-500-italic-6uvZyJeQ.woff2) format('woff2'), url(/notebooks/assets/inter-latin-ext-500-italic-O82l3e5v.woff) format('woff');
  unicode-range: U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF;
}
    /* inter-latin-500-italic */
    @font-face {
  font-family: 'Inter';
  font-style: italic;
  font-display: swap;
  font-weight: 500;
  src: url(/notebooks/assets/inter-latin-500-italic-CmxAJXy_.woff2) format('woff2'), url(/notebooks/assets/inter-latin-500-italic-BaBk7Nya.woff) format('woff');
  unicode-range: U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;
}
    /* inter-cyrillic-ext-600-italic */
    @font-face {
  font-family: 'Inter';
  font-style: italic;
  font-display: swap;
  font-weight: 600;
  src: url(/notebooks/assets/inter-cyrillic-ext-600-italic-La-to8Sa.woff2) format('woff2'), url(/notebooks/assets/inter-cyrillic-ext-600-italic-B1EMsN4Z.woff) format('woff');
  unicode-range: U+0460-052F,U+1C80-1C8A,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;
}
    /* inter-cyrillic-600-italic */
    @font-face {
  font-family: 'Inter';
  font-style: italic;
  font-display: swap;
  font-weight: 600;
  src: url(/notebooks/assets/inter-cyrillic-600-italic-BMNGqOVE.woff2) format('woff2'), url(/notebooks/assets/inter-cyrillic-600-italic-BS21fWqq.woff) format('woff');
  unicode-range: U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;
}
    /* inter-greek-ext-600-italic */
    @font-face {
  font-family: 'Inter';
  font-style: italic;
  font-display: swap;
  font-weight: 600;
  src: url(/notebooks/assets/inter-greek-ext-600-italic-BxS-O1qG.woff2) format('woff2'), url(/notebooks/assets/inter-greek-ext-600-italic-DCFZv-xn.woff) format('woff');
  unicode-range: U+1F00-1FFF;
}
    /* inter-greek-600-italic */
    @font-face {
  font-family: 'Inter';
  font-style: italic;
  font-display: swap;
  font-weight: 600;
  src: url(/notebooks/assets/inter-greek-600-italic-MPI_Frmw.woff2) format('woff2'), url(/notebooks/assets/inter-greek-600-italic-4pupcZ4S.woff) format('woff');
  unicode-range: U+0370-0377,U+037A-037F,U+0384-038A,U+038C,U+038E-03A1,U+03A3-03FF;
}
    /* inter-vietnamese-600-italic */
    @font-face {
  font-family: 'Inter';
  font-style: italic;
  font-display: swap;
  font-weight: 600;
  src: url(/notebooks/assets/inter-vietnamese-600-italic-BuG6-S9s.woff2) format('woff2'), url(/notebooks/assets/inter-vietnamese-600-italic-CKjJHBAp.woff) format('woff');
  unicode-range: U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;
}
    /* inter-latin-ext-600-italic */
    @font-face {
  font-family: 'Inter';
  font-style: italic;
  font-display: swap;
  font-weight: 600;
  src: url(/notebooks/assets/inter-latin-ext-600-italic-4pxPPAsx.woff2) format('woff2'), url(/notebooks/assets/inter-latin-ext-600-italic-DgI6rDWk.woff) format('woff');
  unicode-range: U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF;
}
    /* inter-latin-600-italic */
    @font-face {
  font-family: 'Inter';
  font-style: italic;
  font-display: swap;
  font-weight: 600;
  src: url(/notebooks/assets/inter-latin-600-italic-BJYrns_i.woff2) format('woff2'), url(/notebooks/assets/inter-latin-600-italic-CIYS91tl.woff) format('woff');
  unicode-range: U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;
}
    /* inter-cyrillic-ext-700-italic */
    @font-face {
  font-family: 'Inter';
  font-style: italic;
  font-display: swap;
  font-weight: 700;
  src: url(/notebooks/assets/inter-cyrillic-ext-700-italic-GPRkb3xU.woff2) format('woff2'), url(/notebooks/assets/inter-cyrillic-ext-700-italic-D3fKamtN.woff) format('woff');
  unicode-range: U+0460-052F,U+1C80-1C8A,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;
}
    /* inter-cyrillic-700-italic */
    @font-face {
  font-family: 'Inter';
  font-style: italic;
  font-display: swap;
  font-weight: 700;
  src: url(/notebooks/assets/inter-cyrillic-700-italic-Ppu1tTPz.woff2) format('woff2'), url(/notebooks/assets/inter-cyrillic-700-italic-CZrx1Xve.woff) format('woff');
  unicode-range: U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;
}
    /* inter-greek-ext-700-italic */
    @font-face {
  font-family: 'Inter';
  font-style: italic;
  font-display: swap;
  font-weight: 700;
  src: url(/notebooks/assets/inter-greek-ext-700-italic-5m0CTrl1.woff2) format('woff2'), url(/notebooks/assets/inter-greek-ext-700-italic-CO97m7Jb.woff) format('woff');
  unicode-range: U+1F00-1FFF;
}
    /* inter-greek-700-italic */
    @font-face {
  font-family: 'Inter';
  font-style: italic;
  font-display: swap;
  font-weight: 700;
  src: url(/notebooks/assets/inter-greek-700-italic-D5vwbaZX.woff2) format('woff2'), url(/notebooks/assets/inter-greek-700-italic-bD6OVWQz.woff) format('woff');
  unicode-range: U+0370-0377,U+037A-037F,U+0384-038A,U+038C,U+038E-03A1,U+03A3-03FF;
}
    /* inter-vietnamese-700-italic */
    @font-face {
  font-family: 'Inter';
  font-style: italic;
  font-display: swap;
  font-weight: 700;
  src: url(/notebooks/assets/inter-vietnamese-700-italic-BbJv01XC.woff2) format('woff2'), url(/notebooks/assets/inter-vietnamese-700-italic-BF_6wm_E.woff) format('woff');
  unicode-range: U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;
}
    /* inter-latin-ext-700-italic */
    @font-face {
  font-family: 'Inter';
  font-style: italic;
  font-display: swap;
  font-weight: 700;
  src: url(/notebooks/assets/inter-latin-ext-700-italic-DtYkv-XI.woff2) format('woff2'), url(/notebooks/assets/inter-latin-ext-700-italic-sscBbOod.woff) format('woff');
  unicode-range: U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF;
}
    /* inter-latin-700-italic */
    @font-face {
  font-family: 'Inter';
  font-style: italic;
  font-display: swap;
  font-weight: 700;
  src: url(/notebooks/assets/inter-latin-700-italic-BsEzapPQ.woff2) format('woff2'), url(/notebooks/assets/inter-latin-700-italic-QsoQop6F.woff) format('woff');
  unicode-range: U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;
}
    :root {
  --rrtheme-color: #ca4747;
}
    html,
body {
  display: flex;
  margin: 0;
  padding: 0;
  overflow-x: hidden;
  min-height: 100vh;
  flex-direction: column;
}
    html {
  background-color: var(--rrtheme-color);
}
    body {
  max-width: 100%;
}
    .container {
  padding: 50px 20px;
  flex: 1;
  background-color: var(--theme-background);
}
    nav {
  padding: 2px;
  display: block;
  background: var(--rrtheme-color);
  font-family: "Open Sans", sans-serif;
  font-size: 16px;
  -webkit-font-smoothing: auto;
}
    nav .menu__item {
  padding: 5px 8px;
  font-size: 0.9em;
  text-shadow: 0 0 1px #000;
}
    nav .menu__item[href] {
  color: white;
}
    a[href] {
  color: var(--rrtheme-color);
  text-decoration: none;
}
    main {
  max-width: var(--max-width);
  margin: auto;
  width: 100%;
  padding-bottom: 100px;
}
    main h1,
main h2,
main h3,
main h4,
main h5,
main h6 {
  font-family: "Open Sans", sans-serif;
  -webkit-font-smoothing: auto;
}
    main summary {
  cursor: pointer;
}
    main details {
  margin: 1.5em 0;
}
    main details[open] {
  border-left: 3px solid #ccc;
  padding-left: 1em;
}
    main details[open] > summary {
  margin-left: -1em;
  padding-left: 1em;
  border-left: 3px solid transparent;
  margin-bottom: 0.5em;
}
    main figure {
  width: fit-content;
  margin: 4em auto;
  max-width: 100%;
}
    main figure img {
  display: block;
}
    main figure figcaption {
  width: 0;
  min-width: 100%;
}
    main figure.fluid {
  width: auto;
}
    main figure.fluid figcaption {
  width: auto;
  min-width: 0;
}
    hr {
  margin: 3em 0;
}
    header {
  color: white;
  font-weight: 200;
  width: 100%;
  margin: 0 auto;
  background-color: var(--rrtheme-color);
  text-align: center;
  padding: 80px 20px;
  position: relative;
  font-family: "Open Sans", sans-serif;
  -webkit-font-smoothing: auto;
  box-sizing: border-box;
}
    header h1 {
  max-width: 640px;
  margin-left: auto;
  margin-right: auto;
}
    header .author,
header time {
  color: inherit;
  font-family: inherit;
  font-style: normal;
  font-weight: inherit;
}
    header h1,
header p,
header a[href] {
  color: white;
}
    header .byline {
  margin-top: 20px;
  margin-bottom: 20px;
}
    header h1 {
  font-size: 34px;
  font-weight: 200;
}
    @media (max-width: 640px) {
  header {
    text-align: left;
  }
}
    main h1,
main h2,
main h3,
main h4,
main h5,
main h6 {
  font-weight: 400;
  margin-bottom: 1em;
}
    main h2 {
  margin-top: 3em;
}
    main h3 {
  margin-top: 2em;
}
    main figcaption {
  margin-top: 1em;
}
    main .katex-display {
  overflow-x: scroll;
  padding-top: 8px;
  padding-bottom: 8px;
}
    .comments_meta {
  display: flex;
  flex-direction: row;
  justify-content: space-between;
}
    .comments {
  padding: 30px 20px 0;
  font-family: var(--sans-serif);
}
    .comments_count {
  font-weight: 700;
}
    .comments_loading {
  display: flex;
  flex-direction: column;
  align-items: center;
  margin-bottom: 10px;
  color: var(--theme-foreground-muted);
}
    .comments .spinner {
  margin-bottom: 5px;
}
    .comment[href] {
  display: flex;
  flex-direction: column;
  border: 1px solid var(--theme-foreground-faintest);
  border-radius: 5px;
  margin: 15px 0;
  padding: 15px;
  color: var(--theme-foreground);
  text-decoration: none;
}
    .comment[href]:visited {
  color: var(--theme-foreground);
}
    .comment[href]:hover {
  border-color: var(--theme-foreground-muted);
  text-decoration: none;
}
    .comment[href]:last-child {
  margin-bottom: 0;
}
    .comment_meta {
  display: flex;
  flex-direction: row;
  align-items: flex-start;
  justify-content: space-between;
  gap: 10px;
  font-size: 13px;
}
    .comment_ago {
  color: var(--theme-foreground-muted);
}
    .comment_ago:visited {
  color: var(--theme-foreground-muted);
}
    .comment_user {
  display: flex;
  flex-direction: row;
  align-items: center;
  justify-content: flex-start;
  color: var(--theme-foreground);
  text-decoration: none;
  font-family: var(--sans-serif);
  font-weight: 700;
}
    .comment_user:visited {
  color: var(--theme-foreground);
}
    .comment_commenter {
  font-weight: 400;
  color: var(--theme-foreground-muted);
}
    .comment_content p:first-child {
  margin-top: 10px;
}
    .comment_content p:last-child {
  margin-bottom: 0;
}
    .comment_user img {
  margin-right: 10px;
  border-radius: 2px;
  border: 1px solid var(--theme-foreground-faintest);
  width: 30px;
  height: 30px;
}
    .threebody{width:60px;height:60px;position:relative}
    .threebody-o{position:absolute;top:50%;left:50%}
    .threebody-o>div{position:absolute;animation:3s infinite linear}
    .threebody-o>div:after{content:'';position:absolute;width:12px;height:12px;border-radius:100%;transform:translate(-50%,-50%);background:inherit}
    .threebody-o>div:nth-child(1){background:#a0d323;animation-name:threebody-0}
    .threebody-o>div:nth-child(2){background:#23a0d3;animation-name:threebody-1}
    .threebody-o>div:nth-child(3){background:#d323a0;animation-name:threebody-2}
    @keyframes threebody-0{from{transform:rotate(0)translatex(0.01px)rotate(0)translatex(0.01px)rotate(0)translatex(0.03px)rotate(0)translatex(0.07px)rotate(0)translatex(0.16px)rotate(0)translatex(0.41px)rotate(0)translatex(1.3px)rotate(0)translatex(8px)rotate(0)translatex(-17px)rotate(0)translatex(0.21px)rotate(0)translatex(0.01px)}to{transform:rotate(-31turn)translatex(0.01px)rotate(4turn)translatex(0.01px)rotate(4turn)translatex(0.03px)rotate(4turn)translatex(0.07px)rotate(4turn)translatex(0.16px)rotate(4turn)translatex(0.41px)rotate(4turn)translatex(1.3px)rotate(4turn)translatex(8px)rotate(4turn)translatex(-17px)rotate(4turn)translatex(0.21px)rotate(8turn)translatex(0.01px)}}
    @keyframes threebody-1{from{transform:rotate(0)translatex(-0.01px)rotate(0)translatex(0.01px)rotate(0)translatex(-0.03px)rotate(0)translatex(0.07px)rotate(0)translatex(-0.16px)rotate(0)translatex(0.41px)rotate(0)translatex(-1.3px)rotate(0)translatex(8px)rotate(0)translatex(17px)rotate(0)translatex(0.21px)rotate(0)translatex(0.01px)}to{transform:rotate(-31turn)translatex(-0.01px)rotate(4turn)translatex(0.01px)rotate(4turn)translatex(-0.03px)rotate(4turn)translatex(0.07px)rotate(4turn)translatex(-0.16px)rotate(4turn)translatex(0.41px)rotate(4turn)translatex(-1.3px)rotate(4turn)translatex(8px)rotate(4turn)translatex(17px)rotate(4turn)translatex(0.21px)rotate(8turn)translatex(0.01px)}}
    @keyframes threebody-2{from{transform:rotate(0)translatex(-0.01px)rotate(0)translatex(-0.03px)rotate(0)translatex(-0.13px)rotate(0)translatex(-0.81px)rotate(0)translatex(-16px)rotate(0)translatex(-0.42px)rotate(0)translatex(-0.02px)}to{transform:rotate(-35turn)translatex(-0.01px)rotate(8turn)translatex(-0.03px)rotate(8turn)translatex(-0.13px)rotate(8turn)translatex(-0.81px)rotate(8turn)translatex(-16px)rotate(8turn)translatex(-0.42px)rotate(8turn)translatex(-0.02px)}}
    footer {
  background: var(--rrtheme-color);
  color: white;
  font-family: "Open Sans", sans-serif;
  padding: 30px 20px;
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 20px;
}
    .footer__attrib {
}
    .footer__rss[href],
.footer__rss[href]:visited {
  color: white;
  display: flex;
  align-items: center;
  gap: 4px;
}
    .footer__rss:hover {
  opacity: 0.8;
}
    .footer__rss .icon {
  width: 14px;
  height: 14px;
}
    .index {
  padding: 0;
  margin: 0 auto;
  max-width: 1200px;
  list-style-type: none;
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
  gap: 24px;
}
    .index__item {
  margin: 0;
  border-radius: 8px;
  overflow: hidden;
  background: #f8f8f8;
  border: 1px solid rgba(0, 0, 0, 0.06);
  transition: transform 0.15s ease, box-shadow 0.15s ease;
  cursor: pointer;
}
    .index__item:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}
    .index__link {
  display: block;
  text-decoration: none;
  color: inherit;
}
    .index__image-container {
  aspect-ratio: 1200 / 630;
  overflow: hidden;
  background: linear-gradient(135deg, #e8e8e8 0%, #d8d8d8 100%);
}
    .index__image {
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: block;
}
    .index__placeholder {
  width: 100%;
  height: 100%;
  background: linear-gradient(135deg, #eee 0%, #ddd 50%, #ccc 100%);
  position: relative;
}
    .index__placeholder::after {
  content: '';
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 48px;
  height: 48px;
  border: 3px solid #bbb;
  border-radius: 50%;
  opacity: 0.5;
}
    .index__content {
  padding: 16px;
}
    .index__title {
  font-family: "Open Sans", sans-serif;
  font-weight: 400;
  font-size: 15px;
  line-height: 1.4;
  margin: 0 0 6px 0;
  color: #333;
}
    .index__title-link {
  color: inherit;
  text-decoration: none;
}
    .index__item:hover .index__title-link {
  color: var(--rrtheme-color);
  text-decoration: underline;
}
    .index__meta {
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  gap: 6px;
}
    .index__date {
  font-family: "Open Sans", sans-serif;
  font-size: 12px;
  color: #888;
  text-transform: uppercase;
}
    .index__tags {
  display: flex;
  flex-wrap: wrap;
  gap: 4px;
}
    .index__tag {
  font-family: "Open Sans", sans-serif;
  font-size: 10px;
  font-weight: 600;
  color: #666;
  background: #e8e8e8;
  padding: 2px 6px;
  border-radius: 3px;
  text-transform: uppercase;
  letter-spacing: 0.02em;
  text-decoration: none;
  cursor: pointer;
  transition: background-color 0.15s ease, color 0.15s ease;
}
    .index__tag:hover {
  background: #d0d0d0;
  color: #444;
}
    a.index__tag,
a.index__tag:visited,
a.index__tag:active {
  color: #666;
}
    .index__active-filter {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 10px 14px;
  background: #f5f5f5;
  border: 1px solid rgba(0, 0, 0, 0.08);
  border-radius: 6px;
}
    .index__filter-label {
  font-family: "Open Sans", sans-serif;
  font-size: 13px;
  color: #666;
}
    .index__filter-tag {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  font-family: "Open Sans", sans-serif;
  font-size: 12px;
  font-weight: 600;
  color: #fff;
  background: #555;
  padding: 4px 8px;
  border-radius: 4px;
  text-transform: uppercase;
  letter-spacing: 0.02em;
}
    .index__filter-remove,
.index__filter-remove:visited,
.index__filter-remove:active {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 16px;
  height: 16px;
  font-size: 16px;
  line-height: 1;
  color: #fff;
  text-decoration: none;
  opacity: 0.7;
  transition: opacity 0.15s ease;
}
    .index__filter-remove:hover {
  color: #fff;
  opacity: 1;
}
    .resource-links {
  display: flex;
  gap: 1rem;
  justify-content: center;
}
    .resource-link {
  vertical-align: middle;
}
    .resource-link .icon {
  position: relative;
  top: 2px;
  width: 15px;
}
    /* Index controls (filter + view toggle) */
    .index-controls {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 16px;
  max-width: 1200px;
  margin-left: auto;
  margin-right: auto;
}
    .index-view-toggle {
  display: flex;
  gap: 4px;
}
    .index-view-btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: 6px 8px;
  border: 1px solid #ddd;
  background: #fff;
  cursor: pointer;
  color: #999;
  border-radius: 4px;
  transition: all 0.15s ease;
}
    .index-view-btn svg {
  display: block;
}
    .index-view-btn:hover {
  border-color: #ccc;
  color: #666;
}
    .index-view-btn.active {
  background: #f0f0f0;
  border-color: #ccc;
  color: #333;
}
    /* Description (hidden in grid, shown in list) */
    .index__description {
  display: none;
  font-size: 14px;
  line-height: 1.5;
  color: #666;
  margin: 8px 0 0 0;
}
    /* List view */
    .index--list {
  display: flex;
  flex-direction: column;
  gap: 16px;
  max-width: 800px;
}
    .index--list .index__item {
  display: flex;
  flex-direction: row;
  align-items: stretch;
  border-radius: 6px;
  border: 1px solid rgba(0, 0, 0, 0.05);
}
    .index--list .index__image-container {
  flex-shrink: 0;
  width: 180px;
}
    .index--list .index__content {
  flex: 1;
  padding: 12px 16px;
}
    .index--list .index__title {
  font-size: 17px;
  margin-bottom: 4px;
}
    .index--list .index__description {
  display: block;
}
    @media(max-width: 640px) {
  .index {
    grid-template-columns: 1fr;
    gap: 16px;
  }
  /* Hide view toggle on narrow screens - always show grid */
  .index-view-toggle {
    display: none;
  }
  /* Force grid view styles even if index--list class is present */
  .index--list {
    display: grid;
    grid-template-columns: 1fr;
    gap: 16px;
    max-width: none;
  }
  .index--list .index__item {
    display: block;
    flex-direction: unset;
    align-items: unset;
    border-radius: 8px;
    border: 1px solid rgba(0, 0, 0, 0.06);
  }
  .index--list .index__image-container {
    width: 100%;
    flex-shrink: unset;
  }
  .index--list .index__content {
    flex: unset;
    padding: 16px;
  }
  .index--list .index__title {
    font-size: 15px;
    margin: 0 0 6px 0;
  }
  .index--list .index__description {
    display: none;
  }
  .resource-links {
    justify-content: flex-start;
  }
}
    /* Expandable component styles */
    .expandable-container {
  position: relative;
  width: 100%;
}
    .expandable-content {
  position: relative;
  display: inline-block;
  z-index: 1;
}
    .expandable-content.expanded {
  background: var(--theme-background);
}
    .expandable-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.5);
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.2s ease;
  z-index: 9998;
}
    .expandable-toggle {
  position: absolute;
  width: 28px;
  height: 28px;
  border: none;
  border-radius: 4px;
  background: rgba(255, 255, 255, 0.9);
  color: var(--theme-foreground-muted, #666);
  font-size: 16px;
  cursor: pointer;
  z-index: 1000;
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.6);
  transition: background 0.2s ease, box-shadow 0.2s ease;
}
    .expandable-toggle:hover {
  background: rgba(255, 255, 255, 1);
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.3);
}
    /* Floating controls panel */
    .expandable-controls-panel {
  position: fixed;
  z-index: 10000;
  background: var(--theme-background);
  border-radius: 8px;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
  overflow: hidden;
  max-width: min(360px, calc(100vw - 32px));
  max-height: calc(100vh - 100px);
}
    .expandable-controls-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 5px 10px;
  background: var(--theme-background-alt, #f5f5f5);
  border-bottom: 1px solid var(--theme-foreground-faintest, #e0e0e0);
  cursor: move;
  user-select: none;
  font-family: system-ui, -apple-system, sans-serif;
  font-size: 12px;
  font-weight: 500;
  color: var(--theme-foreground-muted, #555);
}
    .expandable-controls-toggle {
  border: none;
  background: none;
  cursor: pointer;
  font-size: 12px;
  color: var(--theme-foreground-muted, #666);
  padding: 4px 8px;
  border-radius: 4px;
  transition: background 0.15s ease;
}
    .expandable-controls-toggle:hover {
  background: var(--theme-foreground-faintest, rgba(0, 0, 0, 0.1));
}
    .expandable-controls-content {
  padding: 12px;
  overflow-y: auto;
  max-height: calc(100vh - 200px);
  display: flex;
  flex-direction: column;
  gap: 4px;
}
    .expandable-controls-content details {
  margin: 4px 0;
}
    /* SDSS controls styling */
    .sdss-controls {
  max-width: 100%;
}
    .sdss-controls > div[id^="scope-"] {
  width: min(100%, 500px) !important;
}
    .sdss-controls .range {
  display: flex;
  align-items: center;
  gap: 8px;
}
    .sdss-controls .range-slider {
  flex: 1 1 auto;
}
    .sdss-controls .range-output {
  flex: 0 0 auto;
  min-width: 75px;
  text-align: right;
  font-variant-numeric: tabular-nums;
}
  </style>
  <style> main { max-width: 640px; }</style>
<meta name="generator" content="Observable Notebook Kit v1.5.0"><title>Selecting the Right Opacity for 2D Point Clouds</title>  <script type="module" crossorigin src="/notebooks/assets/index-BSUxRMtb.js"></script>
  <link rel="modulepreload" crossorigin href="/notebooks/assets/index-ByB2dbry.js">
</head>
<body>
  <nav class="menu">
    <a class="menu__item" href="/">rreusser.github.io</a>
    <a class="menu__item" href="/notebooks/">notebooks</a>
    <a class="menu__item" href="/sketches/">sketches</a>
    <a class="menu__item" href="/trains-and-trails/">running</a>
  </nav>
  <header>
    <h1>Selecting the Right Opacity for 2D Point Clouds</h1>
    <div class="byline">
      <address class="author"><a rel="author" href="https://rreusser.github.io">Ricky Reusser</a></address>
      <time pubdate="" datetime="20201208">December 8, 2020</time>
    </div>
    <div class="resource-links">
        <a href="https://observablehq.com/@rreusser/selecting-the-right-opacity-for-2d-point-clouds" class="resource-link">
          <svg class="icon" viewBox="0 0 24 24" fill="currentColor">
            <circle cx="12" cy="12" r="10" fill="white"></circle>
            <path d="M9 7 l 8 5 -8 5 V10z" fill="#c44"></path>
          </svg>
          Live notebook
        </a>
        <a href="https://github.com/rreusser/notebooks/tree/main/src/point-cloud-point-opacity/index.html" class="resource-link">
          <svg class="icon" viewBox="0 0 24 24" fill="currentColor">
            <path d="M12 .5C5.65.5.5 5.65.5 12a11.5 11.5 0 0 0 7.84 10.93c.57.11.78-.25.78-.56v-2.1c-3.19.7-3.86-1.54-3.86-1.54-.52-1.34-1.26-1.7-1.26-1.7-1.03-.7.08-.69.08-.69 1.14.08 1.74 1.17 1.74 1.17 1.02 1.75 2.67 1.24 3.32.95.1-.74.4-1.24.72-1.53-2.55-.29-5.23-1.28-5.23-5.72 0-1.26.45-2.29 1.17-3.09-.12-.29-.51-1.46.11-3.05 0 0 .96-.31 3.14 1.18a10.92 10.92 0 0 1 2.86-.38c.97 0 1.94.13 2.86.38 2.18-1.49 3.14-1.18 3.14-1.18.62 1.59.23 2.76.11 3.05.73.8 1.17 1.83 1.17 3.09 0 4.45-2.68 5.43-5.23 5.72.41.35.78 1.05.78 2.12v3.14c0 .31.21.67.79.56A11.5 11.5 0 0 0 23.5 12C23.5 5.65 18.35.5 12 .5Z"></path>
          </svg>
          View source
        </a>
    </div>
  </header>
  <div class="container">

    <main><div id="cell-1" class="observablehq observablehq--cell"><div><p>This notebook is a response to the question from <a href="https://benschmidt.org">Benjamin Schmidt</a>s notebook, <a href="https://observablehq.com/@bmschmidt/dot-density-election-maps-with-webgl">Dot-density election maps with Webgl</a>. Benjamin points out in the section <strong>Dynamic sizes and opacities</strong>,</p>
<blockquote>
For this to look good, the opacity and size needs to change with the zoom level. See my notes on the right way to increase point sizes on zoom here.. It seems clear that opacity needs a similar strategy, but I don't yet know what that formula should be.
</blockquote>
<p>Ive run into this so many times, and its agonizing every single time! My goal in this notebook is to hopefully just answer the question, <em>what should the point opacity be when you render a lot of points</em>?</p>
<p>Please do note: <em>the best answer does not involve directly drawing millions of points of data at the same time</em>. Its unlikely youre actually processing that much information at one time, whether thats because youre only looking at a small subset or because youre looking at aggregate statistics like the density. There are lots of ways to extract meaning from large datasets; this notebook just happens to concern itself with the particular case where you do, for a variety of legitimate reasons, want to directly render many points.</p>
<p><em><strong>Update</strong></em>: Kari Lavikka has <a href="https://twitter.com/KariLavikka/status/1335928770423910400">contributed a wonderful SDF fix</a> for varying the point opacity at the edge to accomplish better antialiasing.</p>
</div></div><div id="cell-2" class="observablehq observablehq--cell"><div><h2 id="first-css-versus-device-pixels" tabindex="-1"><a href="#first-css-versus-device-pixels">First, CSS versus device pixels</a></h2>
<p>First, lets recall the difference between <a href="https://developer.mozilla.org/en-US/docs/Glossary/CSS_pixel"><em>CSS pixels</em></a> and <em>device pixels</em>. A single CSS pixel corresponds to a nicely sized single dot on a screen, as seen by a human. Until retina displays became common, there was generally no confusion and a pixel was a pixel. In a retina display with a <em>device pixel ratio</em> of 2, however, each CSS pixel corresponds to a block of  <em>device pixels</em>.</p>
<p>Therefore, so that WebGL points have a consistent CSS pixel size for everyone, we must multiply our `gl_PointSize` by the pixel ratio (which we may select slightly differently than the true <em>device</em> pixel ratio in case we want to downsample the canvas resolution just a bit and help things render a bit more quickly).</p>
</div></div><div id="cell-3" class="observablehq observablehq--cell"><div><h2 id="selecting-a-point-size" tabindex="-1"><a href="#selecting-a-point-size">Selecting a point size</a></h2>
<p>We start with an arbitrary function to select a point size. The function below implements a possible function with the following rules:</p>
<ul>
<li>We select a point size in y-axis units.</li>
<li>We apply a the minimum and maximum size, specified in CSS pixels</li>
</ul>
<p>Remember that these rules are arbitrary and the opacity function well come up with below will happily use whatever size we give it.</p>
</div></div><div id="cell-4" class="observablehq observablehq--cell"></div><pre data-language="ts"><code class="language-ts"><span class="tok-comment">// Compute the point size, in device pixels</span>
<span class="tok-keyword">function</span> <span class="tok-definition">pointSizeDevicePixels</span>(<span class="tok-definition">ctx</span>, <span class="tok-definition">props</span>) {
  <span class="tok-comment">// Get the y range from the orthographic view matrix</span>
  <span class="tok-keyword">const</span> <span class="tok-definition">yAxisRange</span> = <span class="tok-literal">2.0</span> / <span class="tok-variable">ctx</span>.<span class="tok-definition">view</span>[<span class="tok-literal">5</span>];

  <span class="tok-comment">// The height as a fraction of the current y range, then converted to device pixels</span>
  <span class="tok-keyword">const</span> <span class="tok-definition">heightFraction</span> = <span class="tok-variable">props</span>.<span class="tok-definition">pointYAxisSize</span> / <span class="tok-variable">yAxisRange</span>;
  <span class="tok-keyword">const</span> <span class="tok-definition">deviceSize</span> = <span class="tok-variable">heightFraction</span> * <span class="tok-variable">ctx</span>.<span class="tok-definition">viewportHeight</span>;

  <span class="tok-keyword">return</span> <span class="tok-variable">clamp</span>(
    <span class="tok-variable">deviceSize</span>,
    <span class="tok-variable">props</span>.<span class="tok-definition">pointScreenSize</span>[<span class="tok-literal">0</span>] * <span class="tok-variable">ctx</span>.<span class="tok-definition">pixelRatio</span>,
    <span class="tok-variable">props</span>.<span class="tok-definition">pointScreenSize</span>[<span class="tok-literal">1</span>] * <span class="tok-variable">ctx</span>.<span class="tok-definition">pixelRatio</span>
  );
}

<span class="tok-keyword">function</span> <span class="tok-definition">clamp</span>(<span class="tok-definition">value</span>, <span class="tok-definition">min</span>, <span class="tok-definition">max</span>) {
  <span class="tok-keyword">return</span> <span class="tok-variable">Math</span>.<span class="tok-definition">max</span>(<span class="tok-variable">min</span>, <span class="tok-variable">Math</span>.<span class="tok-definition">min</span>(<span class="tok-variable">max</span>, <span class="tok-variable">value</span>));
}</code></pre><div id="cell-5" class="observablehq observablehq--cell"><div><h2 id="computing-the-opacity" tabindex="-1"><a href="#computing-the-opacity">Computing the opacity</a></h2>
<p>Now we get to the fun part. If we view drawing points as depositing opacity, then in order to produce a constant look, we desire some consistent average fill of opacity per screen area. Lets call this fill density  and measure it in units of , where  corresponds to a single full-opacity pixel.</p>
<p>Consider a single -pixel rasterized point with opacity . Well assume for simplicity that all of our pixels have the same size and opacity. Then the total fill  of this point is  and the total fill  of  such rasterized points is</p>
<p>If we have a canvas of size  device pixels, then average fill is</p>
<p>Solving for , we obtain</p>
<p>As we zoom in or out, consider that we see a smaller or larger fraction of the points. To account for this, we finally scale the density by the zoom factors  and  where  and  are the initial axis dimensions while  and  are the current axis dimensions. Thus our final expression for opacity is</p>
<p>Note: One might think to simplify this using  instead of  to eliminate aspect ratio dependence. However, when the plot maintains equal scaling in data units per pixel (aspect ratio = 1), resizing the container causes the data domain to adjust. The  form correctly accounts for this and keeps opacity stable across resize operations.</p>
<p>Finally, we do some additional bookeeping in the function below to switch over to adjusting the opacity rather than the point size once we reach the minimum point size with respect to device pixels. These adjustments work together with corresponding modifications in the vertex and fragment shaders in the <a href="#drawPoints">`drawPoints`</a> function below. The additional factors are:</p>
<ul>
<li>If we render circles rather than squares, adjust the opacity to account for the fact that the unit circle only covers 78% of the unit square.</li>
<li>If the point size is smaller than the minimum permissible size, we multiply opacity by the square of the ratio between desired size and actual size so that we accumulate the correct amount of fill.</li>
</ul>
</div></div><div id="cell-6" class="observablehq observablehq--cell"></div><pre data-language="ts"><code class="language-ts"><span class="tok-keyword">function</span> <span class="tok-definition">pointOpacity</span>(<span class="tok-definition">ctx</span>, <span class="tok-definition">props</span>) {
  <span class="tok-comment">// We use the above function for the point size. This means we can plug</span>
  <span class="tok-comment">// in any function, even nonlinear, as long as we compute the opacity</span>
  <span class="tok-comment">// correctly.</span>
  <span class="tok-keyword">var</span> <span class="tok-definition">p</span> = <span class="tok-variable">pointSizeDevicePixels</span>(<span class="tok-variable">ctx</span>, <span class="tok-variable">props</span>);

  <span class="tok-comment">// Compute the plot's x and y range from the orthographic view matrix</span>
  <span class="tok-keyword">const</span> <span class="tok-definition">X</span> = <span class="tok-literal">2.0</span> / <span class="tok-variable">ctx</span>.<span class="tok-definition">view</span>[<span class="tok-literal">0</span>];
  <span class="tok-keyword">const</span> <span class="tok-definition">Y</span> = <span class="tok-literal">2.0</span> / <span class="tok-variable">ctx</span>.<span class="tok-definition">view</span>[<span class="tok-literal">5</span>];
  <span class="tok-keyword">const</span> <span class="tok-definition">X0</span> = <span class="tok-variable">props</span>.<span class="tok-definition">initialAxisDimensions</span>[<span class="tok-literal">0</span>];
  <span class="tok-keyword">const</span> <span class="tok-definition">Y0</span> = <span class="tok-variable">props</span>.<span class="tok-definition">initialAxisDimensions</span>[<span class="tok-literal">1</span>];

  <span class="tok-comment">// Viewport size, in device pixels</span>
  <span class="tok-keyword">const</span> <span class="tok-definition">W</span> = <span class="tok-variable">ctx</span>.<span class="tok-definition">viewportWidth</span>;
  <span class="tok-keyword">const</span> <span class="tok-definition">H</span> = <span class="tok-variable">ctx</span>.<span class="tok-definition">viewportHeight</span>;

  <span class="tok-comment">// Number of points</span>
  <span class="tok-keyword">const</span> <span class="tok-definition">N</span> = <span class="tok-variable">props</span>.<span class="tok-definition">N</span>;

  <span class="tok-keyword">let</span> <span class="tok-definition">alpha</span> = ((<span class="tok-variable">props</span>.<span class="tok-definition">rho</span> * <span class="tok-variable">W</span> * <span class="tok-variable">H</span>) / (<span class="tok-variable">N</span> * <span class="tok-variable">p</span> * <span class="tok-variable">p</span>)) * (<span class="tok-variable">X0</span> / <span class="tok-variable">X</span>) * (<span class="tok-variable">Y0</span> / <span class="tok-variable">Y</span>);

  <span class="tok-comment">// If it's a circle, only (pi r^2) of the unit square is filled so we</span>
  <span class="tok-comment">// slightly increase the alpha accordingly.</span>
  <span class="tok-variable">alpha</span> *= <span class="tok-variable">props</span>.<span class="tok-definition">circularPoints</span> ? <span class="tok-literal">1.0</span> / (<span class="tok-literal">0.25</span> * <span class="tok-variable">Math</span>.<span class="tok-definition">PI</span>) : <span class="tok-literal">1.0</span>;

  <span class="tok-comment">// If the pixels shrink below the minimum permitted size, then we adjust</span>
  <span class="tok-comment">// the opacity instead and apply clamping of the point size in the vertex</span>
  <span class="tok-comment">// shader. Note that we add 0.5 since we slightly inrease the size of</span>
  <span class="tok-comment">// points during rendering to accommodate SDF-style antialiasing.</span>
  <span class="tok-keyword">const</span> <span class="tok-definition">clampedPointDeviceSize</span> =
    <span class="tok-variable">Math</span>.<span class="tok-definition">max</span>(<span class="tok-variable">props</span>.<span class="tok-definition">minimumPointDeviceSize</span>, <span class="tok-variable">p</span>) + <span class="tok-literal">0.5</span>;

  <span class="tok-comment">// We square this since we're concerned with the ratio of *areas*.</span>
  <span class="tok-variable">alpha</span> *= <span class="tok-variable">Math</span>.<span class="tok-definition">pow</span>(<span class="tok-variable">p</span> / <span class="tok-variable">clampedPointDeviceSize</span>, <span class="tok-literal">2.0</span>);

  <span class="tok-comment">// And finally, we clamp to the range [0, 1]. We should really clamp this</span>
  <span class="tok-comment">// to 1 / precision on the low end, depending on the data type of the</span>
  <span class="tok-comment">// destination so that we never render *nothing*.</span>
  <span class="tok-keyword">return</span> <span class="tok-variable">clamp</span>(<span class="tok-variable">alpha</span>, <span class="tok-literal">0.0</span>, <span class="tok-literal">1.0</span>);
}</code></pre><div id="cell-7" class="observablehq observablehq--cell"><div><h2 id="additional-considerations" tabindex="-1"><a href="#additional-considerations">Additional considerations</a></h2>
<h3 id="data-types" tabindex="-1"><a href="#data-types">Data types</a></h3>
<p>There are a few extra considerations. First, the data type. If we render ten million points, the opacity of each point may be tiny, perhaps just . For RGBA channels of type `uint8`, the smallest representable opacity is . If our opacities are barely representable, we expect heavy quantization of the colors at best and perhaps nothing on the screen at worst. A simple solution is to render to an offscreen `float16` or `float32` framebuffer, then transfer the colors to the screen.</p>
<h3 id="gamma" tabindex="-1"><a href="#gamma">Gamma</a></h3>
<p>Whether or not we render to a framebuffer with higher precision, since weve computed our colors in a linear colorspace by simply adding them up, we should convert to sRGB by applying gamma as a separate step. The input color from the color picker is in sRGB, so we convert it to linear for blending, then convert the accumulated result back to sRGB for display. Ive used the standard sRGB gamma approximation of 2.2.</p>
<h3 id="antialiasing" tabindex="-1"><a href="#antialiasing">Antialiasing</a></h3>
<p><em><strong>Update</strong></em>: I wasnt thinking! Thanks to <a href="https://twitter.com/KariLavikka">Kari Lavikka</a> for <a href="https://observablehq.com/@tuner/selecting-the-right-opacity-for-2d-point-clouds-with-sdf-ant">varying the opacity to accomplish antialiasing</a> and also clamping the minimum point size to a single pixel and then varying the opacity instead.</p>
<h3 id="blending" tabindex="-1"><a href="#blending">Blending</a></h3>
<p>Ive used additive blending to overlay the points, with one exception. Since the points accumulate <em>toward black from white</em>, Ive used `reverse subtract` with the color inverted so that we start with 1.0 and accumulate toward 0.0. This is equivalent to rendering the inverted image and then un-inverting at the end. <a href="https://www.andersriggelsen.dk/glblendfunc.php">This tool helps me reason through it</a>.</p>
<h3 id="rendering-optimization" tabindex="-1"><a href="#rendering-optimization">Rendering optimization</a></h3>
<p><a href="https://twitter.com/DimaYv/status/1335914283406856192">@dy has pointed out based on his regl-scatter2d module</a> that sorting the points, either with a space-filling curve or even just along a single axis, can also have a significant performance impact.</p>
<h3 id="axes-and-interactions" tabindex="-1"><a href="#axes-and-interactions">Axes and interactions</a></h3>
<p>Finally, Ive used D3 for the linear scales and zoom interaction. This notebook uses the same zooming and Plot-based axis rendering approach as other notebooks in this collection.</p>
</div></div><div id="cell-8" class="observablehq observablehq--cell"><div><h2 id="observations" tabindex="-1"><a href="#observations">Observations</a></h2>
<p>Adjust the sliders below and observe that the plot maintains its appearance as you zoom or as the number of points or even window size changes. Also observe the wild colors if you zoom out with a `uint8` framebuffer.</p>
</div></div><div id="cell-100" class="observablehq observablehq--cell"></div><div id="cell-101" class="observablehq observablehq--cell"></div><div id="cell-102" class="observablehq observablehq--cell"></div><div id="cell-103" class="observablehq observablehq--cell"></div><div id="cell-104" class="observablehq observablehq--cell"></div><div id="cell-105" class="observablehq observablehq--cell"></div><div id="cell-200" class="observablehq observablehq--cell"></div><div id="cell-300" class="observablehq observablehq--cell"><div><h2 id="web-gl-implementation" tabindex="-1"><a href="#web-gl-implementation">WebGL Implementation</a></h2>
</div></div><div id="cell-301" class="observablehq observablehq--cell"></div><div id="cell-302" class="observablehq observablehq--cell"></div><div id="cell-303" class="observablehq observablehq--cell"></div><pre data-language="ts"><code class="language-ts"><span class="tok-keyword">const</span> <span class="tok-definition">GLSL_SRGB_GAMMA</span> = <span class="tok-string">`</span>
<span class="tok-string">  const float SRGB_GAMMA = 2.2;</span>
<span class="tok-string">  vec3 linearToSRGB(vec3 rgb) {</span>
<span class="tok-string">    return pow(clamp(rgb, vec3(0), vec3(1)), vec3(1.0 / SRGB_GAMMA));</span>
<span class="tok-string">  }`</span>;

<span class="tok-keyword">const</span> <span class="tok-definition">copyToScreen</span> = <span class="tok-variable">regl</span>({
  <span class="tok-definition">vert</span>: <span class="tok-string">`</span>
<span class="tok-string">    precision highp float;</span>
<span class="tok-string">    attribute vec2 xy;</span>
<span class="tok-string">    void main () {</span>
<span class="tok-string">      gl_Position = vec4(xy, 0, 1);</span>
<span class="tok-string">    }`</span>,
  <span class="tok-definition">frag</span>: <span class="tok-string">`</span>
<span class="tok-string">    precision highp float;</span>
<span class="tok-string">    uniform vec2 framebufferResolution;</span>
<span class="tok-string">    uniform sampler2D src;</span>
<span class="tok-string">    </span>${<span class="tok-variable">GLSL_SRGB_GAMMA</span>}
<span class="tok-string">    void main () {</span>
<span class="tok-string">      vec4 color = texture2D(src, gl_FragCoord.xy / framebufferResolution);</span>
<span class="tok-string">      gl_FragColor = vec4(linearToSRGB(color.rgb), 1);</span>
<span class="tok-string">    }`</span>,
  <span class="tok-definition">attributes</span>: { <span class="tok-definition">xy</span>: [-<span class="tok-literal">4</span>, -<span class="tok-literal">4</span>, <span class="tok-literal">4</span>, -<span class="tok-literal">4</span>, <span class="tok-literal">0</span>, <span class="tok-literal">4</span>] },
  <span class="tok-definition">uniforms</span>: {
    <span class="tok-definition">src</span>: <span class="tok-variable">regl</span>.<span class="tok-definition">prop</span>(<span class="tok-string">'src'</span>),
    <span class="tok-definition">framebufferResolution</span>: (<span class="tok-definition">ctx</span>) =&gt; [<span class="tok-variable">ctx</span>.<span class="tok-definition">framebufferWidth</span>, <span class="tok-variable">ctx</span>.<span class="tok-definition">framebufferHeight</span>]
  },
  <span class="tok-definition">count</span>: <span class="tok-literal">3</span>,
  <span class="tok-definition">depth</span>: { <span class="tok-definition">enable</span>: <span class="tok-literal">false</span> }
});

<span class="tok-keyword">function</span> <span class="tok-definition">createDrawPoints</span>(<span class="tok-definition">circularPoints</span>) {
  <span class="tok-keyword">return</span> <span class="tok-variable">regl</span>({
    <span class="tok-definition">vert</span>: <span class="tok-string">`</span>
<span class="tok-string">      precision highp float;</span>
<span class="tok-string">      attribute vec2 xy;</span>
<span class="tok-string">      uniform float pointSize, minimumPointDeviceSize;</span>
<span class="tok-string">      uniform mat4 view;</span>
<span class="tok-string">      void main () {</span>
<span class="tok-string">        gl_Position = view * vec4(xy, 0, 1);</span>
<span class="tok-string">        gl_PointSize = max(minimumPointDeviceSize, pointSize) + 0.5;</span>
<span class="tok-string">      }`</span>,
    <span class="tok-definition">frag</span>: <span class="tok-string">`</span>
<span class="tok-string">      precision highp float;</span>
<span class="tok-string">      uniform float opacity, pointSize;</span>
<span class="tok-string">      uniform vec3 invertedPointColor;</span>

<span class="tok-string">      float linearstep(float edge0, float edge1, float x) {</span>
<span class="tok-string">        return clamp((x - edge0) / (edge1 - edge0), 0.0, 1.0);</span>
<span class="tok-string">      }</span>

<span class="tok-string">      void main () {</span>
<span class="tok-string">        float alpha = opacity;</span>
<span class="tok-string">        vec2 c = gl_PointCoord * 2.0 - 1.0;</span>
<span class="tok-string">        #if </span>${<span class="tok-variable">circularPoints</span> ? <span class="tok-string">'1'</span> : <span class="tok-string">'0'</span>}
<span class="tok-string">        float sdf = length(c);</span>
<span class="tok-string">        #else</span>
<span class="tok-string">        float sdf = max(abs(c.x), abs(c.y));</span>
<span class="tok-string">        #endif</span>
<span class="tok-string">        alpha *= linearstep(pointSize + 0.5, pointSize - 0.5, sdf * pointSize);</span>
<span class="tok-string">        gl_FragColor = vec4(invertedPointColor, alpha);</span>
<span class="tok-string">      }`</span>,
    <span class="tok-definition">attributes</span>: { <span class="tok-definition">xy</span>: <span class="tok-variable">regl</span>.<span class="tok-definition">prop</span>(<span class="tok-string">'pointsBuffer'</span>) },
    <span class="tok-definition">blend</span>: {
      <span class="tok-definition">enable</span>: <span class="tok-literal">true</span>,
      <span class="tok-definition">func</span>: { <span class="tok-definition">srcRGB</span>: <span class="tok-string">'src alpha'</span>, <span class="tok-definition">dstRGB</span>: <span class="tok-literal">1</span>, <span class="tok-definition">srcAlpha</span>: <span class="tok-literal">1</span>, <span class="tok-definition">dstAlpha</span>: <span class="tok-literal">1</span> },
      <span class="tok-definition">equation</span>: { <span class="tok-definition">rgb</span>: <span class="tok-string">'reverse subtract'</span>, <span class="tok-definition">alpha</span>: <span class="tok-string">'add'</span> }
    },
    <span class="tok-definition">uniforms</span>: {
      <span class="tok-definition">view</span>: <span class="tok-variable">regl</span>.<span class="tok-definition">prop</span>(<span class="tok-string">'view'</span>),
      <span class="tok-definition">invertedPointColor</span>: <span class="tok-variable">regl</span>.<span class="tok-definition">prop</span>(<span class="tok-string">'invertedPointColor'</span>),
      <span class="tok-definition">minimumPointDeviceSize</span>: <span class="tok-variable">regl</span>.<span class="tok-definition">prop</span>(<span class="tok-string">'minimumPointDeviceSize'</span>),
      <span class="tok-definition">opacity</span>: <span class="tok-variable">regl</span>.<span class="tok-definition">prop</span>(<span class="tok-string">'opacity'</span>),
      <span class="tok-definition">pointSize</span>: <span class="tok-variable">regl</span>.<span class="tok-definition">prop</span>(<span class="tok-string">'pointSize'</span>)
    },
    <span class="tok-definition">primitive</span>: <span class="tok-string">'points'</span>,
    <span class="tok-definition">count</span>: <span class="tok-variable">regl</span>.<span class="tok-definition">prop</span>(<span class="tok-string">'N'</span>),
    <span class="tok-definition">depth</span>: { <span class="tok-definition">enable</span>: <span class="tok-literal">false</span> },
    <span class="tok-definition">scissor</span>: { <span class="tok-definition">enable</span>: <span class="tok-literal">true</span>, <span class="tok-definition">box</span>: <span class="tok-variable">regl</span>.<span class="tok-definition">prop</span>(<span class="tok-string">'scissor'</span>) },
    <span class="tok-definition">viewport</span>: <span class="tok-variable">regl</span>.<span class="tok-definition">prop</span>(<span class="tok-string">'viewport'</span>)
  });
}

<span class="tok-comment">// Mutable state - all in one cell to avoid cross-cell reassignment issues</span>
<span class="tok-keyword">let</span> <span class="tok-definition">pointsBuffer</span> = <span class="tok-variable">regl</span>.<span class="tok-definition">buffer</span>(<span class="tok-variable">generatePoints</span>(<span class="tok-variable">plotData</span>, <span class="tok-variable">N</span>, { <span class="tok-definition">x</span>: <span class="tok-variable">initialXDomain</span>, <span class="tok-definition">y</span>: <span class="tok-variable">initialYDomain</span> }));
<span class="tok-keyword">let</span> <span class="tok-definition">fbo</span> = <span class="tok-variable">regl</span>.<span class="tok-definition">framebuffer</span>({
  <span class="tok-definition">width</span>: <span class="tok-variable">Math</span>.<span class="tok-definition">floor</span>(<span class="tok-variable">stack</span>.<span class="tok-definition">width</span> * <span class="tok-variable">pixelRatio</span>),
  <span class="tok-definition">height</span>: <span class="tok-variable">Math</span>.<span class="tok-definition">floor</span>(<span class="tok-variable">stack</span>.<span class="tok-definition">height</span> * <span class="tok-variable">pixelRatio</span>),
  <span class="tok-definition">colorType</span>: <span class="tok-variable">colorType</span>
});
<span class="tok-keyword">let</span> <span class="tok-definition">drawPoints</span> = <span class="tok-variable">createDrawPoints</span>(<span class="tok-variable">circularPoints</span>);
<span class="tok-keyword">let</span> <span class="tok-definition">currentPlotData</span> = <span class="tok-variable">plotData</span>;
<span class="tok-keyword">let</span> <span class="tok-definition">currentN</span> = <span class="tok-variable">N</span>;
<span class="tok-keyword">let</span> <span class="tok-definition">currentColorType</span> = <span class="tok-variable">colorType</span>;
<span class="tok-keyword">let</span> <span class="tok-definition">currentPixelRatio</span> = <span class="tok-variable">pixelRatio</span>;
<span class="tok-keyword">let</span> <span class="tok-definition">currentCircularPoints</span> = <span class="tok-variable">circularPoints</span>;

<span class="tok-keyword">const</span> <span class="tok-definition">loop</span> = <span class="tok-variable">regl</span>.<span class="tok-definition">frame</span>(() =&gt; {
  <span class="tok-comment">// Check for parameter changes that require recreation</span>
  <span class="tok-keyword">if</span> (<span class="tok-variable">plotData</span> !== <span class="tok-variable">currentPlotData</span> || <span class="tok-variable">N</span> !== <span class="tok-variable">currentN</span>) {
    <span class="tok-variable">pointsBuffer</span>.<span class="tok-definition">destroy</span>();
    <span class="tok-variable">pointsBuffer</span> = <span class="tok-variable">regl</span>.<span class="tok-definition">buffer</span>(<span class="tok-variable">generatePoints</span>(<span class="tok-variable">plotData</span>, <span class="tok-variable">N</span>, { <span class="tok-definition">x</span>: <span class="tok-variable">initialXDomain</span>, <span class="tok-definition">y</span>: <span class="tok-variable">initialYDomain</span> }));
    <span class="tok-variable">currentPlotData</span> = <span class="tok-variable">plotData</span>;
    <span class="tok-variable">currentN</span> = <span class="tok-variable">N</span>;
    <span class="tok-variable">render</span>.<span class="tok-definition">dirty</span> = <span class="tok-literal">true</span>;
  }

  <span class="tok-keyword">if</span> (<span class="tok-variable">colorType</span> !== <span class="tok-variable">currentColorType</span> || <span class="tok-variable">pixelRatio</span> !== <span class="tok-variable">currentPixelRatio</span>) {
    <span class="tok-variable">fbo</span>.<span class="tok-definition">destroy</span>();
    <span class="tok-variable">fbo</span> = <span class="tok-variable">regl</span>.<span class="tok-definition">framebuffer</span>({
      <span class="tok-definition">width</span>: <span class="tok-variable">Math</span>.<span class="tok-definition">floor</span>(<span class="tok-variable">stack</span>.<span class="tok-definition">width</span> * <span class="tok-variable">pixelRatio</span>),
      <span class="tok-definition">height</span>: <span class="tok-variable">Math</span>.<span class="tok-definition">floor</span>(<span class="tok-variable">stack</span>.<span class="tok-definition">height</span> * <span class="tok-variable">pixelRatio</span>),
      <span class="tok-definition">colorType</span>: <span class="tok-variable">colorType</span>
    });
    <span class="tok-variable">currentColorType</span> = <span class="tok-variable">colorType</span>;
    <span class="tok-variable">currentPixelRatio</span> = <span class="tok-variable">pixelRatio</span>;
    <span class="tok-variable">render</span>.<span class="tok-definition">dirty</span> = <span class="tok-literal">true</span>;
  }

  <span class="tok-keyword">if</span> (<span class="tok-variable">circularPoints</span> !== <span class="tok-variable">currentCircularPoints</span>) {
    <span class="tok-variable">drawPoints</span> = <span class="tok-variable">createDrawPoints</span>(<span class="tok-variable">circularPoints</span>);
    <span class="tok-variable">currentCircularPoints</span> = <span class="tok-variable">circularPoints</span>;
    <span class="tok-variable">render</span>.<span class="tok-definition">dirty</span> = <span class="tok-literal">true</span>;
  }

  <span class="tok-comment">// Check if any rendering parameters changed</span>
  <span class="tok-keyword">if</span> (<span class="tok-variable">pointYAxisSize</span> || <span class="tok-variable">rho</span> || <span class="tok-variable">pointScreenSizeMin</span> || <span class="tok-variable">pointScreenSizeMax</span> ||
      <span class="tok-variable">minimumPointDeviceSize</span> || <span class="tok-variable">pointColor</span>) {
    <span class="tok-variable">render</span>.<span class="tok-definition">dirty</span> = <span class="tok-literal">true</span>;
  }

  <span class="tok-keyword">if</span> (!<span class="tok-variable">render</span>.<span class="tok-definition">dirty</span>) <span class="tok-keyword">return</span>;

  <span class="tok-comment">// Resize framebuffer if needed</span>
  <span class="tok-keyword">const</span> <span class="tok-definition">targetWidth</span> = <span class="tok-variable">Math</span>.<span class="tok-definition">floor</span>(<span class="tok-variable">stack</span>.<span class="tok-definition">width</span> * <span class="tok-variable">pixelRatio</span>);
  <span class="tok-keyword">const</span> <span class="tok-definition">targetHeight</span> = <span class="tok-variable">Math</span>.<span class="tok-definition">floor</span>(<span class="tok-variable">stack</span>.<span class="tok-definition">height</span> * <span class="tok-variable">pixelRatio</span>);
  <span class="tok-keyword">if</span> (<span class="tok-variable">fbo</span>.<span class="tok-definition">width</span> !== <span class="tok-variable">targetWidth</span> || <span class="tok-variable">fbo</span>.<span class="tok-definition">height</span> !== <span class="tok-variable">targetHeight</span>) {
    <span class="tok-variable">fbo</span>.<span class="tok-definition">resize</span>(<span class="tok-variable">targetWidth</span>, <span class="tok-variable">targetHeight</span>);
  }

  <span class="tok-comment">// Compute viewport bounds from axes</span>
  <span class="tok-keyword">const</span> <span class="tok-definition">viewport</span> = {
    <span class="tok-definition">x</span>: <span class="tok-variable">Math</span>.<span class="tok-definition">min</span>(<span class="tok-variable">axes</span>.<span class="tok-definition">xRange</span>[<span class="tok-literal">0</span>], <span class="tok-variable">axes</span>.<span class="tok-definition">xRange</span>[<span class="tok-literal">1</span>]) * <span class="tok-variable">pixelRatio</span>,
    <span class="tok-definition">y</span>: <span class="tok-variable">targetHeight</span> - <span class="tok-variable">Math</span>.<span class="tok-definition">max</span>(<span class="tok-variable">axes</span>.<span class="tok-definition">yRange</span>[<span class="tok-literal">0</span>], <span class="tok-variable">axes</span>.<span class="tok-definition">yRange</span>[<span class="tok-literal">1</span>]) * <span class="tok-variable">pixelRatio</span>,
    <span class="tok-definition">width</span>: <span class="tok-variable">Math</span>.<span class="tok-definition">abs</span>(<span class="tok-variable">axes</span>.<span class="tok-definition">xRange</span>[<span class="tok-literal">1</span>] - <span class="tok-variable">axes</span>.<span class="tok-definition">xRange</span>[<span class="tok-literal">0</span>]) * <span class="tok-variable">pixelRatio</span>,
    <span class="tok-definition">height</span>: <span class="tok-variable">Math</span>.<span class="tok-definition">abs</span>(<span class="tok-variable">axes</span>.<span class="tok-definition">yRange</span>[<span class="tok-literal">0</span>] - <span class="tok-variable">axes</span>.<span class="tok-definition">yRange</span>[<span class="tok-literal">1</span>]) * <span class="tok-variable">pixelRatio</span>
  };

  <span class="tok-comment">// Create context object for opacity/size calculations</span>
  <span class="tok-keyword">const</span> <span class="tok-definition">ctx</span> = {
    <span class="tok-definition">view</span>: <span class="tok-variable">axes</span>.<span class="tok-definition">view</span>,
    <span class="tok-definition">viewportWidth</span>: <span class="tok-variable">viewport</span>.<span class="tok-definition">width</span>,
    <span class="tok-definition">viewportHeight</span>: <span class="tok-variable">viewport</span>.<span class="tok-definition">height</span>,
    <span class="tok-definition">pixelRatio</span>: <span class="tok-variable">pixelRatio</span>
  };

  <span class="tok-keyword">const</span> <span class="tok-definition">props</span> = {
    <span class="tok-definition">N</span>,
    <span class="tok-definition">pointYAxisSize</span>,
    <span class="tok-definition">pointScreenSize</span>: [<span class="tok-variable">pointScreenSizeMin</span>, <span class="tok-variable">pointScreenSizeMax</span>],
    <span class="tok-definition">minimumPointDeviceSize</span>,
    <span class="tok-definition">rho</span>,
    <span class="tok-definition">circularPoints</span>,
    <span class="tok-definition">initialAxisDimensions</span>
  };

  <span class="tok-keyword">const</span> <span class="tok-definition">pointColorRGB</span> = <span class="tok-variable">hexToRgb</span>(<span class="tok-variable">pointColor</span>);
  <span class="tok-keyword">const</span> <span class="tok-definition">pointColorLinear</span> = <span class="tok-variable">sRGBToLinear</span>(<span class="tok-variable">pointColorRGB</span>);

  <span class="tok-comment">// Render to framebuffer</span>
  <span class="tok-variable">fbo</span>.<span class="tok-definition">use</span>(() =&gt; {
    <span class="tok-variable">regl</span>.<span class="tok-definition">clear</span>({ <span class="tok-definition">color</span>: [<span class="tok-literal">1</span>, <span class="tok-literal">1</span>, <span class="tok-literal">1</span>, <span class="tok-literal">1</span>] });
    <span class="tok-variable">drawPoints</span>({
      <span class="tok-definition">view</span>: <span class="tok-variable">axes</span>.<span class="tok-definition">view</span>,
      <span class="tok-definition">pointsBuffer</span>,
      <span class="tok-definition">N</span>,
      <span class="tok-definition">invertedPointColor</span>: [
        <span class="tok-literal">1</span> - <span class="tok-variable">pointColorLinear</span>[<span class="tok-literal">0</span>],
        <span class="tok-literal">1</span> - <span class="tok-variable">pointColorLinear</span>[<span class="tok-literal">1</span>],
        <span class="tok-literal">1</span> - <span class="tok-variable">pointColorLinear</span>[<span class="tok-literal">2</span>]
      ],
      <span class="tok-definition">minimumPointDeviceSize</span>,
      <span class="tok-definition">opacity</span>: <span class="tok-variable">pointOpacity</span>(<span class="tok-variable">ctx</span>, <span class="tok-variable">props</span>),
      <span class="tok-definition">pointSize</span>: <span class="tok-variable">pointSizeDevicePixels</span>(<span class="tok-variable">ctx</span>, <span class="tok-variable">props</span>),
      <span class="tok-definition">viewport</span>,
      <span class="tok-definition">scissor</span>: <span class="tok-variable">viewport</span>
    });
  });

  <span class="tok-comment">// Copy to screen with linear  sRGB conversion</span>
  <span class="tok-variable">copyToScreen</span>({ <span class="tok-definition">src</span>: <span class="tok-variable">fbo</span> });

  <span class="tok-variable">render</span>.<span class="tok-definition">dirty</span> = <span class="tok-literal">false</span>;
});

<span class="tok-variable">invalidation</span>.<span class="tok-definition">then</span>(() =&gt; {
  <span class="tok-variable">loop</span>.<span class="tok-definition">cancel</span>();
  <span class="tok-variable">pointsBuffer</span>.<span class="tok-definition">destroy</span>();
  <span class="tok-variable">fbo</span>.<span class="tok-definition">destroy</span>();
});</code></pre><div id="cell-400" class="observablehq observablehq--cell"></div></main>
  </div>
  <footer>
    <div class="footer__attrib"> 2026 Ricky Reusser</div>
    <a href="/notebooks/feed.xml" class="footer__rss">
      <svg class="icon" viewBox="0 0 24 24" fill="currentColor" width="14" height="14">
        <circle cx="6.5" cy="17.5" r="2.5"></circle>
        <path d="M4 4a16 16 0 0 1 16 16h-4A12 12 0 0 0 4 8V4z"></path>
        <path d="M4 10a10 10 0 0 1 10 10h-4a6 6 0 0 0-6-6v-4z"></path>
      </svg>
      RSS
    </a>
  </footer>


<style type="text/css">:root {
  --syntax-link: var(--theme-foreground-focus);
  --syntax-keyword: #e36209;
  --syntax-atom: #032f62;
  --syntax-literal: #6f42c1;
  --syntax-string: #22863a;
  --syntax-comment: var(--theme-foreground-muted);
  --syntax-invalid: var(--theme-error);
  --syntax-definition: #005cc5;
  --syntax-variable: var(--theme-foreground-alt);
  --syntax-meta: #d73a49;
}

:root {
  --theme-background-b: color-mix(in srgb, var(--theme-foreground) 4%, var(--theme-background-a));
  --theme-background: var(--theme-background-a);
  --theme-background-alt: var(--theme-background-b);
  --theme-foreground-alt: color-mix(in srgb, var(--theme-foreground) 90%, var(--theme-background-a));
  --theme-foreground-muted: color-mix(in srgb, var(--theme-foreground) 60%, var(--theme-background-a));
  --theme-foreground-faint: color-mix(in srgb, var(--theme-foreground) 50%, var(--theme-background-a));
  --theme-foreground-fainter: color-mix(in srgb, var(--theme-foreground) 30%, var(--theme-background-a));
  --theme-foreground-faintest: color-mix(in srgb, var(--theme-foreground) 14%, var(--theme-background-a));
  --theme-error: #e7040f;
  color-scheme: light;
}

:root {
  --theme-foreground: #1b1e23;
  --theme-foreground-focus: #3b5fc0;
  --theme-background-a: #ffffff;
}
</style></body></html>