function y(){const n=document.createElement("div");return n.style.position="relative",n}function x({container:n=null,width:i=null,height:r=null,layers:c={},onResize:v=null}={}){n=n??y();const p=n.getAttribute("data-on-resize");v&&!p&&(new ResizeObserver(([{contentRect:e}])=>{v({layers:n.value,rect:e}),n.dispatchEvent(new CustomEvent("input"))}).observe(n),n.setAttribute("data-on-resize",v));const o={};for(const[a,e]of Object.entries(c)){const t=typeof e=="function"?e:e.layer,s=`element-stack-layer-${a}`,u=n.querySelector(`#${s}`),l=t({current:u,width:i,height:r});l.setAttribute("id",s),l.style.position||(l.style.position="absolute"),o[a]=l,u?u.replaceWith(l):n.appendChild(l)}return i&&(n.style.width=`${i}px`),r&&(n.style.height=`${r}px`),n.value=o,n}function f(n,i){const{create:r,invert:c,ortho:v}=n,p=i({uniforms:{view:i.prop("view"),viewInverse:i.prop("viewInverse")},context:{view:i.prop("view"),viewInverse:i.prop("viewInverse")},scissor:{enable:!0,box:{x:({pixelRatio:e},{xRange:[t,s]})=>t*e,y:({pixelRatio:e,framebufferHeight:t},{yRange:[s,u]})=>t-s*e,width:({pixelRatio:e},{xRange:[t,s]})=>(s-t)*e,height:({pixelRatio:e},{yRange:[t,s]})=>(t-s)*e}},viewport:{x:({pixelRatio:e},{xRange:[t,s]})=>t*e,y:({pixelRatio:e,framebufferHeight:t},{yRange:[s,u]})=>t-s*e,width:({pixelRatio:e},{xRange:[t,s]})=>(s-t)*e,height:({pixelRatio:e},{yRange:[t,s]})=>(t-s)*e}}),o=r(),a=r();return function(e,t,s){v(o,...e.domain,...t.domain,-1,1),c(a,o),p({view:o,viewInverse:a,xRange:e.range,yRange:t.range},s)}}export{f as createAxisConfiguration,x as createElementStack,y as initializeElementStack};
