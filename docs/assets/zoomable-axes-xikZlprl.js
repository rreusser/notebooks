function k({d3:n,element:t,xScale:g,yScale:m,aspectRatio:l=null,scaleExtent:x=[.1,100],onChange:b=()=>{}}){const f=e=>typeof e.domain=="function"?e.domain():e.domain,y=e=>typeof e.range=="function"?e.range():e.range,D=f(g),u=f(m);function c(){return y(g)}function s(){return y(m)}function h(e,i){if(l==null)return[e,i];const I=c(),M=s(),r=Math.abs(I[1]-I[0]),H=Math.abs(M[1]-M[0]),E=(e[1]-e[0])*H/(r*l),F=(i[0]+i[1])/2,L=[F-E/2,F+E/2];return[e,L]}let[a,o]=h([...D],[...u]);const d=new Float32Array(16),v=new Float32Array(16);function z(){S(d,a[0],a[1],o[0],o[1],-1,1),Z(v,d)}z();const R=n.scaleLinear().domain(a).range(c()),p=n.scaleLinear().domain(o).range(s());function A(){R.range(c()),p.range(s())}function W(){const e=c(),i=s();return[[e[0],i[1]],[e[1],i[0]]]}const w=n.select(t).attr("id","zoom-target").style("cursor","grab"),Y=n.zoom().scaleExtent(x).extent(W).on("start",()=>w.style("cursor","grabbing")).on("end",()=>w.style("cursor","grab")).on("zoom",e=>{A(),a=e.transform.rescaleX(R).domain(),o=e.transform.rescaleY(p).domain(),z(),b({xDomain:a,yDomain:o,xRange:c(),yRange:s()})});return w.call(Y).call(Y.transform,n.zoomIdentity),{get xDomain(){return a},get yDomain(){return o},get xRange(){return c()},get yRange(){return s()},get view(){return d},get viewInverse(){return v},get xScale(){return R.copy().domain(a)},get yScale(){return p.copy().domain(o)},updateScales(e,i){g=e,m=i,A(),[a,o]=h(a,o),R.domain(a),p.domain(o),w.call(Y.transform,n.zoomIdentity),z(),b({xDomain:a,yDomain:o,xRange:c(),yRange:s()})}}}function S(n,t,g,m,l,x,b){const f=1/(t-g),y=1/(m-l),D=1/(x-b);return n[0]=-2*f,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=-2*y,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=2*D,n[11]=0,n[12]=(t+g)*f,n[13]=(l+m)*y,n[14]=(b+x)*D,n[15]=1,n}function Z(n,t){const g=t[0],m=t[1],l=t[2],x=t[3],b=t[4],f=t[5],y=t[6],D=t[7],u=t[8],c=t[9],s=t[10],h=t[11],a=t[12],o=t[13],d=t[14],v=t[15],z=g*f-m*b,R=g*y-l*b,p=g*D-x*b,A=m*y-l*f,W=m*D-x*f,w=l*D-x*y,Y=u*o-c*a,X=u*d-s*a,e=u*v-h*a,i=c*d-s*o,I=c*v-h*o,M=s*v-h*d;let r=z*M-R*I+p*i+A*e-W*X+w*Y;return r?(r=1/r,n[0]=(f*M-y*I+D*i)*r,n[1]=(l*I-m*M-x*i)*r,n[2]=(o*w-d*W+v*A)*r,n[3]=(s*W-c*w-h*A)*r,n[4]=(y*e-b*M-D*X)*r,n[5]=(g*M-l*e+x*X)*r,n[6]=(d*p-a*w-v*R)*r,n[7]=(u*w-s*p+h*R)*r,n[8]=(b*I-f*e+D*Y)*r,n[9]=(m*e-g*I-x*Y)*r,n[10]=(a*W-o*p+v*z)*r,n[11]=(c*p-u*W-h*z)*r,n[12]=(f*X-b*i-y*Y)*r,n[13]=(g*i-m*X+l*Y)*r,n[14]=(o*R-a*A-d*z)*r,n[15]=(u*A-c*R+s*z)*r,n):null}export{k as createZoomableAxes};
