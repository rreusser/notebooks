function q({d3:n,element:r,xScale:i,yScale:g,aspectRatio:m=null,scaleExtent:x=[.1,100],onChange:l=()=>{}}){const f=t=>typeof t.domain=="function"?t.domain():t.domain,b=t=>typeof t.range=="function"?t.range():t.range,y=f(i),Y=f(g);function s(){return b(i)}function c(){return b(g)}function p(t,e){if(m==null)return[t,e];const E=s(),F=c(),k=Math.abs(E[1]-E[0]),B=Math.abs(F[1]-F[0]),H=(t[1]-t[0])*B/(k*m),L=(e[0]+e[1])/2,S=[L-H/2,L+H/2];return[t,S]}const D=[...y];let[a,o]=p([...y],[...Y]);const u=new Float32Array(16),z=new Float32Array(16);function h(){T(u,a[0],a[1],o[0],o[1],-1,1),Z(z,u)}h();function A(){const[,t]=p([...D],[...Y]);return t}const d=n.scaleLinear().domain(D).range(s()),R=n.scaleLinear().domain(A()).range(c());function I(){d.range(s()),R.domain(A()).range(c())}function X(){const t=(D[1]-D[0])/(a[1]-a[0]),e=d.range()[0]-t*d(a[0]),E=R.range()[0]-t*R(o[0]);return n.zoomIdentity.translate(e,E).scale(t)}function M(){const t=s(),e=c();return[[t[0],e[1]],[t[1],e[0]]]}const w=n.select(r).attr("id","zoom-target").style("cursor","grab"),v=n.zoom().scaleExtent(x).extent(M).on("start",()=>w.style("cursor","grabbing")).on("end",()=>w.style("cursor","grab")).on("zoom",t=>{I(),a=t.transform.rescaleX(d).domain(),o=t.transform.rescaleY(R).domain(),h(),l({xDomain:a,yDomain:o,xRange:s(),yRange:c()})});return w.call(v).call(v.transform,n.zoomIdentity),{get xDomain(){return a},get yDomain(){return o},get xRange(){return s()},get yRange(){return c()},get view(){return u},get viewInverse(){return z},get xScale(){return d.copy().domain(a)},get yScale(){return R.copy().domain(o)},updateScales(t,e){i=t,g=e,I(),[a,o]=p(a,o);const E=X();w.call(v.transform,E),h(),l({xDomain:a,yDomain:o,xRange:s(),yRange:c()})}}}function T(n,r,i,g,m,x,l){const f=1/(r-i),b=1/(g-m),y=1/(x-l);return n[0]=-2*f,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=-2*b,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=2*y,n[11]=0,n[12]=(r+i)*f,n[13]=(m+g)*b,n[14]=(l+x)*y,n[15]=1,n}function Z(n,r){const i=r[0],g=r[1],m=r[2],x=r[3],l=r[4],f=r[5],b=r[6],y=r[7],Y=r[8],s=r[9],c=r[10],p=r[11],D=r[12],a=r[13],o=r[14],u=r[15],z=i*f-g*l,h=i*b-m*l,A=i*y-x*l,d=g*b-m*f,R=g*y-x*f,I=m*y-x*b,X=Y*a-s*D,M=Y*o-c*D,w=Y*u-p*D,v=s*o-c*a,W=s*u-p*a,t=c*u-p*o;let e=z*t-h*W+A*v+d*w-R*M+I*X;return e?(e=1/e,n[0]=(f*t-b*W+y*v)*e,n[1]=(m*W-g*t-x*v)*e,n[2]=(a*I-o*R+u*d)*e,n[3]=(c*R-s*I-p*d)*e,n[4]=(b*w-l*t-y*M)*e,n[5]=(i*t-m*w+x*M)*e,n[6]=(o*A-D*I-u*h)*e,n[7]=(Y*I-c*A+p*h)*e,n[8]=(l*W-f*w+y*X)*e,n[9]=(g*w-i*W-x*X)*e,n[10]=(D*R-a*A+u*z)*e,n[11]=(s*A-Y*R-p*z)*e,n[12]=(f*M-l*v-b*X)*e,n[13]=(i*v-g*M+m*X)*e,n[14]=(a*h-D*d-o*z)*e,n[15]=(Y*d-s*h+c*z)*e,n):null}export{q as createZoomableAxes};
