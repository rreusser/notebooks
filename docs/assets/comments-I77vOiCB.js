var B,v,g_,x,r_,b_,$_,k_,Z,J,K,N={},w_=[],D_=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,q=Array.isArray;function w(e,_){for(var t in _)e[t]=_[t];return e}function __(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function e_(e,_,t){var o,i,n,l={};for(n in _)n=="key"?o=_[n]:n=="ref"?i=_[n]:l[n]=_[n];if(arguments.length>2&&(l.children=arguments.length>3?B.call(arguments,2):t),typeof e=="function"&&e.defaultProps!=null)for(n in e.defaultProps)l[n]===void 0&&(l[n]=e.defaultProps[n]);return F(e,l,o,i,null)}function F(e,_,t,o,i){var n={type:e,props:_,key:t,ref:o,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:i??++g_,__i:-1,__u:0};return i==null&&v.vnode!=null&&v.vnode(n),n}function O(e){return e.children}function L(e,_){this.props=e,this.context=_}function C(e,_){if(_==null)return e.__?C(e.__,e.__i+1):null;for(var t;_<e.__k.length;_++)if((t=e.__k[_])!=null&&t.__e!=null)return t.__e;return typeof e.type=="function"?C(e):null}function H_(e){var _,t;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,_=0;_<e.__k.length;_++)if((t=e.__k[_])!=null&&t.__e!=null){e.__e=e.__c.base=t.__e;break}return H_(e)}}function i_(e){(!e.__d&&(e.__d=!0)&&x.push(e)&&!I.__r++||r_!=v.debounceRendering)&&((r_=v.debounceRendering)||b_)(I)}function I(){for(var e,_,t,o,i,n,l,c=1;x.length;)x.length>c&&x.sort($_),e=x.shift(),c=x.length,e.__d&&(t=void 0,i=(o=(_=e).__v).__e,n=[],l=[],_.__P&&((t=w({},o)).__v=o.__v+1,v.vnode&&v.vnode(t),t_(_.__P,t,o,_.__n,_.__P.namespaceURI,32&o.__u?[i]:null,n,i??C(o),!!(32&o.__u),l),t.__v=o.__v,t.__.__k[t.__i]=t,C_(n,t,l),t.__e!=i&&H_(t)));I.__r=0}function x_(e,_,t,o,i,n,l,c,u,s,a){var r,f,p,g,$,b,h=o&&o.__k||w_,d=_.length;for(u=A_(t,_,h,u,d),r=0;r<d;r++)(p=t.__k[r])!=null&&(f=p.__i==-1?N:h[p.__i]||N,p.__i=r,b=t_(e,p,f,i,n,l,c,u,s,a),g=p.__e,p.ref&&f.ref!=p.ref&&(f.ref&&n_(f.ref,null,p),a.push(p.ref,p.__c||g,p)),$==null&&g!=null&&($=g),4&p.__u||f.__k===p.__k?u=S_(p,u,e):typeof p.type=="function"&&b!==void 0?u=b:g&&(u=g.nextSibling),p.__u&=-7);return t.__e=$,u}function A_(e,_,t,o,i){var n,l,c,u,s,a=t.length,r=a,f=0;for(e.__k=new Array(i),n=0;n<i;n++)(l=_[n])!=null&&typeof l!="boolean"&&typeof l!="function"?(u=n+f,(l=e.__k[n]=typeof l=="string"||typeof l=="number"||typeof l=="bigint"||l.constructor==String?F(null,l,null,null,null):q(l)?F(O,{children:l},null,null,null):l.constructor==null&&l.__b>0?F(l.type,l.props,l.key,l.ref?l.ref:null,l.__v):l).__=e,l.__b=e.__b+1,c=null,(s=l.__i=F_(l,t,u,r))!=-1&&(r--,(c=t[s])&&(c.__u|=2)),c==null||c.__v==null?(s==-1&&(i>a?f--:i<a&&f++),typeof l.type!="function"&&(l.__u|=4)):s!=u&&(s==u-1?f--:s==u+1?f++:(s>u?f--:f++,l.__u|=4))):e.__k[n]=null;if(r)for(n=0;n<a;n++)(c=t[n])!=null&&(2&c.__u)==0&&(c.__e==o&&(o=C(c)),M_(c,c));return o}function S_(e,_,t){var o,i;if(typeof e.type=="function"){for(o=e.__k,i=0;o&&i<o.length;i++)o[i]&&(o[i].__=e,_=S_(o[i],_,t));return _}e.__e!=_&&(_&&e.type&&!t.contains(_)&&(_=C(e)),t.insertBefore(e.__e,_||null),_=e.__e);do _=_&&_.nextSibling;while(_!=null&&_.nodeType==8);return _}function F_(e,_,t,o){var i,n,l,c=e.key,u=e.type,s=_[t],a=s!=null&&(2&s.__u)==0;if(s===null&&e.key==null||a&&c==s.key&&u==s.type)return t;if(o>(a?1:0)){for(i=t-1,n=t+1;i>=0||n<_.length;)if((s=_[l=i>=0?i--:n++])!=null&&(2&s.__u)==0&&c==s.key&&u==s.type)return l}return-1}function l_(e,_,t){_[0]=="-"?e.setProperty(_,t??""):e[_]=t==null?"":typeof t!="number"||D_.test(_)?t:t+"px"}function D(e,_,t,o,i){var n,l;_:if(_=="style")if(typeof t=="string")e.style.cssText=t;else{if(typeof o=="string"&&(e.style.cssText=o=""),o)for(_ in o)t&&_ in t||l_(e.style,_,"");if(t)for(_ in t)o&&t[_]==o[_]||l_(e.style,_,t[_])}else if(_[0]=="o"&&_[1]=="n")n=_!=(_=_.replace(k_,"$1")),l=_.toLowerCase(),_=l in e||_=="onFocusOut"||_=="onFocusIn"?l.slice(2):_.slice(2),e.l||(e.l={}),e.l[_+n]=t,t?o?t.u=o.u:(t.u=Z,e.addEventListener(_,n?K:J,n)):e.removeEventListener(_,n?K:J,n);else{if(i=="http://www.w3.org/2000/svg")_=_.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(_!="width"&&_!="height"&&_!="href"&&_!="list"&&_!="form"&&_!="tabIndex"&&_!="download"&&_!="rowSpan"&&_!="colSpan"&&_!="role"&&_!="popover"&&_ in e)try{e[_]=t??"";break _}catch{}typeof t=="function"||(t==null||t===!1&&_[4]!="-"?e.removeAttribute(_):e.setAttribute(_,_=="popover"&&t==1?"":t))}}function s_(e){return function(_){if(this.l){var t=this.l[_.type+e];if(_.t==null)_.t=Z++;else if(_.t<t.u)return;return t(v.event?v.event(_):_)}}}function t_(e,_,t,o,i,n,l,c,u,s){var a,r,f,p,g,$,b,h,d,E,H,T,M,o_,U,P,z,k=_.type;if(_.constructor!=null)return null;128&t.__u&&(u=!!(32&t.__u),n=[c=_.__e=t.__e]),(a=v.__b)&&a(_);_:if(typeof k=="function")try{if(h=_.props,d="prototype"in k&&k.prototype.render,E=(a=k.contextType)&&o[a.__c],H=a?E?E.props.value:a.__:o,t.__c?b=(r=_.__c=t.__c).__=r.__E:(d?_.__c=r=new k(h,H):(_.__c=r=new L(h,H),r.constructor=k,r.render=R_),E&&E.sub(r),r.props=h,r.state||(r.state={}),r.context=H,r.__n=o,f=r.__d=!0,r.__h=[],r._sb=[]),d&&r.__s==null&&(r.__s=r.state),d&&k.getDerivedStateFromProps!=null&&(r.__s==r.state&&(r.__s=w({},r.__s)),w(r.__s,k.getDerivedStateFromProps(h,r.__s))),p=r.props,g=r.state,r.__v=_,f)d&&k.getDerivedStateFromProps==null&&r.componentWillMount!=null&&r.componentWillMount(),d&&r.componentDidMount!=null&&r.__h.push(r.componentDidMount);else{if(d&&k.getDerivedStateFromProps==null&&h!==p&&r.componentWillReceiveProps!=null&&r.componentWillReceiveProps(h,H),!r.__e&&r.shouldComponentUpdate!=null&&r.shouldComponentUpdate(h,r.__s,H)===!1||_.__v==t.__v){for(_.__v!=t.__v&&(r.props=h,r.state=r.__s,r.__d=!1),_.__e=t.__e,_.__k=t.__k,_.__k.some(function(S){S&&(S.__=_)}),T=0;T<r._sb.length;T++)r.__h.push(r._sb[T]);r._sb=[],r.__h.length&&l.push(r);break _}r.componentWillUpdate!=null&&r.componentWillUpdate(h,r.__s,H),d&&r.componentDidUpdate!=null&&r.__h.push(function(){r.componentDidUpdate(p,g,$)})}if(r.context=H,r.props=h,r.__P=e,r.__e=!1,M=v.__r,o_=0,d){for(r.state=r.__s,r.__d=!1,M&&M(_),a=r.render(r.props,r.state,r.context),U=0;U<r._sb.length;U++)r.__h.push(r._sb[U]);r._sb=[]}else do r.__d=!1,M&&M(_),a=r.render(r.props,r.state,r.context),r.state=r.__s;while(r.__d&&++o_<25);r.state=r.__s,r.getChildContext!=null&&(o=w(w({},o),r.getChildContext())),d&&!f&&r.getSnapshotBeforeUpdate!=null&&($=r.getSnapshotBeforeUpdate(p,g)),P=a,a!=null&&a.type===O&&a.key==null&&(P=E_(a.props.children)),c=x_(e,q(P)?P:[P],_,t,o,i,n,l,c,u,s),r.base=_.__e,_.__u&=-161,r.__h.length&&l.push(r),b&&(r.__E=r.__=null)}catch(S){if(_.__v=null,u||n!=null)if(S.then){for(_.__u|=u?160:128;c&&c.nodeType==8&&c.nextSibling;)c=c.nextSibling;n[n.indexOf(c)]=null,_.__e=c}else{for(z=n.length;z--;)__(n[z]);Q(_)}else _.__e=t.__e,_.__k=t.__k,S.then||Q(_);v.__e(S,_,t)}else n==null&&_.__v==t.__v?(_.__k=t.__k,_.__e=t.__e):c=_.__e=L_(t.__e,_,t,o,i,n,l,u,s);return(a=v.diffed)&&a(_),128&_.__u?void 0:c}function Q(e){e&&e.__c&&(e.__c.__e=!0),e&&e.__k&&e.__k.forEach(Q)}function C_(e,_,t){for(var o=0;o<t.length;o++)n_(t[o],t[++o],t[++o]);v.__c&&v.__c(_,e),e.some(function(i){try{e=i.__h,i.__h=[],e.some(function(n){n.call(i)})}catch(n){v.__e(n,i.__v)}})}function E_(e){return typeof e!="object"||e==null||e.__b&&e.__b>0?e:q(e)?e.map(E_):w({},e)}function L_(e,_,t,o,i,n,l,c,u){var s,a,r,f,p,g,$,b=t.props,h=_.props,d=_.type;if(d=="svg"?i="http://www.w3.org/2000/svg":d=="math"?i="http://www.w3.org/1998/Math/MathML":i||(i="http://www.w3.org/1999/xhtml"),n!=null){for(s=0;s<n.length;s++)if((p=n[s])&&"setAttribute"in p==!!d&&(d?p.localName==d:p.nodeType==3)){e=p,n[s]=null;break}}if(e==null){if(d==null)return document.createTextNode(h);e=document.createElementNS(i,d,h.is&&h),c&&(v.__m&&v.__m(_,n),c=!1),n=null}if(d==null)b===h||c&&e.data==h||(e.data=h);else{if(n=n&&B.call(e.childNodes),b=t.props||N,!c&&n!=null)for(b={},s=0;s<e.attributes.length;s++)b[(p=e.attributes[s]).name]=p.value;for(s in b)if(p=b[s],s!="children"){if(s=="dangerouslySetInnerHTML")r=p;else if(!(s in h)){if(s=="value"&&"defaultValue"in h||s=="checked"&&"defaultChecked"in h)continue;D(e,s,null,p,i)}}for(s in h)p=h[s],s=="children"?f=p:s=="dangerouslySetInnerHTML"?a=p:s=="value"?g=p:s=="checked"?$=p:c&&typeof p!="function"||b[s]===p||D(e,s,p,b[s],i);if(a)c||r&&(a.__html==r.__html||a.__html==e.innerHTML)||(e.innerHTML=a.__html),_.__k=[];else if(r&&(e.innerHTML=""),x_(_.type=="template"?e.content:e,q(f)?f:[f],_,t,o,d=="foreignObject"?"http://www.w3.org/1999/xhtml":i,n,l,n?n[0]:t.__k&&C(t,0),c,u),n!=null)for(s=n.length;s--;)__(n[s]);c||(s="value",d=="progress"&&g==null?e.removeAttribute("value"):g!=null&&(g!==e[s]||d=="progress"&&!g||d=="option"&&g!=b[s])&&D(e,s,g,b[s],i),s="checked",$!=null&&$!=e[s]&&D(e,s,$,b[s],i))}return e}function n_(e,_,t){try{if(typeof e=="function"){var o=typeof e.__u=="function";o&&e.__u(),o&&_==null||(e.__u=e(_))}else e.current=_}catch(i){v.__e(i,t)}}function M_(e,_,t){var o,i;if(v.unmount&&v.unmount(e),(o=e.ref)&&(o.current&&o.current!=e.__e||n_(o,null,_)),(o=e.__c)!=null){if(o.componentWillUnmount)try{o.componentWillUnmount()}catch(n){v.__e(n,_)}o.base=o.__P=null}if(o=e.__k)for(i=0;i<o.length;i++)o[i]&&M_(o[i],_,t||typeof e.type!="function");t||__(e.__e),e.__c=e.__=e.__e=void 0}function R_(e,_,t){return this.constructor(e,t)}function W_(e,_,t){var o,i,n,l;_==document&&(_=document.documentElement),v.__&&v.__(e,_),i=(o=!1)?null:_.__k,n=[],l=[],t_(_,e=_.__k=e_(O,null,[e]),i||N,N,_.namespaceURI,i?null:_.firstChild?B.call(_.childNodes):null,n,i?i.__e:_.firstChild,o,l),C_(n,e,l)}B=w_.slice,v={__e:function(e,_,t,o){for(var i,n,l;_=_.__;)if((i=_.__c)&&!i.__)try{if((n=i.constructor)&&n.getDerivedStateFromError!=null&&(i.setState(n.getDerivedStateFromError(e)),l=i.__d),i.componentDidCatch!=null&&(i.componentDidCatch(e,o||{}),l=i.__d),l)return i.__E=i}catch(c){e=c}throw e}},g_=0,L.prototype.setState=function(e,_){var t;t=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=w({},this.state),typeof e=="function"&&(e=e(w({},t),this.props)),e&&w(t,e),e!=null&&this.__v&&(_&&this._sb.push(_),i_(this))},L.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),i_(this))},L.prototype.render=O,x=[],b_=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,$_=function(e,_){return e.__v.__b-_.__v.__b},I.__r=0,k_=/(PointerCapture)$|Capture$/i,Z=0,J=s_(!1),K=s_(!0);var P_=function(e,_,t,o){var i;_[0]=0;for(var n=1;n<_.length;n++){var l=_[n++],c=_[n]?(_[0]|=l?1:2,t[_[n++]]):_[++n];l===3?o[0]=c:l===4?o[1]=Object.assign(o[1]||{},c):l===5?(o[1]=o[1]||{})[_[++n]]=c:l===6?o[1][_[++n]]+=c+"":l?(i=e.apply(c,P_(e,c,t,["",null])),o.push(i),c[0]?_[0]|=2:(_[n-2]=0,_[n]=i)):o.push(c)}return o},c_=new Map;function I_(e){var _=c_.get(this);return _||(_=new Map,c_.set(this,_)),(_=P_(this,_.get(e)||(_.set(e,_=function(t){for(var o,i,n=1,l="",c="",u=[0],s=function(f){n===1&&(f||(l=l.replace(/^\s*\n\s*|\s*\n\s*$/g,"")))?u.push(0,f,l):n===3&&(f||l)?(u.push(3,f,l),n=2):n===2&&l==="..."&&f?u.push(4,f,0):n===2&&l&&!f?u.push(5,0,!0,l):n>=5&&((l||!f&&n===5)&&(u.push(n,0,l,i),n=6),f&&(u.push(n,f,0,i),n=6)),l=""},a=0;a<t.length;a++){a&&(n===1&&s(),s(a));for(var r=0;r<t[a].length;r++)o=t[a][r],n===1?o==="<"?(s(),u=[u],n=3):l+=o:n===4?l==="--"&&o===">"?(n=1,l=""):l=o+l[0]:c?o===c?c="":l+=o:o==='"'||o==="'"?c=o:o===">"?(s(),n=1):n&&(o==="="?(n=5,i=l,l=""):o==="/"&&(n<5||t[a][r+1]===">")?(s(),n===3&&(u=u[0]),n=u,(u=u[0]).push(2,0,n),n=0):o===" "||o==="	"||o===`
`||o==="\r"?(s(),n=2):l+=o),n===3&&l==="!--"&&(n=4,u=u[0])}return s(),u}(e)),_),arguments,[])).length>1?_:_[0]}var A=I_.bind(e_),j,m,V,u_,X=0,N_=[],y=v,a_=y.__b,f_=y.__r,p_=y.diffed,h_=y.__c,d_=y.unmount,v_=y.__;function T_(e,_){y.__h&&y.__h(m,e,X||_),X=0;var t=m.__H||(m.__H={__:[],__h:[]});return e>=t.__.length&&t.__.push({}),t.__[e]}function m_(e){return X=1,j_(U_,e)}function j_(e,_,t){var o=T_(j++,2);if(o.t=e,!o.__c&&(o.__=[U_(void 0,_),function(c){var u=o.__N?o.__N[0]:o.__[0],s=o.t(u,c);u!==s&&(o.__N=[s,o.__[1]],o.__c.setState({}))}],o.__c=m,!m.__f)){var i=function(c,u,s){if(!o.__c.__H)return!0;var a=o.__c.__H.__.filter(function(f){return!!f.__c});if(a.every(function(f){return!f.__N}))return!n||n.call(this,c,u,s);var r=o.__c.props!==c;return a.forEach(function(f){if(f.__N){var p=f.__[0];f.__=f.__N,f.__N=void 0,p!==f.__[0]&&(r=!0)}}),n&&n.call(this,c,u,s)||r};m.__f=!0;var n=m.shouldComponentUpdate,l=m.componentWillUpdate;m.componentWillUpdate=function(c,u,s){if(this.__e){var a=n;n=void 0,i(c,u,s),n=a}l&&l.call(this,c,u,s)},m.shouldComponentUpdate=i}return o.__N||o.__}function B_(e,_){var t=T_(j++,3);!y.__s&&z_(t.__H,_)&&(t.__=e,t.u=_,m.__H.__h.push(t))}function q_(){for(var e;e=N_.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(R),e.__H.__h.forEach(Y),e.__H.__h=[]}catch(_){e.__H.__h=[],y.__e(_,e.__v)}}y.__b=function(e){m=null,a_&&a_(e)},y.__=function(e,_){e&&_.__k&&_.__k.__m&&(e.__m=_.__k.__m),v_&&v_(e,_)},y.__r=function(e){f_&&f_(e),j=0;var _=(m=e.__c).__H;_&&(V===m?(_.__h=[],m.__h=[],_.__.forEach(function(t){t.__N&&(t.__=t.__N),t.u=t.__N=void 0})):(_.__h.forEach(R),_.__h.forEach(Y),_.__h=[],j=0)),V=m},y.diffed=function(e){p_&&p_(e);var _=e.__c;_&&_.__H&&(_.__H.__h.length&&(N_.push(_)!==1&&u_===y.requestAnimationFrame||((u_=y.requestAnimationFrame)||O_)(q_)),_.__H.__.forEach(function(t){t.u&&(t.__H=t.u),t.u=void 0})),V=m=null},y.__c=function(e,_){_.some(function(t){try{t.__h.forEach(R),t.__h=t.__h.filter(function(o){return!o.__||Y(o)})}catch(o){_.some(function(i){i.__h&&(i.__h=[])}),_=[],y.__e(o,t.__v)}}),h_&&h_(e,_)},y.unmount=function(e){d_&&d_(e);var _,t=e.__c;t&&t.__H&&(t.__H.__.forEach(function(o){try{R(o)}catch(i){_=i}}),t.__H=void 0,_&&y.__e(_,t.__v))};var y_=typeof requestAnimationFrame=="function";function O_(e){var _,t=function(){clearTimeout(o),y_&&cancelAnimationFrame(_),setTimeout(e)},o=setTimeout(t,35);y_&&(_=requestAnimationFrame(t))}function R(e){var _=m,t=e.__c;typeof t=="function"&&(e.__c=void 0,t()),m=_}function Y(e){var _=m;e.__c=e.__(),m=_}function z_(e,_){return!e||e.length!==_.length||_.some(function(t,o){return t!==e[o]})}function U_(e,_){return typeof _=="function"?_(e):_}function V_(e){var _=Math.floor((new Date-e)/1e3),t=_/31536e3;return t>1?Math.floor(t)+" years":(t=_/2592e3,t>1?Math.floor(t)+" months":(t=_/86400,t>1?Math.floor(t)+" days":(t=_/3600,t>1?Math.floor(t)+" hours":(t=_/60,t>1?Math.floor(t)+" minutes":Math.floor(_)+" seconds"))))}const W="https://mathstodon.xyz";async function G_(e){const _=`${W}/api/v1/statuses/${e}/context`,t=await fetch(_);if(!t.ok)throw new Error(`Response status: ${t.status}`);return await t.json()}function J_({postId:e}){const[_,t]=m_(null),[o,i]=m_(null);return B_(async()=>{try{const n=await G_(e);t(n.descendants),i(null)}catch{i("Unable to load comments")}},[]),o?A`
      <div class="comments_loading">${o}</div>
    `:_===null?A`
      <div class="comments_loading">
        <div class="spinner threebody">
          <div class="threebody-o"><div/><div/><div/></div>
        </div>
        <div>Loading comments...</div>
      </div>`:A`
      <div class="comments">
        <div class="comments_meta">
          <div class="comments_count">${_.length} ${_.length===1?"Comment":"Comments"}</div>
          <a href="${W}/@rreusser/${e}">Reply on Mastodon →</a>
        </div>
        ${_.map(n=>A`
          <a class="comment" href="${W}/@${n.account.acct}/${n.id}">
            <div class="comment_meta">
              <a href=${n.account.url} class="comment_user">
                <img src=${n.account.avatar_static}/>
                <div>
                  <div class="comment_displayname">${n.account.display_name}</div>
                  <div class="comment_commenter">${n.account.acct}</div>
                </div>
              </div
              </a>
              <a class="comment_ago" href="${W}/@${n.account.acct}/${n.id}">
                ${V_(new Date(n.created_at))} ago
              </a>
            </div>
            <div key=${n.id} class="comment_content" dangerouslySetInnerHTML=${{__html:n.content}}/>
          </a>
        `)}
      </div>
    `}const G=document.getElementById("comment-root");G&&W_(e_(J_,{postId:G.getAttribute("data-post-id")}),G);
