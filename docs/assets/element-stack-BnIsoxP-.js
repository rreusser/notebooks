function w(){const e=document.createElement("div");return e.style.position="relative",e}function h({container:e=null,width:n=null,height:r=null,layers:p={},onResize:l=null}={}){e=e??w(),n!=null&&(e._width=n),r!=null&&(e._height=r);const d=e.getAttribute("data-on-resize");return l&&!d&&(new ResizeObserver(([{contentRect:a}])=>{l({layers:e.value,rect:a}),e.dispatchEvent(new CustomEvent("input"))}).observe(e),e.setAttribute("data-on-resize",l)),e.value=e.value||{},e.update||(e.update=function(u){const a=e._width,s=e._height,t=e.value;for(const[i,v]of Object.entries(u)){const y=typeof v=="function"?v:v.layer,f=e.querySelector(`[data-layer="${i}"]`),o=y({current:f,width:a,height:s});o.setAttribute("data-layer",i),o.style.position||(o.style.position="absolute"),t[i]=o,f?f.replaceWith(o):e.appendChild(o)}return e.dispatchEvent(new CustomEvent("update")),t}),e.update(p),n&&(e.style.width=`${n}px`),r&&(e.style.height=`${r}px`),e}function x(e,n){const{create:r,invert:p,ortho:l}=e,d=n({uniforms:{view:n.prop("view"),viewInverse:n.prop("viewInverse")},context:{view:n.prop("view"),viewInverse:n.prop("viewInverse")},scissor:{enable:!0,box:{x:({pixelRatio:s},{xRange:[t,i]})=>t*s,y:({pixelRatio:s,framebufferHeight:t},{yRange:[i,v]})=>t-i*s,width:({pixelRatio:s},{xRange:[t,i]})=>(i-t)*s,height:({pixelRatio:s},{yRange:[t,i]})=>(t-i)*s}},viewport:{x:({pixelRatio:s},{xRange:[t,i]})=>t*s,y:({pixelRatio:s,framebufferHeight:t},{yRange:[i,v]})=>t-i*s,width:({pixelRatio:s},{xRange:[t,i]})=>(i-t)*s,height:({pixelRatio:s},{yRange:[t,i]})=>(t-i)*s}}),u=r(),a=r();return function(s,t,i){l(u,...s.domain,...t.domain,-1,1),p(a,u),d({view:u,viewInverse:a,xRange:s.range,yRange:t.range},i)}}export{x as createAxisConfiguration,h as createElementStack,w as initializeElementStack};
