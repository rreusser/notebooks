import{d as u,_ as p}from"./index-ByB2dbry.js";u({root:document.getElementById("cell-2"),expanded:[],variables:[]},{id:2,body:async()=>{const[{default:i},{default:e},{Mesh:a},{MeshPhysics:s},{createReglCamera:o},{createMeshRenderer:n},{MeshInteractions:d},{expandable:c}]=await Promise.all([p(()=>import("https://cdn.jsdelivr.net/npm/regl@2.1.1/+esm"),[]).then(t=>{if(!("default"in t))throw new SyntaxError("export 'default' not found");return t}),p(()=>import("https://cdn.jsdelivr.net/npm/icosphere@1.0.0/+esm"),[]).then(t=>{if(!("default"in t))throw new SyntaxError("export 'default' not found");return t}),p(()=>import("./mesh-Nj3s6yAF.js"),[]).then(t=>{if(!("Mesh"in t))throw new SyntaxError("export 'Mesh' not found");return t}),p(()=>import("./mesh-physics-Bz01nwPL.js"),[]).then(t=>{if(!("MeshPhysics"in t))throw new SyntaxError("export 'MeshPhysics' not found");return t}),p(()=>import("./orbit-camera-BflaeugX.js"),[]).then(t=>{if(!("createReglCamera"in t))throw new SyntaxError("export 'createReglCamera' not found");return t}),p(()=>import("./mesh-renderer-nH6C4KyQ.js"),[]).then(t=>{if(!("createMeshRenderer"in t))throw new SyntaxError("export 'createMeshRenderer' not found");return t}),p(()=>import("./mesh-interactions-BTSnxBEc.js"),[]).then(t=>{if(!("MeshInteractions"in t))throw new SyntaxError("export 'MeshInteractions' not found");return t}),p(()=>import("./expandable-dZkDG0zz.js"),[]).then(t=>{if(!("expandable"in t))throw new SyntaxError("export 'expandable' not found");return t})]);return{createREGL:i,createIcosphere:e,Mesh:a,MeshPhysics:s,createReglCamera:o,createMeshRenderer:n,MeshInteractions:d,expandable:c}},inputs:[],outputs:["createREGL","createIcosphere","Mesh","MeshPhysics","createReglCamera","createMeshRenderer","MeshInteractions","expandable"],output:void 0,assets:void 0,autodisplay:!1,autoview:void 0,automutable:void 0});u({root:document.getElementById("cell-3"),expanded:[],variables:[]},{id:3,body:async()=>{const i={"C60 Fullerene":"285549ab8794137fcd23df05ec4e9092c4a9fa65e3b32c2c6a22ddf0320eca5e14553c6508e4977271b82a1225eda231cec6f30a027bb8440ed879d1d3431ef6.json","C180 Fullerene":"89e6cd62cbc3ba07f7f8e42357d426f9fbb8f9f607e3e0f11c7036fcc512d9dab8712b3fe3c272f93865bcaf88ab02918e2ddb226129ee9efa669eab89f9b7f3.json","C320 Fullerene":"40df7e811a5f2b9b46905da0db746bc46aff5c9ce62808034f8346d3daf566feb14aacf6cd1015d5ee97dc1ed27f42920c248bb71d1b0a211641d03126d8bfaf.json","C500 Fullerene":"85c5997bcd60d3500b3769a5790c1575b144161f77eb1f4f0a11ca567a5dbaae4750d466914794e6932be17f888982a24d5e65a9a2ba3e271d2afc9a179f675d.json",Dodecahedron:"5c4ad379870a7172f016427cfeb62e60bcc3fac83d22395ab102f8d0e94eaf6a4241a0d27b5d8ce5749698c05b0ee630b20582182e745050f0a5d9f2e9d37b0e.json","C240 Torus":"3ecdf5c8f9be6ac3a837d7b6dd37485f7017be2ed7fc94d304c2b4f67d01bea5dc9528dd5b4c0507a3bb21fa38c2d7f30c4cd0decc7a6077c18e2ce3354780b1.json","C360 Torus":"8c59424c3fbed403e573864733e1bf196fd469dd63f88893629a9dbebf68820ade9bded97d440903bf482e29b642cd27191fd9154384756152c414402b12f9d1.json","C260-I[5,7]":"a139509092ab0080b3c1241f830977069dc68e4a7ea9834d668f9d9d760961b792b8e23f0f9212337cbd94d436a85d99a788b2fc4d6ef13d562b49b2ef35a310.json","C28[5,7]-D7d":"359455189eea4a1145be307cc8807dcca71442982915a220265a52dec420ca5a42106a8488dbf449491da526f91a1f60798d599661aa0be7eb477ebb3b77d33e.json","C28-Td[5,6]":"f5e02e4b9d7f7a440b3231d45943410bfdc50ac98c4b7275dfe17f746609d7871c653b0901c2fead87d894b52cdf4caa2e523aa5e5ac2848936a9bb4790f9021.json","C120 Peanut Fulleroid":"ee4ed30808162fdbff7f048268befca6b331881585e4e5e31ea05d66aafeb6190f622b2cffad4712f835b87b364fa35de96bbaf7c7a134b279f45a877d1cf038.json","C168 Peanut Fulleroid":"b31fdfb8b21f79a14cf81320b73fa344c07421f154e7d0dbfaded7dfa5ae73ed3007ffc9ed572e262de9b4bcd031823de18f474891190a2401eb6448c5898f47.json","Double Torus":"1176e7fad2a420d228f5df155bfd24be06983f5fbf4234124abf8cfd514d24993f9e184cbdbc36ff0fecb010739e8ff5a713247944c186fdf82b877a42bf85ee.json",Capsule:"dff7700c3743989f282f9e58f71ae9d7596f5c78efa149c5e9a7717a7066a9c6b1870085b4aa7922288c7f3cdce4660b82fb0de5923185c165c3469d5b784037.json","C360-D5h[5,6,7]":"89dccf254f8755ae6a0d1910af95cf8f08d32820ad0a1bba395b71bbdfaf4f97d469ee5775e7e49552bcbf1baab5f0109a2e57ee4b02ca988358e9686ce700ad.json","Genus-3 Torus":"a148f1c143188de55a41b12791380026e0c0a5420e9d65070d034aa3dd6f7f5f914d91fc0d3ac67e70a62340eaeb466a7aeb624becb3c83f1995234c429728cc.json","Klein Quartic":"f220e2d7f29b956c39640b7dc4173f211fa43c14d7dec7b30d4dab14b4082356e621ae77b433221941bef90638b84398458b1ed0cf49ebe17151721aa0be53f8.json",Metadodecahedron:"e0e175da2922fa1d47825c0a0001cd3b6db9f9d6e872c04abf2fa068c0649cf37f8a4084ab85eac11359d01d464350f3b9b33d7a0d682b526999b95063a4ecf5.json","Genus-3 Extended":"e1fa5b0e879607a25bbbc2ffcb0170fca6ba4b5b2652a0f0df3775c751c6ccf0bbaa30687d6c2d9bfeefa71c27d394f8aac824f330620995a5d647d57ad84777.json"},e=await(async()=>{const a={Starter:{vertices:[[-1,-1,0],[-1,1,0],[-.5,0,0],[.5,0,0],[1,-1,0],[1,1,0]],edges:[[0,2],[1,2],[2,3],[3,4],[3,5]]}},s=Object.entries(i),o=await Promise.all(s.map(async([n,d])=>{try{const t=await(await fetch(`./files/${d}`)).json();return[n,t]}catch(c){return console.warn(`Failed to load ${n}:`,c),null}}));for(const n of o)if(n){const[d,c]=n;a[d]=c}return a})();return{presetFiles:i,presetGraphs:e}},inputs:[],outputs:["presetFiles","presetGraphs"],output:void 0,assets:void 0,autodisplay:!1,autoview:void 0,automutable:void 0});u({root:document.getElementById("cell-4"),expanded:[],variables:[]},{id:4,body:(i,e,a,s,o)=>{const n=i`<div class="controls-panel"></div>`;function d(g){return n.appendChild(g),e.input(g)}const c=d(a.select(Object.keys(s),{label:"Preset",value:"C260-I[5,7]"})),t=d(a.button("Reset")),m=d(a.toggle({label:"Simulate",value:!0})),r=d(a.range([0,200],{label:"Iterations per frame",value:1,step:1})),h=d(a.range([0,2],{label:"Axial spring constant",value:1,step:.01})),v=d(a.range([.1,2],{label:"Equilibrium length, l₀",value:1,step:.01})),w=d(a.range([1,180],{label:"Equilibrium bending angle, θ₀",value:150,step:1})),_=d(a.range([0,2],{label:"Bending spring constant",value:.3,step:.01})),E=d(a.range([0,.2],{label:"Torsional spring constant",value:.1,step:.01})),C=d(a.range([0,5],{label:"Axial strain coloring",value:1.5,step:.1})),k=d(a.range([.5,5],{label:"Vertex size",value:3,step:.5})),R=d(a.toggle({label:"Show faces",value:!0})),l=d(a.range([0,1],{label:"Face opacity",value:.3,step:.05}));return o(n),{controlsContainer:n,ctrl:d,presetGraph:c,resetButton:t,simulate:m,iterations:r,k:h,l0:v,theta0:w,kBend:_,kTorsion:E,strainColoring:C,pointSize:k,showFaces:R,faceOpacity:l}},inputs:["html","Generators","Inputs","presetGraphs","display"],outputs:["controlsContainer","ctrl","presetGraph","resetButton","simulate","iterations","k","l0","theta0","kBend","kTorsion","strainColoring","pointSize","showFaces","faceOpacity"],output:void 0,assets:void 0,autodisplay:!1,autoview:void 0,automutable:void 0});u({root:document.getElementById("cell-5"),expanded:[],variables:[]},{id:5,body:()=>({state:{mesh:null,physics:null,interactions:null,renderer:null,camera:null,regl:null,frame:null,dirty:!0,presetName:"",expandedState:{expanded:!1}}}),inputs:[],outputs:["state"],output:void 0,assets:void 0,autodisplay:!1,autoview:void 0,automutable:void 0});u({root:document.getElementById("cell-6"),expanded:[],variables:[]},{id:6,body:(i,e,a,s,o)=>{const n=e||"Starter";if(n!==a.presetName||!a.mesh){a.presetName=n;const d=s[n];d&&(a.mesh=o.fromJSON(d),a.mesh.center(),a.physics&&(a.physics.mesh=a.mesh),a.interactions&&(a.interactions.mesh=a.mesh,a.interactions.selectedVertexIndex=-1,a.interactions.hoverVertexIndex=-1),a.dirty=!0)}return{currentPreset:n}},inputs:["resetButton","presetGraph","state","presetGraphs","Mesh"],outputs:["currentPreset"],output:void 0,assets:void 0,autodisplay:!1,autoview:void 0,automutable:void 0});u({root:document.getElementById("cell-7"),expanded:[],variables:[]},{id:7,body:(i,e,a,s,o,n)=>{i.physics&&(i.physics.k=e,i.physics.l0=a,i.physics.theta0=s,i.physics.kBend=o*a*a,i.physics.kTorsion=n*a*a)},inputs:["state","k","l0","theta0","kBend","kTorsion"],outputs:[],output:void 0,assets:void 0,autodisplay:!1,autoview:void 0,automutable:void 0});u({root:document.getElementById("cell-8"),expanded:[],variables:[]},{id:8,body:(i,e,a,s,o,n,d,c,t,m,r,h,v,w,_,E,C,k,R)=>{const l=i`<div id="mesh-canvas" style="width: 100%; height: 100%;"></div>`;if(!e.regl){e.regl=a({container:l,pixelRatio:devicePixelRatio,extensions:["ANGLE_instanced_arrays"],attributes:{preserveDrawingBuffer:!0}});const f=s(1);e.camera=o(e.regl,{eye:[0,1,-20]}),e.renderer=n(e.regl,f),e.physics=new d(e.mesh),e.interactions=new c(e.regl._gl.canvas,e.mesh,e.camera.camera,{projectionView:e.camera.projectionView,onChange:()=>{e.dirty=!0}})}const g=()=>{if(!e.regl)return;const f=e.regl._gl.canvas,y=l.getBoundingClientRect(),b=devicePixelRatio,x=Math.floor(y.width*b),S=Math.floor(y.height*b);(f.width!==x||f.height!==S)&&(f.width=x,f.height=S,e.dirty=!0,e.camera?.taint())},j=new t(g);j.observe(l);let I=!0;const M=new m(f=>{I=f[0].intersectionRatio>0});M.observe(l),e.frame&&(e.frame.cancel(),e.frame=null),e.frame=e.regl.frame(()=>{!I||!e.mesh||e.camera.tick(({dirty:f})=>{if(r||e.dirty||f||e.interactions?.dirty){if(r&&e.physics){e.physics.frozenVertex=e.interactions?.activeVertexIndex??-1;for(let b=0;b<h;b++)e.physics.iterate()}e.regl.clear({color:[1,1,1,1],depth:1}),e.renderer?.render(e.mesh,e.physics,{pointSize:v,strainColoring:w,showFaces:_,faceOpacity:E,selectedVertexIndex:e.interactions?.selectedVertexIndex??-1,hoverVertexIndex:e.interactions?.hoverVertexIndex??-1}),e.dirty=!1,e.interactions&&(e.interactions.dirty=!1)}})}),C.then(()=>{e.frame&&(e.frame.cancel(),e.frame=null),j.disconnect(),M.disconnect()});const P=i`
  <figure id="main-figure" style="max-width: none; margin: 0; height: 100%;">
${l}
<figcaption>
  Click a vertex to select, then click to add a new vertex or click an existing vertex to create a connection.
  <kbd>Space</kbd> to deselect.
  <kbd>Backspace</kbd> deletes vertices, <kbd>s</kbd>/<kbd>c</kbd> splits/collapses vertices of degree 2.
  <kbd>e</kbd> to explode a vertex.
  Drag to rotate, <kbd>Shift</kbd> + drag to pan, <kbd>a</kbd> to aim camera at selected vertex.
</figcaption>
  </figure>
`;return k(R(P,{width:640,height:576,padding:[0,0],controls:".controls-panel",state:e.expandedState,onResize:(f,y,b,x)=>{l.style.width=`${y}px`,l.style.height=x?`${b-60}px`:`${b}px`,g()}})),{container:l,resizeCanvas:g,resizeObserver:j,visible:I,intersectionObserver:M,figure:P}},inputs:["html","state","createREGL","createIcosphere","createReglCamera","createMeshRenderer","MeshPhysics","MeshInteractions","ResizeObserver","IntersectionObserver","simulate","iterations","pointSize","strainColoring","showFaces","faceOpacity","invalidation","display","expandable"],outputs:["container","resizeCanvas","resizeObserver","visible","intersectionObserver","figure"],output:void 0,assets:void 0,autodisplay:!1,autoview:void 0,automutable:void 0});u({root:document.getElementById("cell-9"),expanded:[],variables:[]},{id:9,body:(i,e,a,s)=>{const o=(()=>{if(!e.mesh)return null;const n=e.mesh,d=[];for(let r=0;r<n.vertexCount;r++){const h=n.getPosition(r);d.push({index:r,position:[h[0].toFixed(2),h[1].toFixed(2),h[2].toFixed(2)],degree:n.degree(r),neighbors:n.getNeighbors(r)})}const c=[];for(let r=0;r<n.edgeCount;r++)c.push([n.edges[r*2],n.edges[r*2+1]]);const m=n.extractAllFaces().map(r=>({vertices:r,length:r.length,signedArea:n._computeSignedArea(r).toFixed(4),included:r.length<=8&&n._computeSignedArea(r)>0}));return{vertexCount:n.vertexCount,edgeCount:n.edgeCount,vertices:d,edges:c,faces:m}})();return a(s`<details>
  <summary>Debug: Mesh Data (${e.mesh?.vertexCount??0} vertices, ${e.mesh?.edgeCount??0} edges, ${o?.faces?.filter(n=>n.included).length??0} faces)</summary>
  <pre style="max-height: 300px; overflow: auto; font-size: 11px;">${JSON.stringify(o,null,2)}</pre>
</details>`),{debugData:o}},inputs:["simulate","state","display","html"],outputs:["debugData"],output:void 0,assets:void 0,autodisplay:!1,autoview:void 0,automutable:void 0});u({root:document.getElementById("cell-10"),expanded:[],variables:[]},{id:10,body:(i,e)=>{i(e`
  <style>
kbd {
  background-color: #eee;
  border-radius: 3px;
  border: 1px solid #b4b4b4;
  box-shadow: 0 1px 1px rgba(0, 0, 0, .2), 0 2px 0 0 rgba(255, 255, 255, .7) inset;
  color: #333;
  display: inline-block;
  font-size: .85em;
  font-weight: 700;
  line-height: 1;
  padding: 2px 4px;
  white-space: nowrap;
}
figure canvas {
  border: 1px solid #eee !important;
}
  </style>
`)},inputs:["display","html"],outputs:[],output:void 0,assets:void 0,autodisplay:!1,autoview:void 0,automutable:void 0});
