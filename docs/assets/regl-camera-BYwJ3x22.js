function I(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Z=function(i,t){t||(t=[0,""]),i=String(i);var n=parseFloat(i,10);return t[0]=n,t[1]=i.match(/[\d.\-\+]*\s*(.*)/)[1]||"",t},k=Z,q=Y,g=96,_={ch:8,ex:7.15625,em:16,rem:16,in:g,cm:g/2.54,mm:g/25.4,pt:g/72,pc:g/6,px:1};function Y(e){if(!e)return null;if(_[e])return _[e];var i=k(e);if(!isNaN(i[0])&&i[1]){var t=Y(i[1]);return typeof t=="number"?i[0]*t:null}return null}var N=q,U=B;function B(e,i,t){typeof e=="function"&&(t=!!i,i=e,e=window);var n=N("ex"),a=function(d){t&&d.preventDefault();var p=d.deltaX||0,h=d.deltaY||0,y=d.deltaZ||0,u=d.deltaMode,f=1;switch(u){case 1:f=n;break;case 2:f=window.innerHeight;break}if(p*=f,h*=f,y*=f,p||h||y)return i(p,h,y,d)};return e.addEventListener("wheel",a),a}var H=R;function R(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}var G=J;function J(e,i,t,n,a){var d=1/Math.tan(i/2),p=1/(n-a);return e[0]=d/t,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=d,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(a+n)*p,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*a*n*p,e[15]=0,e}var K=H,Q=T;function T(e,i,t,n){var a,d,p,h,y,u,f,s,l,o,w=i[0],M=i[1],x=i[2],j=n[0],z=n[1],m=n[2],r=t[0],c=t[1],v=t[2];return Math.abs(w-r)<1e-6&&Math.abs(M-c)<1e-6&&Math.abs(x-v)<1e-6?K(e):(f=w-r,s=M-c,l=x-v,o=1/Math.sqrt(f*f+s*s+l*l),f*=o,s*=o,l*=o,a=z*l-m*s,d=m*f-j*l,p=j*s-z*f,o=Math.sqrt(a*a+d*d+p*p),o?(o=1/o,a*=o,d*=o,p*=o):(a=0,d=0,p=0),h=s*p-l*d,y=l*a-f*p,u=f*d-s*a,o=Math.sqrt(h*h+y*y+u*u),o?(o=1/o,h*=o,y*=o,u*=o):(h=0,y=0,u=0),e[0]=a,e[1]=h,e[2]=f,e[3]=0,e[4]=d,e[5]=y,e[6]=s,e[7]=0,e[8]=p,e[9]=u,e[10]=l,e[11]=0,e[12]=-(a*w+d*M+p*x),e[13]=-(h*w+y*M+u*x),e[14]=-(f*w+s*M+l*x),e[15]=1,e)}var V=U,C=H,ee=G,ne=Q,te=re,X=typeof window<"u";function re(e,i){var t=i||{};typeof t.noScroll>"u"&&(t.noScroll=t.preventDefault);var n={view:C(new Float32Array(16)),projection:C(new Float32Array(16)),center:new Float32Array(t.center||3),theta:t.theta||0,phi:t.phi||0,distance:Math.log(t.distance||10),eye:new Float32Array(3),up:new Float32Array(t.up||[0,1,0]),fovy:t.fovy||Math.PI/4,near:typeof t.near<"u"?t.near:.01,far:typeof t.far<"u"?t.far:1e3,noScroll:typeof t.noScroll<"u"?t.noScroll:!1,noZoom:typeof t.noZoom<"u"?t.noZoom:!1,flipY:!!t.flipY,dtheta:0,dphi:0,rotationSpeed:typeof t.rotationSpeed<"u"?t.rotationSpeed:1,zoomSpeed:typeof t.zoomSpeed<"u"?t.zoomSpeed:1,renderOnDirty:typeof t.renderOnDirty!==void 0?!!t.renderOnDirty:!1},a=t.element,d=typeof t.damping<"u"?t.damping:.9,p=new Float32Array([1,0,0]),h=new Float32Array([0,0,1]),y=Math.log("minDistance"in t?t.minDistance:.1),u=Math.log("maxDistance"in t?t.maxDistance:1e3),f=0,s=0,l=0;if(X&&t.mouse!==!1){let r=function(){return a?a.offsetWidth:window.innerWidth},c=function(){return a?a.offsetHeight:window.innerHeight};var o=a||e._gl.canvas,w=!1;o.addEventListener("mousedown",function(v){v.button===0&&(w=!0,s=v.clientX,l=v.clientY)}),window.addEventListener("mousemove",function(v){if(w){var D=(v.clientX-s)/r(),A=(v.clientY-l)/c();n.dtheta+=n.rotationSpeed*4*D,n.dphi+=n.rotationSpeed*4*A,n.dirty=!0,s=v.clientX,l=v.clientY}}),window.addEventListener("mouseup",function(v){v.button===0&&(w=!1)}),n.noZoom||V(o,function(v,D){f+=D/c()*n.zoomSpeed,n.dirty=!0},t.noScroll)}function M(r){var c=r*d;return Math.abs(c)<.1?0:(n.dirty=!0,c)}function x(r,c,v){return Math.min(Math.max(r,c),v)}function j(r){Object.keys(r).forEach(function(P){n[P]=r[P]});var c=n.center,v=n.eye,D=n.up,A=n.dtheta,E=n.dphi;n.theta+=A,n.phi=x(n.phi+E,-Math.PI/2,Math.PI/2),n.distance=x(n.distance+f,y,u),n.dtheta=M(A),n.dphi=M(E),f=M(f);for(var F=n.theta,O=n.phi,b=Math.exp(n.distance),$=b*Math.sin(F)*Math.cos(O),L=b*Math.cos(F)*Math.cos(O),W=b*Math.sin(O),S=0;S<3;++S)v[S]=c[S]+$*h[S]+L*p[S]+W*D[S];ne(n.view,v,c,D)}n.dirty=!0;var z=e({context:Object.assign({},n,{dirty:function(){return n.dirty},projection:function(r){return ee(n.projection,n.fovy,r.viewportWidth/r.viewportHeight,n.near,n.far),n.flipY&&(n.projection[5]*=-1),n.projection}}),uniforms:Object.keys(n).reduce(function(r,c){return r[c]=e.context(c),r},{})});function m(r,c){typeof m.dirty<"u"&&(n.dirty=m.dirty||n.dirty,m.dirty=void 0),r&&c&&(n.dirty=!0),!(n.renderOnDirty&&!n.dirty)&&(c||(c=r,r={}),j(r),z(c),n.dirty=!1)}return Object.keys(n).forEach(function(r){m[r]=n[r]}),m.element=a||(X?e._gl.canvas:null),m.taint=function(){n.dirty=!0},m.state=n,m}var ae=I(te);export{ae as default};
