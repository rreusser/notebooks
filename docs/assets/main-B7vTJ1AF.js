const w="pk.eyJ1IjoicnNyZXVzc2VyIiwiYSI6ImNtandiOWhucjRmdmwzam9qcGR5dnppaGUifQ.6rnP5lJ07E64p724diNzaQ",E="101pM5uZK0TZt",T="https://api.mapbox.com/raster/v1/mapbox.mapbox-terrain-dem-v1/$z/$x/$y.webp?sku=$SKU&access_token=$ACCESS_TOKEN",S="https://api.mapbox.com/v4/mapbox.satellite/$z/$x/$y@2x.webp?sku=$SKU&access_token=$ACCESS_TOKEN";function $(e,t,n){return function({x:r,y:s,z:l}){return new Promise((h,d)=>{const p=e.replace("$x",r).replace("$y",s).replace("$z",l).replace("$SKU",E).replace("$ACCESS_TOKEN",w);n(p,t).then(a=>{const c=Math.pow(2,Math.floor(Math.log2(a.width))),u=(a.width-c)/2;h({img:a,width:a.width,height:a.height,tileSize:c,buffer:u})}).catch(()=>d(new Error("Failed to load terrain tile")))})}}function m(e){const t=e.length/4,n=new Float32Array(t);for(let o=0;o<t;o++)n[o]=-1e4+.1*(e[4*o]<<16|e[4*o+1]<<8|e[4*o+2]);return n}function I(e,t){return new Promise((n,o)=>{const r=new t;r.crossOrigin="Anonymous",r.onload=()=>n(r),r.onerror=()=>o(new Error("Failed to load image")),r.src=e})}function i(e){return $(e,Image,I)}const x=i(T),N=i(S);function f(e){const t=document.createElement("canvas");t.width=e.width,t.height=e.height;const n=t.getContext("2d");return n.drawImage(e,0,0),n.getImageData(0,0,e.width,e.height).data}const g=m;export{g as decodeTerrainData,N as getSatelliteTile,x as getTerrainTile,f as readImageData};
