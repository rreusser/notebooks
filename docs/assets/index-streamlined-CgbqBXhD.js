import{d as g,_ as b}from"./index-ByB2dbry.js";g({root:document.getElementById("cell-1"),expanded:[],variables:[]},{id:1,body:async()=>{const[{getTerrainTile:f,readImageData:p,decodeTerrainData:c},{getParentTilesAtLevel:m,assembleParentTileBufferMultiLevel:s},{computeLSAOCPU:d},{calculateLevelInfo:t}]=await Promise.all([b(()=>import("./main-D-GlyvSx.js"),[]).then(e=>{if(!("getTerrainTile"in e))throw new SyntaxError("export 'getTerrainTile' not found");if(!("readImageData"in e))throw new SyntaxError("export 'readImageData' not found");if(!("decodeTerrainData"in e))throw new SyntaxError("export 'decodeTerrainData' not found");return e}),b(()=>import("./parent-tile-assembly-multi-level-BPsu5Z-Z.js"),[]).then(e=>{if(!("getParentTilesAtLevel"in e))throw new SyntaxError("export 'getParentTilesAtLevel' not found");if(!("assembleParentTileBufferMultiLevel"in e))throw new SyntaxError("export 'assembleParentTileBufferMultiLevel' not found");return e}),b(()=>import("./lsao-cpu-D5hqpa4b.js"),[]).then(e=>{if(!("computeLSAOCPU"in e))throw new SyntaxError("export 'computeLSAOCPU' not found");return e}),b(()=>import("./lsao-pipeline-DMZya29M.js"),[]).then(e=>{if(!("calculateLevelInfo"in e))throw new SyntaxError("export 'calculateLevelInfo' not found");return e})]);return{getTerrainTile:f,readImageData:p,decodeTerrainData:c,getParentTilesAtLevel:m,assembleParentTileBufferMultiLevel:s,computeLSAOCPU:d,calculateLevelInfo:t}},inputs:[],outputs:["getTerrainTile","readImageData","decodeTerrainData","getParentTilesAtLevel","assembleParentTileBufferMultiLevel","computeLSAOCPU","calculateLevelInfo"],output:void 0,assets:void 0,autodisplay:!1,autoview:void 0,automutable:void 0});g({root:document.getElementById("cell-3"),expanded:[],variables:[]},{id:3,body:()=>({coords:{x:795,y:1594,z:12}}),inputs:[],outputs:["coords"],output:void 0,assets:void 0,autodisplay:!1,autoview:void 0,automutable:void 0});g({root:document.getElementById("cell-4"),expanded:[],variables:[]},{id:4,body:(f,p)=>({numLevelsInput:f(p.range([1,3],{value:1,step:1,label:"Number of parent levels"}))}),inputs:["view","Inputs"],outputs:["numLevelsInput"],output:void 0,assets:void 0,autodisplay:!1,autoview:void 0,automutable:void 0});g({root:document.getElementById("cell-5"),expanded:[],variables:[]},{id:5,body:async(f,p,c,m)=>{const s=await f(p),d=c(s.img),t=m(d);let e=1/0,i=-1/0;for(let n=0;n<t.length;n++)t[n]<e&&(e=t[n]),t[n]>i&&(i=t[n]);const o=512,l=1,a=o+2*l,u=new Float32Array(a*a);for(let n=0;n<o;n++)for(let r=0;r<o;r++){const x=(n+s.buffer)*s.width+(r+s.buffer),v=(n+l)*a+(r+l);u[v]=t[x]}for(let n=0;n<a;n++)u[n]=u[a+n],u[(a-1)*a+n]=u[(a-2)*a+n];for(let n=0;n<a;n++)u[n*a]=u[n*a+1],u[n*a+(a-1)]=u[n*a+(a-2)];return{targetTile:s,imageData:d,elevations:t,elevMin:e,elevMax:i,tileSize:o,buffer:l,bufferedSize:a,bufferedData:u}},inputs:["getTerrainTile","coords","readImageData","decodeTerrainData"],outputs:["targetTile","imageData","elevations","elevMin","elevMax","tileSize","buffer","bufferedSize","bufferedData"],output:void 0,assets:void 0,autodisplay:!1,autoview:void 0,automutable:void 0});g({root:document.getElementById("cell-7"),expanded:[],variables:[]},{id:7,body:(f,p,c,m,s,d,t)=>{const e=document.createElement("canvas");e.width=512,e.height=512;const i=e.getContext("2d"),o=i.createImageData(512,512);for(let l=0;l<512;l++)for(let a=0;a<512;a++){const u=(l+f.buffer)*f.width+(a+f.buffer),n=l*512+a,r=(p[u]-c)/(m-c),x=Math.floor(r*180+75),v=Math.floor(r*140+80),y=Math.floor((1-r)*120+60);o.data[n*4]=x,o.data[n*4+1]=v,o.data[n*4+2]=y,o.data[n*4+3]=255}return i.putImageData(o,0,0),s(d`<div>
  <div style="margin-bottom: 8px; font-family: sans-serif; font-size: 13px; color: #666;">
    Target tile ${t.z}/${t.x}/${t.y} | Elevation: ${c.toFixed(0)}m to ${m.toFixed(0)}m
  </div>
  ${e}
</div>`),{canvas:e,ctx:i,imgData:o}},inputs:["targetTile","elevations","elevMin","elevMax","display","html","coords"],outputs:["canvas","ctx","imgData"],output:void 0,assets:void 0,autodisplay:!1,autoview:void 0,automutable:void 0});g({root:document.getElementById("cell-8"),expanded:[],variables:[]},{id:8,body:async(f,p,c,m,s,d,t,e)=>{const i=[],o=[];for(let l=1;l<=f;l++){const a=-l,u=p(c,a),n=[];for(const x of u){const v=await m(x),y=s(v.img),h=d(y);n.push({data:h,width:v.width,height:v.height,tileSize:v.tileSize,role:x.role})}const r=t({targetTile:c,parentTiles:n,deltaZ:a,tileSize:512});i.push(r.buffer),o.push(e(a,512))}return{parentLevelsData:i,levelInfo:o}},inputs:["numLevelsInput","getParentTilesAtLevel","coords","getTerrainTile","readImageData","decodeTerrainData","assembleParentTileBufferMultiLevel","calculateLevelInfo"],outputs:["parentLevelsData","levelInfo"],output:void 0,assets:void 0,autodisplay:!1,autoview:void 0,automutable:void 0});g({root:document.getElementById("cell-10"),expanded:[],variables:[]},{id:10,body:(f,p,c,m)=>{const s=f`<div style="display: flex; flex-direction: column; gap: 24px;"></div>`;for(let d=0;d<p.length;d++){const t=c[d],e=p[d];let i=1/0,o=-1/0;for(let r=0;r<e.length;r++)e[r]<i&&(i=e[r]),e[r]>o&&(o=e[r]);const l=document.createElement("canvas");l.width=t.bufferSize,l.height=t.bufferSize;const a=l.getContext("2d"),u=a.createImageData(t.bufferSize,t.bufferSize);for(let r=0;r<t.bufferSize;r++)for(let x=0;x<t.bufferSize;x++){const v=r*t.bufferSize+x,y=(e[v]-i)/(o-i),h=Math.floor(y*180+75),I=Math.floor(y*140+80),T=Math.floor((1-y)*120+60);u.data[v*4]=h,u.data[v*4+1]=I,u.data[v*4+2]=T,u.data[v*4+3]=255}a.putImageData(u,0,0),a.strokeStyle="#ca4747",a.lineWidth=2,a.strokeRect(t.targetOffset[0],t.targetOffset[1],512/t.scale,512/t.scale);const n=f`<div>
    <div style="margin-bottom: 8px; font-family: sans-serif; font-size: 13px; color: #666;">
      <strong>Level ${d+1} (z-${d+1})</strong>: ${t.bufferSize}×${t.bufferSize} assembly,
      scale ${t.scale}:1 (target shown in red)
    </div>
    ${l}
    <div style="margin-top: 8px; font-family: sans-serif; font-size: 12px; color: #888;">
      Target region: ${(512/t.scale).toFixed(0)}×${(512/t.scale).toFixed(0)} pixels at this resolution
    </div>
  </div>`;s.appendChild(n)}return m(s),{container:s}},inputs:["html","parentLevelsData","levelInfo","display"],outputs:["container"],output:void 0,assets:void 0,autodisplay:!1,autoview:void 0,automutable:void 0});g({root:document.getElementById("cell-12"),expanded:[],variables:[]},{id:12,body:(f,p,c,m,s)=>{const t=78271.517578125/Math.pow(2,f.z),e=performance.now(),i=p({targetData:c,parentLevels:m,levelInfo:s,tileSize:512,pixelSize:t,directions:[[1,0],[-1,0],[0,1],[0,-1]]}),o=performance.now()-e;let l=1/0,a=-1/0,u=0;for(let r=0;r<i.length;r++)l=Math.min(l,i[r]),a=Math.max(a,i[r]),u+=i[r];const n={min:l,max:a,mean:u/i.length};return{EARTH_CIRCUMFERENCE:40075017,pixelSize:t,startTime:e,lsaoResult:i,lsaoTime:o,min:l,max:a,sum:u,lsaoStats:n}},inputs:["coords","computeLSAOCPU","bufferedData","parentLevelsData","levelInfo"],outputs:["EARTH_CIRCUMFERENCE","pixelSize","startTime","lsaoResult","lsaoTime","min","max","sum","lsaoStats"],output:void 0,assets:void 0,autodisplay:!1,autoview:void 0,automutable:void 0});g({root:document.getElementById("cell-13"),expanded:[],variables:[]},{id:13,body:(f,p,c,m,s,d)=>{const t=document.createElement("canvas");t.width=512,t.height=512;const e=t.getContext("2d"),i=e.createImageData(512,512);for(let o=0;o<f.length;o++){const l=Math.floor(Math.min(Math.max(f[o],0),1)*255);i.data[o*4]=l,i.data[o*4+1]=l,i.data[o*4+2]=l,i.data[o*4+3]=255}return e.putImageData(i,0,0),p(c`<div>
  <div style="margin-bottom: 8px; font-family: sans-serif; font-size: 13px; color: #666;">
    <strong>${m} parent level${m>1?"s":""}</strong> |
    Range: ${s.min.toFixed(3)} to ${s.max.toFixed(3)} |
    Mean: ${s.mean.toFixed(3)} |
    Time: ${d.toFixed(1)}ms (CPU)
  </div>
  ${t}
</div>`),{canvas:t,ctx:e,imageData:i}},inputs:["lsaoResult","display","html","numLevelsInput","lsaoStats","lsaoTime"],outputs:["canvas","ctx","imageData"],output:void 0,assets:void 0,autodisplay:!1,autoview:void 0,automutable:void 0});g({root:document.getElementById("cell-15"),expanded:[],variables:[]},{id:15,body:(f,p,c)=>{const m=[],s=512*(1+Math.pow(2,f));let d=512;for(let l=0;l<f;l++){const a=Math.pow(2,l+1);d+=512/a}const t=document.createElement("canvas");t.width=512,t.height=300;const e=t.getContext("2d");e.fillStyle="#f9f9f9",e.fillRect(0,0,512,300);const i=400/Math.max(s,d);e.fillStyle="#e74c3c",e.fillRect(50,80,s*i,40),e.fillStyle="#333",e.font="13px sans-serif",e.fillText(`Current: ${s}px`,60,105),e.fillStyle="#27ae60",e.fillRect(50,150,d*i,40),e.fillStyle="#333",e.fillText(`Correct: ${d.toFixed(0)}px`,60,175);const o=((s-d)/s*100).toFixed(1);return e.fillStyle="#666",e.font="14px sans-serif",e.fillText(`Efficiency improvement: ${o}% fewer pixels to process`,50,230),p(c`<div>
  <div style="margin-bottom: 8px; font-family: sans-serif; font-size: 13px; color: #666;">
    <strong>Sweep Size Comparison</strong>
  </div>
  ${t}
  <div style="margin-top: 8px; font-family: sans-serif; font-size: 12px; color: #888;">
    The current implementation processes ${(s/d).toFixed(2)}× more pixels than necessary!
  </div>
</div>`),{analysis:m,currentSweepSize:s,correctSweepSize:d,canvas:t,ctx:e,scale:i,efficiency:o}},inputs:["numLevelsInput","display","html"],outputs:["analysis","currentSweepSize","correctSweepSize","canvas","ctx","scale","efficiency"],output:void 0,assets:void 0,autodisplay:!1,autoview:void 0,automutable:void 0});
