function C(e){return-e}function S(e){return e}function q(e){return e*e}function B(e){return e===S||e===C?e:e===Math.sqrt?q:e===Math.log?Math.exp:e===Math.exp?Math.log:o=>D(e,o,o)}function D(e,o,i){let n=100,d,c,a;i=i===void 0?0:+i,o=+o;do c=e(i),a=e(i+1e-6),c===a&&(a=c+1e-6),i-=d=-1*1e-6*(c-o)/(c-a);while(n-- >0&&Math.abs(d)>1e-6);return n<0?NaN:i}function P(e,[o,i]=[0,1],n){n=n||{};const c=typeof n.stepSubdivisionHeight=="number"?n.stepSubdivisionHeight:50,a=typeof n.shiftKeySubdivisions=="number"?n.shiftKeySubdivisions:5;n.invertControl===void 0||n.invertControl,o=+o,i=+i;let s=n.transform,l=n.invert;if(o>i&&([o,i]=[i,o],s===void 0&&(s=C)),s===void 0&&(s=S),typeof s!="function")throw new TypeError("transform is not a function");if(l===void 0&&(l=s.invert===void 0?B(s):s.invert),typeof l!="function")throw new TypeError("invert is not a function");n=Object.assign({},n,{transform:s,invert:l});const f=e([o,i],n);f.style.position="relative";const r=f.querySelector("input[type=range]");r.style.cursor="move",r.title="Move vertically or press shift key to adjust rate";const u=document.createElement("span");u.style.position="absolute",u.style.color="#666",u.style.top="-7px",u.style.fontSize="0.75em",u.style.pointerEvents="none",f.appendChild(u);function v(t){u.style.right="0",t===-1?u.textContent="":t===0?u.textContent="1×":u.textContent=`1/${Math.pow(2,t)}×`}const L=s(o),m=s(i);let y,g,h;function E(t){y=t.clientX,g=t.clientY,h=y}function b(t){const H=r.getBoundingClientRect(),w=t.clientX,I=t.clientY,K=w-h;let p=Math.min(0,Math.round(-Math.abs(I-g)/c));t.shiftKey&&(p-=a);const N=Math.pow(2,p);v(Math.abs(p));const T=K/(H.width-16)*(m-L);r.value=r.valueAsNumber+T*N,r.dispatchEvent(new CustomEvent("input")),f.dispatchEvent(new CustomEvent("input")),h=w}function M(t){v(-1)}return r.addEventListener("pointerdown",function(t){t.preventDefault(),r.setPointerCapture(t.pointerId),E(t)}),r.addEventListener("touchstart",function(t){t.touches.length&&E(t.touches[0])}),r.addEventListener("pointermove",function(t){t.buttons===1&&(b(t),t.preventDefault())}),r.addEventListener("touchmove",function(t){t.touches.length===1&&(b(t.touches[0]),t.preventDefault())}),r.addEventListener("pointerup",function(t){r.releasePointerCapture(t.pointerId),M()}),r.addEventListener("touchend",function(t){t.touches.length>0||M()}),f}export{P as default};
