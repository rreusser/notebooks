async function i(){if(!navigator.gpu)throw new Error("WebGPU is not supported in this browser");const e=await navigator.gpu.requestAdapter();if(!e)throw new Error("Failed to get WebGPU adapter");const n=await e.requestDevice();n.lost.then(r=>{console.error("WebGPU device lost:",r.message,r.reason)}),n.addEventListener?.("uncapturederror",r=>{console.error("WebGPU uncaptured error:",r.error.message)});const a=navigator.gpu.getPreferredCanvasFormat();return{adapter:e,device:n,canvasFormat:a}}function c(){return typeof navigator<"u"&&navigator.gpu!==void 0}function p(e,n,{pixelRatio:a=devicePixelRatio,alphaMode:r="opaque"}={}){return function({current:u,width:g,height:s}){let t,o;return u?(t=u,o=t._gpuContext):(t=document.createElement("canvas"),o=t.getContext("webgpu"),t._gpuContext=o,o.configure({device:e,format:n,alphaMode:r}),t.value={device:e,context:o,format:n}),t.width=Math.floor(g*a),t.height=Math.floor(s*a),t.style.width=`${g}px`,t.style.height=`${s}px`,t.style.position="absolute",t.style.top="0",t.style.left="0",o.configure({device:e,format:n,alphaMode:r}),t}}function f(e,n,a){const r=Math.min(e.xRange[0],e.xRange[1])*n,u=Math.min(e.yRange[0],e.yRange[1])*n,g=Math.abs(e.xRange[1]-e.xRange[0])*n,s=Math.abs(e.yRange[0]-e.yRange[1])*n;return{x:r,y:u,width:g,height:s}}export{i as createWebGPUContext,c as isWebGPUAvailable,f as webgpuAxesViewport,p as webgpuElement};
