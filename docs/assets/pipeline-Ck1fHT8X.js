import{c as D}from"./fft-BKdtHrAL.js";async function i(e){const t=await fetch(e);if(!t.ok)throw new Error(`Failed to load shader: ${e}`);return t.text()}async function _(e,t){const d=await D(e),[s,p,y,b,f,c,g]=await Promise.all([i("./shaders/initialize.wgsl"),i("./shaders/differentiate.wgsl"),i("./shaders/compute_nonlinear.wgsl"),i("./shaders/bdf_update.wgsl"),i("./shaders/extract_real.wgsl"),i("./shaders/fullscreen.wgsl"),i("./shaders/visualize.wgsl")]),P=e.createShaderModule({label:"Initialize shader",code:s}),S=e.createShaderModule({label:"Differentiate shader",code:p}),h=e.createShaderModule({label:"Compute nonlinear shader",code:y}),G=e.createShaderModule({label:"BDF update shader",code:b}),U=e.createShaderModule({label:"Extract real shader",code:f}),m=e.createShaderModule({label:"Fullscreen vertex shader",code:c}),M=e.createShaderModule({label:"Visualize shader",code:g}),a=e.createBindGroupLayout({label:"Initialize bind group layout",entries:[{binding:0,visibility:GPUShaderStage.COMPUTE,buffer:{type:"storage"}},{binding:1,visibility:GPUShaderStage.COMPUTE,buffer:{type:"uniform"}}]}),n=e.createBindGroupLayout({label:"Differentiate bind group layout",entries:[{binding:0,visibility:GPUShaderStage.COMPUTE,buffer:{type:"read-only-storage"}},{binding:1,visibility:GPUShaderStage.COMPUTE,buffer:{type:"storage"}},{binding:2,visibility:GPUShaderStage.COMPUTE,buffer:{type:"uniform"}}]}),r=e.createBindGroupLayout({label:"Compute nonlinear bind group layout",entries:[{binding:0,visibility:GPUShaderStage.COMPUTE,buffer:{type:"read-only-storage"}},{binding:1,visibility:GPUShaderStage.COMPUTE,buffer:{type:"storage"}},{binding:2,visibility:GPUShaderStage.COMPUTE,buffer:{type:"uniform"}}]}),l=e.createBindGroupLayout({label:"BDF update bind group layout",entries:[{binding:0,visibility:GPUShaderStage.COMPUTE,buffer:{type:"read-only-storage"}},{binding:1,visibility:GPUShaderStage.COMPUTE,buffer:{type:"read-only-storage"}},{binding:2,visibility:GPUShaderStage.COMPUTE,buffer:{type:"read-only-storage"}},{binding:3,visibility:GPUShaderStage.COMPUTE,buffer:{type:"read-only-storage"}},{binding:4,visibility:GPUShaderStage.COMPUTE,buffer:{type:"storage"}},{binding:5,visibility:GPUShaderStage.COMPUTE,buffer:{type:"uniform"}}]}),o=e.createBindGroupLayout({label:"Extract real bind group layout",entries:[{binding:0,visibility:GPUShaderStage.COMPUTE,buffer:{type:"read-only-storage"}},{binding:1,visibility:GPUShaderStage.COMPUTE,buffer:{type:"storage"}},{binding:2,visibility:GPUShaderStage.COMPUTE,buffer:{type:"uniform"}}]}),u=e.createBindGroupLayout({label:"Visualize bind group layout",entries:[{binding:0,visibility:GPUShaderStage.FRAGMENT,buffer:{type:"read-only-storage"}},{binding:1,visibility:GPUShaderStage.FRAGMENT,buffer:{type:"uniform"}},{binding:2,visibility:GPUShaderStage.FRAGMENT,texture:{sampleType:"float"}},{binding:3,visibility:GPUShaderStage.FRAGMENT,sampler:{type:"filtering"}}]}),L=e.createPipelineLayout({label:"Initialize pipeline layout",bindGroupLayouts:[a]}),C=e.createPipelineLayout({label:"Differentiate pipeline layout",bindGroupLayouts:[n]}),E=e.createPipelineLayout({label:"Compute nonlinear pipeline layout",bindGroupLayouts:[r]}),z=e.createPipelineLayout({label:"BDF update pipeline layout",bindGroupLayouts:[l]}),T=e.createPipelineLayout({label:"Extract real pipeline layout",bindGroupLayouts:[o]}),x=e.createPipelineLayout({label:"Visualize pipeline layout",bindGroupLayouts:[u]}),O=e.createComputePipeline({label:"Initialize pipeline",layout:L,compute:{module:P,entryPoint:"initialize"}}),B=e.createComputePipeline({label:"Differentiate pipeline",layout:C,compute:{module:S,entryPoint:"differentiate"}}),w=e.createComputePipeline({label:"Compute nonlinear pipeline",layout:E,compute:{module:h,entryPoint:"compute_nonlinear"}}),F=e.createComputePipeline({label:"BDF update pipeline",layout:z,compute:{module:G,entryPoint:"bdf_update"}}),R=e.createComputePipeline({label:"Extract real pipeline",layout:T,compute:{module:U,entryPoint:"extract_real"}}),N=e.createRenderPipeline({label:"Visualize pipeline",layout:x,vertex:{module:m,entryPoint:"fullscreen"},fragment:{module:M,entryPoint:"visualize",targets:[{format:t}]},primitive:{topology:"triangle-list"}});return{fft:d,initialize:O,differentiate:B,computeNonlinear:w,bdfUpdate:F,extractReal:R,visualize:N,bindGroupLayouts:{initialize:a,differentiate:n,computeNonlinear:r,bdfUpdate:l,extractReal:o,visualize:u}}}export{_ as createKSPipelines};
