function j(e={}){const n=e.width||8,o=e.length||10;return function(l){l.attr("viewBox",`0 -${n/2} ${o} ${n}`).attr("refX",o-1).attr("refY",0).attr("markerWidth",o).attr("markerHeight",n).attr("orient","auto").append("path").attr("d",`M0,-${n/2}L${o},0L0,${n/2}`).attr("fill",e.fill||"black")}}function z(e={}){const n=e.width||8,o=e.length||10;return function(l){l.attr("viewBox",`0 -${n/2} ${o} ${n}`).attr("refX",1).attr("refY",0).attr("markerWidth",o).attr("markerHeight",n).attr("orient","auto").append("path").attr("d",`M${o},-${n/2}L0,0L${o},${n/2}`).attr("fill",e.fill||"black")}}function v(e){const n=Math.round(Math.min(255,Math.max(0,e[0]*255))),o=Math.round(Math.min(255,Math.max(0,e[1]*255))),l=Math.round(Math.min(255,Math.max(0,e[2]*255)));return`#${n.toString(16).padStart(2,"0")}${o.toString(16).padStart(2,"0")}${l.toString(16).padStart(2,"0")}`}function H(e,n,o,l={}){const s=l.width||350,d=l.height||Math.floor(s*.7),h=e.create("svg").attr("width",s).attr("height",d).style("max-width","100%").style("height","auto"),t=n.y0,c={xmin:Math.min(t[0],t[4],t[8]),xmax:Math.max(t[0],t[4],t[8]),ymin:Math.min(t[1],t[5],t[9]),ymax:Math.max(t[1],t[5],t[9]),umin:Math.min(t[2],t[6],t[10]),umax:Math.max(t[2],t[6],t[10]),vmin:Math.min(t[3],t[7],t[11]),vmax:Math.max(t[3],t[7],t[11])},i=Math.max(c.xmax-c.xmin,c.ymax-c.ymin)||2,S=Math.max(Math.abs(c.umin),Math.abs(c.umax),Math.abs(c.vmin),Math.abs(c.vmax));function x(a){return a/Math.max(i*.2,S*1.2)}const f=e.scaleLinear().domain([-i,i]).range([0,s]),M=e.scaleLinear().domain([-i*d/s,i*d/s]).range([d,0]),k=e.line().x(a=>f(a[0])).y(a=>M(a[1])),u=`arrowhead-${Math.random().toString(36).slice(2)}`,$=`arrowhead-start-${Math.random().toString(36).slice(2)}`,w=h.append("defs");w.append("marker").attr("id",u).call(j()),w.append("marker").attr("id",$).call(z());const m=.9;h.append("g").attr("class","axes").selectAll("path").data([[[-i*m,0],[i*m,0]],[[0,-i*m*d/s],[0,i*m*d/s]]]).join("path").attr("d",k).attr("stroke","black").attr("fill","none").attr("stroke-width",1).attr("marker-start",`url(#${$})`).attr("marker-end",`url(#${u})`);const y=[[t[0],t[1]],[t[4],t[5]],[t[8],t[9]]],p=[[x(t[2]),x(t[3])],[x(t[6]),x(t[7])],[x(t[10]),x(t[11])]],g=n.pointSize.map(a=>Math.max(2.5,a*8)),A=o.color,L=o.strokeColor||[[1,1,1],[1,1,1],[1,1,1]];h.append("g").attr("class","velocities").selectAll("path").data(y.map((a,r)=>[[a[0],a[1]],[a[0]+p[r][0],a[1]+p[r][1]]]).filter((a,r)=>p[r][0]*p[r][0]+p[r][1]*p[r][1]>1e-4)).join("path").attr("d",k).attr("stroke","black").attr("fill","none").attr("stroke-width",1.5).attr("marker-end",`url(#${u})`),h.append("g").attr("class","bodies").selectAll("circle").data(y).join("circle").attr("cx",a=>f(a[0])).attr("cy",a=>M(a[1])).attr("r",(a,r)=>g[r]).attr("fill",(a,r)=>v(A[r])).attr("stroke",(a,r)=>v(L[r])).attr("stroke-width",2),h.append("g").attr("class","labels").selectAll("text").data([{xy:[0,i*m*d/s],text:"y"},{xy:[i*m,0],text:"x"}]).join("text").text(a=>a.text).attr("x",a=>f(a.xy[0])).attr("y",a=>M(a.xy[1])).attr("font-size","14px").attr("font-family","serif").attr("font-style","italic").attr("dy",-2).attr("dx",5);const b=h.append("g").attr("class","body-labels").selectAll("text").data(y).join("text").attr("x",a=>f(a[0])).attr("y",a=>M(a[1])).attr("font-size","14px").attr("font-family","serif").attr("font-style","italic").attr("dx",(a,r)=>3+g[r]*.707).attr("dy",(a,r)=>11+g[r]*.707).attr("text-anchor","start");return b.append("tspan").text("m"),b.append("tspan").attr("dy",5).attr("font-weight",400).attr("font-size","0.75em").text((a,r)=>r+1),h.node()}export{j as createArrowhead,z as createArrowheadReversed,H as createInitialConditionsFigure,v as floatRgbToHex};
