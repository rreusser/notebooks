import{createFFTPipelines as Y}from"./fft-CcaOZiHL.js";async function t(e){const i=await fetch(e);if(!i.ok)throw new Error(`Failed to load shader: ${e}`);return i.text()}async function ee(e,i,b){const y=Y(e,b),[c,f,g,P,S,h,m,U,G,M]=await Promise.all([t("./shaders/initialize.wgsl"),t("./shaders/differentiate.wgsl"),t("./shaders/extract_mixed_derivatives.wgsl"),t("./shaders/compute_ab.wgsl"),t("./shaders/pack_abhat.wgsl"),t("./shaders/compute_nonlinear.wgsl"),t("./shaders/bdf_update.wgsl"),t("./shaders/extract_real.wgsl"),t("./shaders/fullscreen.wgsl"),t("./shaders/visualize.wgsl")]),L=e.createShaderModule({label:"Initialize shader",code:c}),C=e.createShaderModule({label:"Differentiate shader",code:f}),B=e.createShaderModule({label:"Extract mixed derivatives shader",code:g}),x=e.createShaderModule({label:"Compute AB shader",code:P}),E=e.createShaderModule({label:"Pack ABhat shader",code:S}),T=e.createShaderModule({label:"Compute nonlinear shader",code:h}),v=e.createShaderModule({label:"BDF update shader",code:m}),O=e.createShaderModule({label:"Extract real shader",code:U}),z=e.createShaderModule({label:"Fullscreen vertex shader",code:G}),A=e.createShaderModule({label:"Visualize shader",code:M}),a=e.createBindGroupLayout({label:"Initialize bind group layout",entries:[{binding:0,visibility:GPUShaderStage.COMPUTE,buffer:{type:"storage"}},{binding:1,visibility:GPUShaderStage.COMPUTE,buffer:{type:"uniform"}}]}),r=e.createBindGroupLayout({label:"Differentiate bind group layout",entries:[{binding:0,visibility:GPUShaderStage.COMPUTE,buffer:{type:"read-only-storage"}},{binding:1,visibility:GPUShaderStage.COMPUTE,buffer:{type:"storage"}},{binding:2,visibility:GPUShaderStage.COMPUTE,buffer:{type:"uniform"}}]}),o=e.createBindGroupLayout({label:"Extract mixed derivatives bind group layout",entries:[{binding:0,visibility:GPUShaderStage.COMPUTE,buffer:{type:"read-only-storage"}},{binding:1,visibility:GPUShaderStage.COMPUTE,buffer:{type:"storage"}},{binding:2,visibility:GPUShaderStage.COMPUTE,buffer:{type:"uniform"}}]}),n=e.createBindGroupLayout({label:"Compute AB bind group layout",entries:[{binding:0,visibility:GPUShaderStage.COMPUTE,buffer:{type:"read-only-storage"}},{binding:1,visibility:GPUShaderStage.COMPUTE,buffer:{type:"storage"}},{binding:2,visibility:GPUShaderStage.COMPUTE,buffer:{type:"storage"}},{binding:3,visibility:GPUShaderStage.COMPUTE,buffer:{type:"uniform"}}]}),l=e.createBindGroupLayout({label:"Pack ABhat bind group layout",entries:[{binding:0,visibility:GPUShaderStage.COMPUTE,buffer:{type:"read-only-storage"}},{binding:1,visibility:GPUShaderStage.COMPUTE,buffer:{type:"read-only-storage"}},{binding:2,visibility:GPUShaderStage.COMPUTE,buffer:{type:"storage"}},{binding:3,visibility:GPUShaderStage.COMPUTE,buffer:{type:"uniform"}}]}),u=e.createBindGroupLayout({label:"Compute nonlinear bind group layout",entries:[{binding:0,visibility:GPUShaderStage.COMPUTE,buffer:{type:"read-only-storage"}},{binding:1,visibility:GPUShaderStage.COMPUTE,buffer:{type:"storage"}},{binding:2,visibility:GPUShaderStage.COMPUTE,buffer:{type:"uniform"}}]}),p=e.createBindGroupLayout({label:"BDF update bind group layout",entries:[{binding:0,visibility:GPUShaderStage.COMPUTE,buffer:{type:"read-only-storage"}},{binding:1,visibility:GPUShaderStage.COMPUTE,buffer:{type:"read-only-storage"}},{binding:2,visibility:GPUShaderStage.COMPUTE,buffer:{type:"read-only-storage"}},{binding:3,visibility:GPUShaderStage.COMPUTE,buffer:{type:"read-only-storage"}},{binding:4,visibility:GPUShaderStage.COMPUTE,buffer:{type:"storage"}},{binding:5,visibility:GPUShaderStage.COMPUTE,buffer:{type:"uniform"}}]}),d=e.createBindGroupLayout({label:"Extract real bind group layout",entries:[{binding:0,visibility:GPUShaderStage.COMPUTE,buffer:{type:"read-only-storage"}},{binding:1,visibility:GPUShaderStage.COMPUTE,buffer:{type:"storage"}},{binding:2,visibility:GPUShaderStage.COMPUTE,buffer:{type:"uniform"}}]}),s=e.createBindGroupLayout({label:"Visualize bind group layout",entries:[{binding:0,visibility:GPUShaderStage.FRAGMENT,buffer:{type:"read-only-storage"}},{binding:1,visibility:GPUShaderStage.FRAGMENT,buffer:{type:"uniform"}},{binding:2,visibility:GPUShaderStage.FRAGMENT,texture:{sampleType:"float"}},{binding:3,visibility:GPUShaderStage.FRAGMENT,sampler:{type:"filtering"}}]}),w=e.createPipelineLayout({label:"Initialize pipeline layout",bindGroupLayouts:[a]}),D=e.createPipelineLayout({label:"Differentiate pipeline layout",bindGroupLayouts:[r]}),_=e.createPipelineLayout({label:"Extract mixed derivatives pipeline layout",bindGroupLayouts:[o]}),k=e.createPipelineLayout({label:"Compute AB pipeline layout",bindGroupLayouts:[n]}),F=e.createPipelineLayout({label:"Pack ABhat pipeline layout",bindGroupLayouts:[l]}),R=e.createPipelineLayout({label:"Compute nonlinear pipeline layout",bindGroupLayouts:[u]}),N=e.createPipelineLayout({label:"BDF update pipeline layout",bindGroupLayouts:[p]}),I=e.createPipelineLayout({label:"Extract real pipeline layout",bindGroupLayouts:[d]}),V=e.createPipelineLayout({label:"Visualize pipeline layout",bindGroupLayouts:[s]}),K=e.createComputePipeline({label:"Initialize pipeline",layout:w,compute:{module:L,entryPoint:"initialize"}}),$=e.createComputePipeline({label:"Differentiate pipeline",layout:D,compute:{module:C,entryPoint:"differentiate"}}),j=e.createComputePipeline({label:"Extract mixed derivatives pipeline",layout:_,compute:{module:B,entryPoint:"extract_mixed_derivatives"}}),q=e.createComputePipeline({label:"Compute AB pipeline",layout:k,compute:{module:x,entryPoint:"compute_ab"}}),H=e.createComputePipeline({label:"Pack ABhat pipeline",layout:F,compute:{module:E,entryPoint:"pack_abhat"}}),J=e.createComputePipeline({label:"Compute nonlinear pipeline",layout:R,compute:{module:T,entryPoint:"compute_nonlinear"}}),Q=e.createComputePipeline({label:"BDF update pipeline",layout:N,compute:{module:v,entryPoint:"bdf_update"}}),W=e.createComputePipeline({label:"Extract real pipeline",layout:I,compute:{module:O,entryPoint:"extract_real"}}),X=e.createRenderPipeline({label:"Visualize pipeline",layout:V,vertex:{module:z,entryPoint:"fullscreen"},fragment:{module:A,entryPoint:"visualize",targets:[{format:i}]},primitive:{topology:"triangle-list"}});return{fft:y,initialize:K,differentiate:$,extractMixedDerivatives:j,computeAB:q,packABhat:H,computeNonlinear:J,bdfUpdate:Q,extractReal:W,visualize:X,bindGroupLayouts:{initialize:a,differentiate:r,extractMixedDerivatives:o,computeAB:n,packABhat:l,computeNonlinear:u,bdfUpdate:p,extractReal:d,visualize:s}}}export{ee as createKSPipelines};
