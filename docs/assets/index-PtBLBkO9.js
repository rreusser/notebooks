const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/pipeline-Ck1fHT8X.js","assets/fft-BKdtHrAL.js","assets/execute-B1Gq2wde.js","assets/buffers-GrqrZRML.js"])))=>i.map(i=>d[i]);
import{d as s,_ as p}from"./index-ByB2dbry.js";s({root:document.getElementById("cell-2"),expanded:[],variables:[]},{id:2,body:async(t,n)=>{const{createWebGPUContext:e}=await p(()=>import("./webgpu-context-BoQcYhON.js"),[]).then(a=>{if(!("createWebGPUContext"in a))throw new SyntaxError("export 'createWebGPUContext' not found");return a});console.log("[Step 1] Creating WebGPU context...");const i=await e(),o=i.device;return console.log("[Step 1] ✓ Device created"),t.then(()=>{console.log("[Cleanup] Destroying device"),o.destroy()}),n("hello!"),{createWebGPUContext:e,context:i,device:o}},inputs:["invalidation","display"],outputs:["createWebGPUContext","context","device"],output:void 0,assets:void 0,autodisplay:!1,autoview:void 0,automutable:void 0});s({root:document.getElementById("cell-3"),expanded:[],variables:[]},{id:3,body:()=>({N:[256,256]}),inputs:[],outputs:["N"],output:void 0,assets:void 0,autodisplay:!1,autoview:void 0,automutable:void 0});s({root:document.getElementById("cell-4"),expanded:[],variables:[]},{id:4,body:(t,n)=>({rangeMax:t(n.range([.1,2],{step:.1,value:1,label:"Range max"}))}),inputs:["view","Inputs"],outputs:["rangeMax"],output:void 0,assets:void 0,autodisplay:!1,autoview:void 0,automutable:void 0});s({root:document.getElementById("cell-5"),expanded:[],variables:[]},{id:5,body:async(t,n)=>{const{createSimulationBuffers:e,destroySimulationBuffers:i}=await p(()=>import("./buffers-GrqrZRML.js"),[]).then(a=>{if(!("createSimulationBuffers"in a))throw new SyntaxError("export 'createSimulationBuffers' not found");if(!("destroySimulationBuffers"in a))throw new SyntaxError("export 'destroySimulationBuffers' not found");return a});console.log("[Step 2] Creating buffers...");const o=e({N:t,device:n});return console.log("[Step 2] ✓ Buffers created"),{createSimulationBuffers:e,destroySimulationBuffers:i,buffers:o}},inputs:["N","device"],outputs:["createSimulationBuffers","destroySimulationBuffers","buffers"],output:void 0,assets:void 0,autodisplay:!1,autoview:void 0,automutable:void 0});s({root:document.getElementById("cell-6"),expanded:[],variables:[]},{id:6,body:async t=>{const{createKSPipelines:n}=await p(()=>import("./pipeline-Ck1fHT8X.js"),__vite__mapDeps([0,1])).then(o=>{if(!("createKSPipelines"in o))throw new SyntaxError("export 'createKSPipelines' not found");return o});console.log("[Step 3] Creating pipelines...");const e=navigator.gpu.getPreferredCanvasFormat(),i=await n(t,e);return console.log("[Step 3] ✓ Pipelines created"),{createKSPipelines:n,canvasFormat:e,pipelines:i}},inputs:["device"],outputs:["createKSPipelines","canvasFormat","pipelines"],output:void 0,assets:void 0,autodisplay:!1,autoview:void 0,automutable:void 0});s({root:document.getElementById("cell-7"),expanded:[],variables:[]},{id:7,body:async(t,n,e,i)=>{const{performInitialization:o}=await p(()=>import("./execute-B1Gq2wde.js"),__vite__mapDeps([2,3,1])).then(u=>{if(!("performInitialization"in u))throw new SyntaxError("export 'performInitialization' not found");return u});console.log("[Step 4] Initializing simulation...");const a=[2*Math.PI/t[0],2*Math.PI/t[1]],r={device:n,pipelines:e,buffers:i,config:{N:t,dx:a,dt:.18,nu:[.002418,.002418]}};return await o(r,1),console.log("[Step 4] ✓ Initialization complete"),{performInitialization:o,dx:a,ctx:r}},inputs:["N","device","pipelines","buffers"],outputs:["performInitialization","dx","ctx"],output:void 0,assets:void 0,autodisplay:!1,autoview:void 0,automutable:void 0});s({root:document.getElementById("cell-8"),expanded:[],variables:[]},{id:8,body:(t,n,e,i)=>{console.log("[Step 5] Setting up canvas...");const o=t`<canvas width="512" height="512" style="width: 100%; max-width: 512px; height: auto; image-rendering: pixelated;"></canvas>`;n(o);const a=o.getContext("webgpu");return a.configure({device:e,format:i}),console.log("[Step 5] ✓ Canvas configured"),{canvas:o,ctx2d:a}},inputs:["html","display","device","canvasFormat"],outputs:["canvas","ctx2d"],output:void 0,assets:void 0,autodisplay:!1,autoview:void 0,automutable:void 0});s({root:document.getElementById("cell-9"),expanded:[],variables:[]},{id:9,body:(t,n,e)=>{console.log("[Step 6] Creating colorscale...");function i(r,u){const m=t.quantize(u,256),c=new Uint8Array(256*4);for(let d=0;d<256;d++){const f=t.rgb(m[d]);c[d*4+0]=f.r,c[d*4+1]=f.g,c[d*4+2]=f.b,c[d*4+3]=255}const g=r.createTexture({size:[256,1,1],format:"rgba8unorm",usage:n.TEXTURE_BINDING|n.COPY_DST});return r.queue.writeTexture({texture:g},c,{bytesPerRow:256*4},{width:256,height:1}),g}const o=i(e,t.interpolateMagma),a=e.createSampler({magFilter:"linear",minFilter:"linear",addressModeU:"clamp-to-edge"});return console.log("[Step 6] ✓ Colorscale created"),{createColorscaleTexture:i,colorscaleTexture:o,sampler:a}},inputs:["d3","GPUTextureUsage","device"],outputs:["createColorscaleTexture","colorscaleTexture","sampler"],output:void 0,assets:void 0,autodisplay:!1,autoview:void 0,automutable:void 0});s({root:document.getElementById("cell-10"),expanded:[],variables:[]},{id:10,body:(t,n,e,i,o,a)=>{console.log("[Step 7] Creating visualization uniform buffer, rangeMax:",n);const r=e.createBuffer({size:32,usage:i.UNIFORM|i.COPY_DST}),u=new Uint32Array(8);return u[0]=o[0],u[1]=o[1],new Float32Array(u.buffer)[2]=0,new Float32Array(u.buffer)[3]=n,u[4]=0,e.queue.writeBuffer(r,0,u),console.log("[Step 7] ✓ Uniform buffer created with rangeMax:",n),a.then(()=>{r.destroy()}),{visualizeParamsBuffer:r,visualizeParamsData:u}},inputs:["ctx","rangeMax","device","GPUBufferUsage","N","invalidation"],outputs:["visualizeParamsBuffer","visualizeParamsData"],output:void 0,assets:void 0,autodisplay:!1,autoview:void 0,automutable:void 0});s({root:document.getElementById("cell-11"),expanded:[],variables:[]},{id:11,body:(t,n,e,i,o,a)=>{console.log("[Step 8] Creating bind group...");const r=t.createBindGroup({layout:n.bindGroupLayouts.visualize,entries:[{binding:0,resource:{buffer:e.V[0]}},{binding:1,resource:{buffer:i}},{binding:2,resource:o.createView()},{binding:3,resource:a}]});return console.log("[Step 8] ✓ Bind group created"),{visualizeBindGroup:r}},inputs:["device","pipelines","buffers","visualizeParamsBuffer","colorscaleTexture","sampler"],outputs:["visualizeBindGroup"],output:void 0,assets:void 0,autodisplay:!1,autoview:void 0,automutable:void 0});s({root:document.getElementById("cell-12"),expanded:[],variables:[]},{id:12,body:async(t,n,e,i,o)=>{console.log("[Step 9] Rendering with rangeMax:",t);const a=n.getCurrentTexture(),r=a.createView(),u=e.createCommandEncoder(),l=u.beginRenderPass({colorAttachments:[{view:r,loadOp:"clear",storeOp:"store",clearValue:{r:0,g:0,b:0,a:1}}]});return l.setPipeline(i.visualize),l.setBindGroup(0,o),l.draw(3,1,0,0),l.end(),e.queue.submit([u.finish()]),console.log("[Step 9] ✓ Render submitted"),await e.queue.onSubmittedWorkDone(),console.log("[Step 9] ✓ Render complete"),console.log("=== ALL STEPS COMPLETE ==="),window.__debugClient?.signalReady(),{currentTexture:a,view:r,encoder:u,pass:l}},inputs:["rangeMax","ctx2d","device","pipelines","visualizeBindGroup"],outputs:["currentTexture","view","encoder","pass"],output:void 0,assets:void 0,autodisplay:!1,autoview:void 0,automutable:void 0});
