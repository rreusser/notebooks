import{d as v,_ as h}from"./index-ByB2dbry.js";v({root:document.getElementById("cell-1"),expanded:[],variables:[]},{id:1,body:async(g,t,o)=>{const[{TerrainMap:m},{TILE_URL_TERRAIN:b,TILE_URL_SENTINEL:s},{createGPULines:l},{default:y},{expandable:u}]=await Promise.all([h(()=>import("./terrain-viewer-BMu7TKDs.js"),[]).then(n=>{if(!("TerrainMap"in n))throw new SyntaxError("export 'TerrainMap' not found");return n}),h(()=>import("./tile-urls-B-E4qz8f.js"),[]).then(n=>{if(!("TILE_URL_TERRAIN"in n))throw new SyntaxError("export 'TILE_URL_TERRAIN' not found");if(!("TILE_URL_SENTINEL"in n))throw new SyntaxError("export 'TILE_URL_SENTINEL' not found");return n}),h(()=>import("https://cdn.jsdelivr.net/npm/webgpu-instanced-lines/+esm"),[]).then(n=>{if(!("createGPULines"in n))throw new SyntaxError("export 'createGPULines' not found");return n}),h(()=>import("https://cdn.jsdelivr.net/npm/simplify-js/+esm"),[]).then(n=>{if(!("default"in n))throw new SyntaxError("export 'default' not found");return n}),h(()=>import("./expandable-BCrxs32f.js"),[]).then(n=>{if(!("expandable"in n))throw new SyntaxError("export 'expandable' not found");return n})]),a=document.createElement("canvas");a.className="terrain";const r=await m.create(a,{sources:{"arctic-dem":{type:"terrain",tiles:[b],minzoom:4,maxzoom:13,bounds:[-152.9,62.2,-148.8,64],attribution:'<a href="https://www.pgc.umn.edu/data/arcticdem/" target="_blank" rel="noopener">ArcticDEM</a> | <a href="https://catalog.data.gov/dataset/srtm30-global-1-km-digital-elevation-model-dem-version-11-land-surface" target="_blank" rel="noopener">SRTM30</a>'},sentinel:{type:"raster",tiles:[s],minzoom:4,maxzoom:11,bounds:[-152.9,62.2,-148.8,64],attribution:'<a href="https://dataspace.copernicus.eu/" target="_blank" rel="noopener">Copernicus Sentinel-2</a>'},peaks:{type:"geojson",data:"osm/peaks.geojson",attribution:'<a href="https://www.openstreetmap.org/copyright" target="_blank" rel="noopener">OpenStreetMap</a>'},fkt:{type:"geojson",data:"strava/fkt.geojson",simplify:1e-4,attribution:'<a href="https://www.strava.com/activities/9223277277" target="_blank" rel="noopener">Strava</a>'}},camera:{center:[.08005793958567985,.00021365516506647512,.27291423467021114],distance:.0004971889617079275,phi:2.4972122538258654,theta:.13580281526641474},font:{atlas:"./mapviewer/fonts/roboto-regular.png",metadata:"./mapviewer/fonts/roboto-regular.json"},base:[{id:"satellite",source:"sentinel",blend:"source-over"}],features:[{id:"ski-tracks",type:"line",source:"fkt",paint:{"line-color":"#ff8800","line-width":5,"line-border-color":"#331100","line-border-width":2,"atmosphere-opacity":.5}},{id:"peak-circles",type:"circle",source:"peaks",paint:{"circle-radius":3,"circle-color":"#000000","circle-stroke-color":"#ffffff","circle-stroke-width":1.5,"atmosphere-opacity":.5}},{id:"peak-labels",type:"text",source:"peaks",paint:{"text-field":"name","text-size":16,"text-color":"#000000","text-halo-color":"#ffffff","text-halo-width":1.25,"atmosphere-opacity":.5}}],createGPULines:l,simplifyFn:y}),d=g`<div class="slope-legend" style="display: none">
  <div class="slope-legend-title">Slope angle</div>
  <div class="slope-legend-blocks">
    <div style="background: rgb(89, 217, 26)"></div>
    <div style="background: rgb(255, 217, 0)"></div>
    <div style="background: rgb(255, 128, 0)"></div>
    <div style="background: rgb(191, 0, 0)"></div>
    <div style="background: rgb(102, 0, 153)"></div>
    <div style="background: rgb(0, 51, 204)"></div>
    <div style="background: rgb(0, 0, 0)"></div>
  </div>
  <div class="slope-legend-labels">
    <span>26-29°</span>
    <span>30-31°</span>
    <span>32-34°</span>
    <span>35-45°</span>
    <span>46-50°</span>
    <span>51-59°</span>
    <span>60°+</span>
  </div>
</div>`;r._slopeLegend=d;const e=g`<div class="elevation-label"></div>`;a.addEventListener("mousemove",n=>{const c=r.raycast(n.clientX,n.clientY);if(c){const p=r.queryElevationMercator(c.worldPos[0],c.worldPos[2]);if(p!=null){const f=Math.round(p*3.28084);e.textContent=`${f.toLocaleString()} ft`,e.style.opacity="1"}else e.style.opacity="0"}else e.style.opacity="0"}),a.addEventListener("mouseleave",()=>{e.style.opacity="0"});const i=g`<div style="position: relative">`;return i.appendChild(a),i.appendChild(e),i.appendChild(d),i.appendChild(r.attribution),t(u(i,{wide:!0,width:640,height:600,toggleOffset:[-12,-12],controls:".terrain-controls",onResize(n,c,p,f){f?(a.style.width=`${c}px`,a.style.height=`${p}px`):(a.style.width="",a.style.height=""),r.camera.taint()}})),o.then(()=>r.destroy()),{TerrainMap:m,TILE_URL_TERRAIN:b,TILE_URL_SENTINEL:s,createGPULines:l,simplify:y,expandable:u,canvas:a,viewer:r,slopeLegend:d,elevationLabel:e,container:i}},inputs:["html","display","invalidation"],outputs:["TerrainMap","TILE_URL_TERRAIN","TILE_URL_SENTINEL","createGPULines","simplify","expandable","canvas","viewer","slopeLegend","elevationLabel","container"],output:void 0,assets:void 0,autodisplay:!1,autoview:void 0,automutable:void 0});v({root:document.getElementById("cell-2"),expanded:[],variables:[]},{id:2,body:async(g,t,o,m)=>{const{default:b}=await h(()=>import("https://cdn.jsdelivr.net/npm/suncalc/+esm"),[]).then(e=>{if(!("default"in e))throw new SyntaxError("export 'default' not found");return e}),s=g`<div class="terrain-controls"></div>`,l={date:new Date,timeOfDay:14},y=t._location;function u(){const e=l.timeOfDay,i=l.date,n=new Date(Date.UTC(i.getFullYear(),i.getMonth(),i.getDate(),Math.floor(e)+8,e%1*60,0)),c=b.getPosition(n,y.lat,y.lon),p=c.altitude,f=c.azimuth;t.settings.sunDirection=[-Math.cos(p)*Math.sin(f),Math.sin(p),Math.cos(p)*Math.cos(f)]}u();function a(e,i,n){e.appendChild(i),i.addEventListener("input",()=>n(i.value))}a(s,o.checkbox(["Imagery","Features","Route"],{value:["Imagery","Features","Route"],label:"Layers"}),e=>{t.settings.showImagery=e.includes("Imagery"),t.settings.showFeatures=e.includes("Features"),t.settings.showRoute=e.includes("Route")}),a(s,o.date({value:l.date,label:"Date"}),e=>{e&&(l.date=e,u())}),a(s,o.range([0,24],{value:l.timeOfDay,step:.01,label:"Time of day (AKDT)"}),e=>{l.timeOfDay=e,u()}),a(s,o.range([0,1],{value:t.settings.hillshadeOpacity,step:.01,label:"Hillshade opacity"}),e=>{t.settings.hillshadeOpacity=e}),a(s,o.range([0,1],{value:t.settings.slopeAngleOpacity,step:.01,label:"Slope angle opacity"}),e=>{t.settings.slopeAngleOpacity=e,t._slopeLegend.style.display=e>0?"":"none"}),a(s,o.range([0,1],{value:t.settings.contourOpacity,step:.01,label:"Contour opacity"}),e=>{t.settings.contourOpacity=e}),a(s,o.range([.05,1],{value:t.settings.atmosphereDensity,step:.01,label:"Atmosphere density"}),e=>{t.settings.atmosphereDensity=e}),a(s,o.range([0,2],{value:t.settings.verticalExaggeration,step:.01,label:"Vertical exaggeration"}),e=>{t.settings.verticalExaggeration=e}),a(s,o.range([10,90],{value:Math.round(t.camera.state.fov*180/Math.PI),step:1,label:"FOV (degrees)"}),e=>{t.camera.state.fov=e*Math.PI/180,t.camera.taint()});const r=g`<details><summary style="cursor: pointer;">Debug</summary><div style="display: flex; flex-direction: column; gap: 4px; margin-top: 4px"></div></details>`,d=r.querySelector("div");return s.appendChild(r),a(d,o.range([1,4],{value:t.settings.densityThreshold,step:.1,label:"Tile scale"}),e=>{t.settings.densityThreshold=e}),a(d,o.toggle({label:"Show tile borders"}),e=>{t.settings.showTileBorders=e}),a(d,o.toggle({label:"Freeze coverage"}),e=>{t.settings.freezeCoverage=e}),a(d,o.toggle({label:"Feature depth test"}),e=>{t.settings.featureDepthTest=e}),a(d,o.toggle({label:"Show collision boxes"}),e=>{t.settings.showCollisionBoxes=e}),m(s),{SunCalc:b,controlsContainer:s,sunState:l,location:y,updateSunDirection:u,addControl:a,debug:r,debugContent:d}},inputs:["html","viewer","Inputs","display"],outputs:["SunCalc","controlsContainer","sunState","location","updateSunDirection","addControl","debug","debugContent"],output:void 0,assets:void 0,autodisplay:!1,autoview:void 0,automutable:void 0});
