function b(t,n,f=!1){const l=t.length,a=Math.log2(l);for(let e=0;e<l;e++){let i=0;for(let u=0;u<a;u++)i=i<<1|e>>u&1;i>e&&([t[e],t[i]]=[t[i],t[e]],[n[e],n[i]]=[n[i],n[e]])}const o=f?1:-1;for(let e=2;e<=l;e*=2){const i=e/2,u=o*2*Math.PI/e,F=Math.cos(u),A=Math.sin(u);for(let I=0;I<l;I+=e){let w=1,y=0;for(let x=0;x<i;x++){const c=I+x,r=I+x+i,s=w*t[r]-y*n[r],h=w*n[r]+y*t[r];t[r]=t[c]-s,n[r]=n[c]-h,t[c]=t[c]+s,n[c]=n[c]+h;const M=w*F-y*A;y=w*A+y*F,w=M}}}if(f)for(let e=0;e<l;e++)t[e]/=l,n[e]/=l}function z(t,n){const f=new Float64Array(t);for(let l=0;l<t;l++){const a=l<t/2?l/t:(l-t)/t;f[l]=Math.exp(-2*Math.PI*Math.PI*n*n*a*a)}return f}function j(t,n,f,l){const a=t.length;for(let o=0;o<a;o++)f[o]=t[o],l[o]=0;b(f,l,!1);for(let o=0;o<a;o++)f[o]*=n[o],l[o]*=n[o];b(f,l,!0);for(let o=0;o<a;o++)t[o]=f[o]}function k(t){const n=new Float64Array(t),f=new Float64Array(t),l=new Float64Array(t),a=new Float64Array(t),o=new Float64Array(t);let e=null,i=null,u=null;function F(){for(let c=0;c<t;c++)n[c]=(Math.random()-.5)*.1}function A(c,r){e=z(t,c),i=z(t,c*r)}function I(c){u=c}function w(){if(u===null)return;const c=Math.floor(u*t),r=Math.floor(t*.03);for(let s=-r;s<=r;s++){let h=(c+s+t)%t;const d=1-Math.abs(s)/r;n[h]=n[h]*(1-d*.5)+1*d*.5}}function y(c,r){if(!(!e||!i)){w(),a.set(n),j(a,e,f,l),o.set(n),j(o,i,f,l);for(let s=0;s<t;s++){const h=a[s],M=o[s],d=(h-M)*c;n[s]=Math.atan(r*(n[s]+d))/r}}}function x(c,r,s){const h=c.createImageData(r,s),M=h.data;for(let d=0;d<r;d++){const T=Math.max(0,Math.min(1,(n[d]+1)*.5)),K=Math.floor(T*255);for(let P=0;P<s;P++){const D=(P*r+d)*4;M[D+0]=K,M[D+1]=K,M[D+2]=K,M[D+3]=255}}c.putImageData(h,0,0)}return{field:n,activator:a,inhibitor:o,initialize:F,setKernels:A,setMouse:I,step:y,render:x,N:t}}export{k as createTuring1D};
