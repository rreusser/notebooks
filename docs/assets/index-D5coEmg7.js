import{d as _,_ as u}from"./index-ByB2dbry.js";_({root:document.getElementById("cell-1"),expanded:[],variables:[]},{id:1,body:async(g,a,o,m,h)=>{const[{TerrainMap:i},{createGPULines:r},{default:c},{expandable:d}]=await Promise.all([u(()=>import("./terrain-viewer-BNxHc1mt.js"),[]).then(e=>{if(!("TerrainMap"in e))throw new SyntaxError("export 'TerrainMap' not found");return e}),u(()=>import("https://cdn.jsdelivr.net/npm/webgpu-instanced-lines/+esm"),[]).then(e=>{if(!("createGPULines"in e))throw new SyntaxError("export 'createGPULines' not found");return e}),u(()=>import("https://cdn.jsdelivr.net/npm/simplify-js/+esm"),[]).then(e=>{if(!("default"in e))throw new SyntaxError("export 'default' not found");return e}),u(()=>import("./expandable-BCrxs32f.js"),[]).then(e=>{if(!("expandable"in e))throw new SyntaxError("export 'expandable' not found");return e})]),t=document.createElement("canvas");t.className="terrain";const l=await i.create(t,{sources:{"arctic-dem":{type:"terrain",tiles:[g],minzoom:4,maxzoom:14,bounds:[-152.9,62.2,-148.8,64],attribution:'<a href="https://www.pgc.umn.edu/data/arcticdem/" target="_blank" rel="noopener">ArcticDEM</a> | <a href="https://catalog.data.gov/dataset/srtm30-global-1-km-digital-elevation-model-dem-version-11-land-surface" target="_blank" rel="noopener">SRTM30</a>'},sentinel:{type:"raster",tiles:[a],minzoom:4,maxzoom:11,bounds:[-152.9,62.2,-148.8,64],attribution:'<a href="https://dataspace.copernicus.eu/" target="_blank" rel="noopener">Copernicus Sentinel-2</a>'},peaks:{type:"geojson",data:"data/osm/peaks.geojson",attribution:'<a href="https://www.openstreetmap.org/copyright" target="_blank" rel="noopener">OpenStreetMap</a>'},fkt:{type:"geojson",data:"data/strava/fkt.geojson",simplify:1e-4,attribution:'<a href="https://www.strava.com/activities/9223277277" target="_blank" rel="noopener">Strava</a>'}},camera:{center:[.08005793958567985,.00021365516506647512,.27291423467021114],distance:.0004971889617079275,phi:2.4972122538258654,theta:.13580281526641474},font:{atlas:"./mapviewer/fonts/roboto-regular.png",metadata:"./mapviewer/fonts/roboto-regular.json"},base:[{id:"satellite",source:"sentinel",blend:"source-over"}],features:[{id:"ski-tracks",type:"line",source:"fkt",paint:{"line-color":"#ff8800","line-width":5,"line-border-color":"#331100","line-border-width":2,"atmosphere-opacity":.5}},{id:"peak-circles",type:"circle",source:"peaks",paint:{"circle-radius":3,"circle-color":"#000000","circle-stroke-color":"#ffffff","circle-stroke-width":1.5,"atmosphere-opacity":.5}},{id:"peak-labels",type:"text",source:"peaks",paint:{"text-field":"name","text-size":16,"text-color":"#000000","text-halo-color":"#ffffff","text-halo-width":3,"atmosphere-opacity":.5}}],createGPULines:r,simplifyFn:c}),n=o`<div style="position: relative">`;return n.appendChild(t),n.appendChild(l.attribution),m(d(n,{width:640,height:600,toggleOffset:[-12,-12],controls:".terrain-controls",onResize(e,s,p,f){f?(t.style.width=`${s}px`,t.style.height=`${p}px`):(t.style.width="",t.style.height=""),l.camera.taint()}})),h.then(()=>l.destroy()),{TerrainMap:i,createGPULines:r,simplify:c,expandable:d,canvas:t,viewer:l,container:n}},inputs:["__TILE_URL_TERRAIN__","__TILE_URL_SENTINEL__","html","display","invalidation"],outputs:["TerrainMap","createGPULines","simplify","expandable","canvas","viewer","container"],output:void 0,assets:void 0,autodisplay:!1,autoview:void 0,automutable:void 0});_({root:document.getElementById("cell-2"),expanded:[],variables:[]},{id:2,body:async(g,a,o,m)=>{const{default:h}=await u(()=>import("https://cdn.jsdelivr.net/npm/suncalc/+esm"),[]).then(e=>{if(!("default"in e))throw new SyntaxError("export 'default' not found");return e}),i=g`<div class="terrain-controls"></div>`,r={date:new Date,timeOfDay:14},c=a._location;function d(){const e=r.timeOfDay,s=r.date,p=new Date(Date.UTC(s.getFullYear(),s.getMonth(),s.getDate(),Math.floor(e)+8,e%1*60,0)),f=h.getPosition(p,c.lat,c.lon),y=f.altitude,b=f.azimuth;a.settings.sunDirection=[-Math.cos(y)*Math.sin(b),Math.sin(y),Math.cos(y)*Math.cos(b)]}d();function t(e,s,p){e.appendChild(s),s.addEventListener("input",()=>p(s.value))}t(i,o.checkbox(["Imagery","Features","Route"],{value:["Imagery","Features","Route"],label:"Layers"}),e=>{a.settings.showImagery=e.includes("Imagery"),a.settings.showFeatures=e.includes("Features"),a.settings.showRoute=e.includes("Route")}),t(i,o.date({value:r.date,label:"Date"}),e=>{e&&(r.date=e,d())}),t(i,o.range([0,24],{value:r.timeOfDay,step:.01,label:"Time of day (AKDT)"}),e=>{r.timeOfDay=e,d()}),t(i,o.range([0,1],{value:a.settings.hillshadeOpacity,step:.01,label:"Hillshade opacity"}),e=>{a.settings.hillshadeOpacity=e}),t(i,o.range([.05,1],{value:a.settings.atmosphereDensity,step:.01,label:"Atmosphere density"}),e=>{a.settings.atmosphereDensity=e});const l=g`<details><summary style="cursor: pointer;">Debug</summary><div style="display: flex; flex-direction: column; gap: 4px; margin-top: 4px"></div></details>`,n=l.querySelector("div");return i.appendChild(l),t(n,o.range([0,5],{value:a.settings.verticalExaggeration,step:.1,label:"Vertical exaggeration"}),e=>{a.settings.verticalExaggeration=e}),t(n,o.range([1,4],{value:a.settings.densityThreshold,step:.1,label:"Tile scale"}),e=>{a.settings.densityThreshold=e}),t(n,o.toggle({label:"Show tile borders"}),e=>{a.settings.showTileBorders=e}),t(n,o.toggle({label:"Freeze coverage"}),e=>{a.settings.freezeCoverage=e}),t(n,o.toggle({label:"Feature depth test"}),e=>{a.settings.featureDepthTest=e}),t(n,o.toggle({label:"Show collision boxes"}),e=>{a.settings.showCollisionBoxes=e}),m(i),{SunCalc:h,controlsContainer:i,sunState:r,location:c,updateSunDirection:d,addControl:t,debug:l,debugContent:n}},inputs:["html","viewer","Inputs","display"],outputs:["SunCalc","controlsContainer","sunState","location","updateSunDirection","addControl","debug","debugContent"],output:void 0,assets:void 0,autodisplay:!1,autoview:void 0,automutable:void 0});
