function j({d3:n,element:t,xScale:i,yScale:g,aspectRatio:l=null,scaleExtent:y=[.1,100],onChange:x=()=>{}}){const m=e=>typeof e.domain=="function"?e.domain():e.domain,b=e=>typeof e.range=="function"?e.range():e.range,D=m(i),v=m(g);function o(){return b(i)}function s(){return b(g)}function z(e,f){if(l==null)return[e,f];const u=o(),I=s(),r=Math.abs(u[1]-u[0]),H=Math.abs(I[1]-I[0]),E=(e[1]-e[0])*H/(r*l),F=(f[0]+f[1])/2,L=[F-E/2,F+E/2];return[e,L]}let[a,c]=z([...D],[...v]);const d=new Float32Array(16),R=new Float32Array(16);function Y(){S(d,a[0],a[1],c[0],c[1],-1,1),C(R,d)}Y();const h=n.scaleLinear().domain(a).range(o()),p=n.scaleLinear().domain(c).range(s());function M(){h.range(o()),p.range(s())}function W(){const e=o(),f=s();return[[e[0],f[1]],[e[1],f[0]]]}const w=n.select(t).attr("id","zoom-target").style("cursor","grab"),A=n.zoom().scaleExtent(y).extent(W).on("start",()=>w.style("cursor","grabbing")).on("end",()=>w.style("cursor","grab")).on("zoom",e=>{M(),a=e.transform.rescaleX(h).domain(),c=e.transform.rescaleY(p).domain(),Y(),x({xDomain:a,yDomain:c,xRange:o(),yRange:s()})});return w.call(A).call(A.transform,n.zoomIdentity),{get xDomain(){return a},get yDomain(){return c},get xRange(){return o()},get yRange(){return s()},get view(){return d},get viewInverse(){return R},get xScale(){return h.copy().domain(a)},get yScale(){return p.copy().domain(c)}}}function S(n,t,i,g,l,y,x){const m=1/(t-i),b=1/(g-l),D=1/(y-x);return n[0]=-2*m,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=-2*b,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=2*D,n[11]=0,n[12]=(t+i)*m,n[13]=(l+g)*b,n[14]=(x+y)*D,n[15]=1,n}function C(n,t){const i=t[0],g=t[1],l=t[2],y=t[3],x=t[4],m=t[5],b=t[6],D=t[7],v=t[8],o=t[9],s=t[10],z=t[11],a=t[12],c=t[13],d=t[14],R=t[15],Y=i*m-g*x,h=i*b-l*x,p=i*D-y*x,M=g*b-l*m,W=g*D-y*m,w=l*D-y*b,A=v*c-o*a,X=v*d-s*a,e=v*R-z*a,f=o*d-s*c,u=o*R-z*c,I=s*R-z*d;let r=Y*I-h*u+p*f+M*e-W*X+w*A;return r?(r=1/r,n[0]=(m*I-b*u+D*f)*r,n[1]=(l*u-g*I-y*f)*r,n[2]=(c*w-d*W+R*M)*r,n[3]=(s*W-o*w-z*M)*r,n[4]=(b*e-x*I-D*X)*r,n[5]=(i*I-l*e+y*X)*r,n[6]=(d*p-a*w-R*h)*r,n[7]=(v*w-s*p+z*h)*r,n[8]=(x*u-m*e+D*A)*r,n[9]=(g*e-i*u-y*A)*r,n[10]=(a*W-c*p+R*Y)*r,n[11]=(o*p-v*W-z*Y)*r,n[12]=(m*X-x*f-b*A)*r,n[13]=(i*f-g*X+l*A)*r,n[14]=(c*h-a*M-d*Y)*r,n[15]=(v*M-o*h+s*Y)*r,n):null}export{j as createZoomableAxes};
