import{d as b,_ as u}from"./index-ByB2dbry.js";b({root:document.getElementById("cell-1"),expanded:[],variables:[]},{id:1,body:async(f,t,n)=>{const[{TerrainMap:g},{TILE_URL_TERRAIN:p,TILE_URL_SENTINEL:o},{createGPULines:i},{default:c},{expandable:d}]=await Promise.all([u(()=>import("./terrain-viewer-UUyUgx7a.js"),[]).then(e=>{if(!("TerrainMap"in e))throw new SyntaxError("export 'TerrainMap' not found");return e}),u(()=>import("./tile-urls-B-E4qz8f.js"),[]).then(e=>{if(!("TILE_URL_TERRAIN"in e))throw new SyntaxError("export 'TILE_URL_TERRAIN' not found");if(!("TILE_URL_SENTINEL"in e))throw new SyntaxError("export 'TILE_URL_SENTINEL' not found");return e}),u(()=>import("https://cdn.jsdelivr.net/npm/webgpu-instanced-lines/+esm"),[]).then(e=>{if(!("createGPULines"in e))throw new SyntaxError("export 'createGPULines' not found");return e}),u(()=>import("https://cdn.jsdelivr.net/npm/simplify-js/+esm"),[]).then(e=>{if(!("default"in e))throw new SyntaxError("export 'default' not found");return e}),u(()=>import("./expandable-BCrxs32f.js"),[]).then(e=>{if(!("expandable"in e))throw new SyntaxError("export 'expandable' not found");return e})]),a=document.createElement("canvas");a.className="terrain";const l=await g.create(a,{sources:{"arctic-dem":{type:"terrain",tiles:[p],minzoom:4,maxzoom:14,bounds:[-152.9,62.2,-148.8,64],attribution:'<a href="https://www.pgc.umn.edu/data/arcticdem/" target="_blank" rel="noopener">ArcticDEM</a> | <a href="https://catalog.data.gov/dataset/srtm30-global-1-km-digital-elevation-model-dem-version-11-land-surface" target="_blank" rel="noopener">SRTM30</a>'},sentinel:{type:"raster",tiles:[o],minzoom:4,maxzoom:11,bounds:[-152.9,62.2,-148.8,64],attribution:'<a href="https://dataspace.copernicus.eu/" target="_blank" rel="noopener">Copernicus Sentinel-2</a>'},peaks:{type:"geojson",data:"osm/peaks.geojson",attribution:'<a href="https://www.openstreetmap.org/copyright" target="_blank" rel="noopener">OpenStreetMap</a>'},fkt:{type:"geojson",data:"strava/fkt.geojson",simplify:1e-4,attribution:'<a href="https://www.strava.com/activities/9223277277" target="_blank" rel="noopener">Strava</a>'}},camera:{center:[.08005793958567985,.00021365516506647512,.27291423467021114],distance:.0004971889617079275,phi:2.4972122538258654,theta:.13580281526641474},font:{atlas:"./mapviewer/fonts/roboto-regular.png",metadata:"./mapviewer/fonts/roboto-regular.json"},base:[{id:"satellite",source:"sentinel",blend:"source-over"}],features:[{id:"ski-tracks",type:"line",source:"fkt",paint:{"line-color":"#ff8800","line-width":5,"line-border-color":"#331100","line-border-width":2,"atmosphere-opacity":.5}},{id:"peak-circles",type:"circle",source:"peaks",paint:{"circle-radius":3,"circle-color":"#000000","circle-stroke-color":"#ffffff","circle-stroke-width":1.5,"atmosphere-opacity":.5}},{id:"peak-labels",type:"text",source:"peaks",paint:{"text-field":"name","text-size":16,"text-color":"#000000","text-halo-color":"#ffffff","text-halo-width":1.25,"atmosphere-opacity":.5}}],createGPULines:i,simplifyFn:c}),r=f`<div style="position: relative">`;return r.appendChild(a),r.appendChild(l.attribution),t(d(r,{wide:!0,width:640,height:600,toggleOffset:[-12,-12],controls:".terrain-controls",onResize(e,s,h,m){m?(a.style.width=`${s}px`,a.style.height=`${h}px`):(a.style.width="",a.style.height=""),l.camera.taint()}})),n.then(()=>l.destroy()),{TerrainMap:g,TILE_URL_TERRAIN:p,TILE_URL_SENTINEL:o,createGPULines:i,simplify:c,expandable:d,canvas:a,viewer:l,container:r}},inputs:["html","display","invalidation"],outputs:["TerrainMap","TILE_URL_TERRAIN","TILE_URL_SENTINEL","createGPULines","simplify","expandable","canvas","viewer","container"],output:void 0,assets:void 0,autodisplay:!1,autoview:void 0,automutable:void 0});b({root:document.getElementById("cell-2"),expanded:[],variables:[]},{id:2,body:async(f,t,n,g)=>{const{default:p}=await u(()=>import("https://cdn.jsdelivr.net/npm/suncalc/+esm"),[]).then(e=>{if(!("default"in e))throw new SyntaxError("export 'default' not found");return e}),o=f`<div class="terrain-controls"></div>`,i={date:new Date,timeOfDay:14},c=t._location;function d(){const e=i.timeOfDay,s=i.date,h=new Date(Date.UTC(s.getFullYear(),s.getMonth(),s.getDate(),Math.floor(e)+8,e%1*60,0)),m=p.getPosition(h,c.lat,c.lon),y=m.altitude,_=m.azimuth;t.settings.sunDirection=[-Math.cos(y)*Math.sin(_),Math.sin(y),Math.cos(y)*Math.cos(_)]}d();function a(e,s,h){e.appendChild(s),s.addEventListener("input",()=>h(s.value))}a(o,n.checkbox(["Imagery","Features","Route"],{value:["Imagery","Features","Route"],label:"Layers"}),e=>{t.settings.showImagery=e.includes("Imagery"),t.settings.showFeatures=e.includes("Features"),t.settings.showRoute=e.includes("Route")}),a(o,n.date({value:i.date,label:"Date"}),e=>{e&&(i.date=e,d())}),a(o,n.range([0,24],{value:i.timeOfDay,step:.01,label:"Time of day (AKDT)"}),e=>{i.timeOfDay=e,d()}),a(o,n.range([0,1],{value:t.settings.hillshadeOpacity,step:.01,label:"Hillshade opacity"}),e=>{t.settings.hillshadeOpacity=e}),a(o,n.range([.05,1],{value:t.settings.atmosphereDensity,step:.01,label:"Atmosphere density"}),e=>{t.settings.atmosphereDensity=e}),a(o,n.range([0,2],{value:t.settings.verticalExaggeration,step:.01,label:"Vertical exaggeration"}),e=>{t.settings.verticalExaggeration=e}),a(o,n.range([10,90],{value:Math.round(t.camera.state.fov*180/Math.PI),step:1,label:"FOV (degrees)"}),e=>{t.camera.state.fov=e*Math.PI/180,t.camera.taint()});const l=f`<details><summary style="cursor: pointer;">Debug</summary><div style="display: flex; flex-direction: column; gap: 4px; margin-top: 4px"></div></details>`,r=l.querySelector("div");return o.appendChild(l),a(r,n.range([1,4],{value:t.settings.densityThreshold,step:.1,label:"Tile scale"}),e=>{t.settings.densityThreshold=e}),a(r,n.toggle({label:"Show tile borders"}),e=>{t.settings.showTileBorders=e}),a(r,n.toggle({label:"Freeze coverage"}),e=>{t.settings.freezeCoverage=e}),a(r,n.toggle({label:"Feature depth test"}),e=>{t.settings.featureDepthTest=e}),a(r,n.toggle({label:"Show collision boxes"}),e=>{t.settings.showCollisionBoxes=e}),g(o),{SunCalc:p,controlsContainer:o,sunState:i,location:c,updateSunDirection:d,addControl:a,debug:l,debugContent:r}},inputs:["html","viewer","Inputs","display"],outputs:["SunCalc","controlsContainer","sunState","location","updateSunDirection","addControl","debug","debugContent"],output:void 0,assets:void 0,autodisplay:!1,autoview:void 0,automutable:void 0});
